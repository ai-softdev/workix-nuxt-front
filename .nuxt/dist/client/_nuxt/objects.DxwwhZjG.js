import{p as c}from"./entry.Cf3c7v7V.js";import{a as o,n as s,l as i}from"./nuxt-storage.LTSgK-Sl.js";const d=c("object",{state:()=>({objects:{id:"",name:"",address:"",email:"",description:"",files:"",participants:{id:""}}}),getters:{get_objects(e){return this.objects}},actions:{async loadObjectList(){o.get("object/list",{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(e=>{this.objects=e.data})},async loadObject(e){o.get(`object/${e.id}`,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(t=>{this.objects=t.data})},async createObject(e){let t=new FormData;t.set("name",e.name),t.set("address",e.address),t.set("email",e.email),t.set("description",e.description),typeof e.files!="string"&&t.set("files",e.files),o.post("object/create",t,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(a=>{this.objects=a.data,i.success("Компания успешно создана",{autoClose:1500,theme:"auto"}),this.loadObjectList()}).catch(a=>{i.error(a,{autoClose:1500,theme:"auto"})})}}});export{d as u};
