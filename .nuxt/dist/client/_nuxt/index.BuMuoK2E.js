import{g as y,J as N,o as d,c as f,a as e,k as w,x as U,h as s,t as n,m as P,q as z,l as $,A as L,n as M,b as c,F as T,r as q,i as H,E as G,ae as J,H as O,j as I,w as u,d as _,s as Q}from"./entry.Dos5mvIN.js";import{u as W}from"./index.da1fIcdO.js";import{u as k}from"./documents.DIdm1boA.js";import{u as B}from"./auth.aqacddpH.js";import{_ as Z}from"./TheSearch.vue.B19fxDWi.js";import{P as K}from"./vuejs-paginate-next.es.C8Kmb_O5.js";import{_ as X}from"./info.N2nPQJQx.js";import{_ as R}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as Y}from"./companies.CkXOzTuB.js";import{_ as S}from"./TheInput.vue.CR5iM2Pr.js";import{_ as ee}from"./TheFileInput.vue.cD7VQBNC.js";import{_ as F}from"./TheButton.vue.gJpUNod2.js";import{_ as te}from"./TheModal.vue.D3hlHb3t.js";import"./nuxt-storage.Df5leMsQ.js";import"./chat.DdCdJX2D.js";import"./ElemUI.DkdZNB-C.js";const se={class:"py-5 px-6 border rounded-3xl bg-whiteLilia dark:hover:bg-gray-700 hover:bg-gray-100 transition-all"},oe={class:"flex items-center gap-3"},ne=e("div",{class:"rounded-lg bg-white shadow-sm p-2 w-8 h-8 flex items-center justify-center"},[e("svg",{width:"18",height:"22",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M11 10H5M7 14H5M13 6H5M17 5.8V16.2C17 17.8802 17 18.7202 16.673 19.362C16.3854 19.9265 15.9265 20.3854 15.362 20.673C14.7202 21 13.8802 21 12.2 21H5.8C4.11984 21 3.27976 21 2.63803 20.673C2.07354 20.3854 1.6146 19.9265 1.32698 19.362C1 18.7202 1 17.8802 1 16.2V5.8C1 4.11984 1 3.27976 1.32698 2.63803C1.6146 2.07354 2.07354 1.6146 2.63803 1.32698C3.27976 1 4.11984 1 5.8 1H12.2C13.8802 1 14.7202 1 15.362 1.32698C15.9265 1.6146 16.3854 2.07354 16.673 2.63803C17 3.27976 17 4.11984 17 5.8Z",stroke:"currentColor","stroke-width":"1.65","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),le=e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M0.999999 8L15 8M15 8L8 1M15 8L8 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ae={class:"text-center mb-4"},re={class:"flex items-center justify-center gap-x-2"},ie={class:"w-6 h-6"},ue=["src"],ce={class:"text-mediumGray text-sm"},de=y({__name:"DocumentContentListElem",props:{item:{type:Object,default:()=>{}}},setup(m){const t=N(),l=B();return(o,x)=>(d(),f("div",se,[e("div",{onClick:x[0]||(x[0]=U(p=>s(t).push(`/base/documents/${m.item.id}`),["stop"])),class:"cursor-pointer mb-4 pb-4 border-b hover:!text-golden text-black transition-all ease-in-out duration-300 flex items-center gap-3 justify-between"},[e("div",oe,[ne,w(o.$slots,"documentTitle")]),le]),e("p",ae,n(o.$t("Пользователь"))+": ",1),e("div",re,[e("div",ie,[e("img",{class:"rounded-full w-full",src:s(l).get_server_domain+m.item.author.photo,alt:""},null,8,ue)]),e("p",ce,[w(o.$slots,"documentUserName")])])]))}}),me={class:"p-6 rounded-3xl shadow-cards bg-white mb-8 max-[680px]:p-3"},pe={class:"flex items-center gap-10 justify-between max-[680px]:flex-col"},_e={class:"flex items-center gap-x-3 p-2 rounded-full border w-fit max-[680px]:gap-1"},fe={class:"flex gap-x-2 gap-y-2 flex-wrap mt-6"},xe={key:0,class:"flex items-center justify-center text-center"},ge=e("p",{class:"text-gray-500 text-center w-full py-10"}," Документов пока нет ",-1),he=[ge],ve={class:"w-full flex items-center justify-end gap-4 pr-10 pb-5 max-md:pr-3 max-md:flex-col max-md:items-end"},$e={class:"flex items-center gap-3"},we=e("p",null,"Строк на странице:",-1),ye=["value"],be=y({__name:"DocumentContentList",setup(m){const t=P(),l=z(),o=k(),x=$(0),p=$([5,10,20,30,50]),a=$(Number(t.query.page)||1),r=$(Number(t.query.limit)||5),v=$(t.query.query||""),b=$(t.query.type||"from-me"),A=g=>{a.value=g,C()},E=()=>{a.value=1,C()},j=g=>{b.value=g,a.value=1,C()},C=()=>{l.push({query:{page:a.value,limit:r.value,query:v.value||void 0,type:b.value||void 0}}),o.loadAllDocument({page:a.value,limit:r.value,query:v.value,type:b.value})};return L(()=>o.documentList,g=>{g&&g.count&&r.value&&(x.value=Math.ceil(g.count/r.value))},{immediate:!0}),(g,h)=>{var V;return d(),f("div",null,[e("div",me,[e("div",pe,[e("div",_e,[e("button",{class:M(["text-sm max-[680px]:p-3",["py-3 px-10 rounded-full font-medium",s(b)==="from-me"?"bg-golden":""]]),onClick:h[0]||(h[0]=i=>j("from-me"))},n(g.$t("Мои документы")),3),e("button",{class:M(["text-sm max-[680px]:p-3",["py-3 px-10 rounded-full font-medium",s(b)==="through-me"?"bg-golden":""]]),onClick:h[1]||(h[1]=i=>j("through-me"))},n(g.$t("Ожидающие подтверждения")),3)]),c(Z,{class:"w-4/12 max-[680px]:w-full","model-value":s(v),"onUpdate:modelValue":h[2]||(h[2]=i=>v.value=i),onSearch:C},null,8,["model-value"])]),e("div",fe,[(d(!0),f(T,null,q(s(o).get_all_document.results,i=>(d(),I(de,{item:i},{documentTitle:u(()=>[_(n(i.title),1)]),documentFileName:u(()=>[_(n(i.file_name),1)]),documentUserName:u(()=>[_(n(i.author.first_name+" "+i.author.last_name),1)]),_:2},1032,["item"]))),256)),(V=s(o).documentList.results)!=null&&V.length?H("",!0):(d(),f("div",xe,he))])]),e("div",ve,[c(s(K),{"page-count":s(x),"page-range":3,"margin-pages":2,"click-handler":A,"prev-text":"<","next-text":">","container-class":"pagination","page-class":"page-item","force-page":s(a)},null,8,["page-count","force-page"]),e("div",$e,[we,G(e("select",{"onUpdate:modelValue":h[3]||(h[3]=i=>O(r)?r.value=i:null),onChange:E,class:"w-fit p-2.5 rounded-md border bg-white dark:bg-bgWhite text-black"},[(d(!0),f(T,null,q(s(p),i=>(d(),f("option",{key:i,value:i},n(i),9,ye))),128))],544),[[J,s(r)]])])])])}}}),Ce={class:"w-full"},ke=y({__name:"DocumentContent",setup(m){return(t,l)=>(d(),f("div",Ce,[c(be)]))}}),De=""+globalThis.__publicAssetsURL("icons/tick.svg"),Le=""+globalThis.__publicAssetsURL("icons/processed.svg"),je={},Ve={class:"flex items-center gap-x-6"},Me={class:"w-full flex items-center gap-x-2"},Te={class:"tracking-wider"},qe={class:"flex gap-x-4"};function Se(m,t){return d(),f("div",Ve,[e("div",Me,[e("div",null,[w(m.$slots,"infoIcon")]),e("p",Te,[w(m.$slots,"infoText"),_(":")])]),e("div",qe,[e("p",null,[w(m.$slots,"infoCount")])])])}const D=R(je,[["render",Se]]),Fe={class:"w-full h-fit bg-white px-5 py-6 rounded-3xl shadow-cards"},Ne={class:"w-full p-2 flex items-center gap-2 justify-center border rounded-full mb-8"},Ue=e("img",{src:X,alt:"info"},null,-1),He={class:"flex flex-col gap-y-4"},Ie=e("img",{src:De,alt:"tick"},null,-1),Be=e("img",{src:Le,alt:"processed"},null,-1),Re=y({__name:"DocumentInfo",setup(m){const t=k();return(l,o)=>(d(),f("div",Fe,[e("div",Ne,[Ue,e("p",null,n(l.$t("Информация")),1)]),e("div",He,[c(D,null,{infoText:u(()=>[_(n(l.$t("Количество")),1)]),infoCount:u(()=>[_(n(s(t).documentList.count||0),1)]),_:1}),c(D,null,{infoIcon:u(()=>[Ie]),infoText:u(()=>[_(n(l.$t("Одобренные")),1)]),infoCount:u(()=>[_(n(s(t).documentList.approved_count||0),1)]),_:1}),c(D,null,{infoIcon:u(()=>[Be]),infoText:u(()=>[_(n(l.$t("На рассмотрении")),1)]),infoCount:u(()=>[_(n(s(t).documentList.waiting_count||0),1)]),_:1})])]))}}),Ae={},Ee={class:"dark:text-white text-lg mb-10"};function Pe(m,t){return d(),f("div",null,[e("h1",Ee,[w(m.$slots,"default")])])}const ze=R(Ae,[["render",Pe]]),Ge={class:"flex justify-center gap-x-10 mt-4"},Je=y({__name:"DocumentContentHeaderCreate",setup(m){const t=k();return(l,o)=>{const x=ze;return d(),f("div",null,[c(x,{class:"text-center"},{default:u(()=>[_(n(l.$t("Добавьте новый документ")),1)]),_:1}),e("form",{class:"flex gap-y-2 flex-col",onSubmit:o[3]||(o[3]=U(p=>s(t).docCreate({...s(t).createForm}),["prevent"]))},[c(S,{type:"text",label:"Название",required:"",modelValue:s(t).createForm.title,"onUpdate:modelValue":o[0]||(o[0]=p=>s(t).createForm.title=p)},null,8,["modelValue"]),c(S,{type:"textarea",label:"Описание",modelValue:s(t).createForm.description,"onUpdate:modelValue":o[1]||(o[1]=p=>s(t).createForm.description=p)},null,8,["modelValue"]),e("div",null,[c(ee)]),e("div",Ge,[c(F,{type:"danger",class:"px-2 py-1 rounded-lg",onClick:o[2]||(o[2]=p=>{s(t).showCreateDoc=!1,s(t).createForm={}})},{default:u(()=>[_(n(l.$t("Отмена")),1)]),_:1}),c(F,{type:"success",class:"px-2 py-1 rounded-lg"},{default:u(()=>[_(n(l.$t("Создать")),1)]),_:1})])],32)])}}}),Oe={class:"flex items-center gap-4 justify-between max-[680px]:flex-col max-[680px]:items-start max-[680px]:gap-5"},Qe={class:"dark:text-white text-3xl font-bold"},We={class:"flex justify-between gap-5 mt-8 max-[1250px]:flex-col"},mt=y({__name:"index",setup(m){const t=k();Q(()=>{t.loadAllDocument({page:1,limit:5,type:"from-me"})});const l=N(),o=B(),x=Y();return L(()=>o.user,p=>{var a,r;((r=(a=o==null?void 0:o.user)==null?void 0:a.role)==null?void 0:r.name_en)==="admin"&&(window.history.length>1?l.push("/base/profile"):l.push("/"))}),L(()=>x.company,p=>{var r;((r=x.company.modules)==null?void 0:r.find(v=>v.name_en==="documents"))||(window.history.length>1?l.push("/base/profile"):l.push("/"))}),W({title:"Документы"}),(p,a)=>(d(),f("div",null,[e("div",Oe,[e("p",Qe,n(p.$t("Документы")),1),e("button",{onClick:a[0]||(a[0]=r=>s(t).showCreateDoc=!0),class:"rounded-full py-3 px-8 font-medium bg-golden flex items-center gap-x-2 transition-all"}," + "+n(p.$t("Добавить документ")),1),s(t).showCreateDoc?(d(),I(te,{key:0,type:"resize",onShowModal:a[1]||(a[1]=r=>s(t).showCreateDoc=!1)},{default:u(()=>[c(Je)]),_:1})):H("",!0)]),e("div",We,[c(ke,{class:"!w-9/12 max-[1250px]:!w-full max-[1250px]:order-2"}),c(Re,{class:"!w-3/12 max-[1250px]:!w-full"})])]))}});export{mt as default};
