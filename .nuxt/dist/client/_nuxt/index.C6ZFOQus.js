import{e as C}from"./entry.CdFGy_Vi.js";import{u as V}from"./index.CE6AG9hv.js";import{_ as g}from"./TheTextContent.vue.CGoTFFNB.js";import{_ as O}from"./nuxt-link.igQL401O.js";import{j as b,N as d,O as p,L as t,V as l,Z as u,_ as f,J as L,a3 as N,u as c,$ as _,P as j,a5 as B,a as S,a2 as h,a6 as U,b as x}from"./swiper-vue.CpIVhgAG.js";import{u as v}from"./objects.CIMaFbHE.js";import{_ as M}from"./TheSearch.vue.Dv1cF_IN.js";import{_ as T}from"./TheFilter.vue.BTWE6CgH.js";import{_ as $}from"./TheButton.vue.DhG6-Ij1.js";import{_ as E}from"./TheModal.vue.D0U2_Fhe.js";import{_ as F}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{_ as y}from"./TheInput.vue.GDcPlh8K.js";import{u as k}from"./auth.DhjSf4Yi.js";import{u as R}from"./companies.CyNz1mQ4.js";import"./nuxt-storage.hATfV0XZ.js";const A=""+globalThis.__publicAssetsURL("img/logo-company.png"),D=u("img",{class:"w-[50px] h-[50px]",src:A,alt:""},null,-1),J={class:"tracking-widest"},P=b({__name:"ObjectList",props:{object:{type:Object,default:()=>{}}},setup(s){return(a,i)=>{const r=O;return d(),p("div",null,[t(r,{to:`/base/objects/${s.object.id}`,class:"transition-all cursor-pointer dark:bg-gray-400 dark:hover:bg-gray-300 dark:shadow-none shadow-xl hover:bg-gray-100 dark:border-none border-t border-t-gray-100 p-4 rounded-xl flex items-center gap-x-4"},{default:l(()=>[D,u("h1",J,f(s.object.name),1)]),_:1},8,["to"])])}}}),Z={class:"flex gap-x-10"},q={class:"w-full flex flex-col gap-y-4"},z={class:"dark:border-t dark:border-t-gray-500 border-t border-t-gray-100 dark:shadow-gray-500 shadow-md w-4/12 rounded-lg p-2"},G=u("div",null,null,-1),H=b({__name:"ObjectContent",setup(s){const a=v();return a.loadObjectList(),(i,r)=>(d(),p("div",Z,[u("div",q,[(d(!0),p(L,null,N(c(a).get_objects.results,o=>(d(),j(P,{object:o},null,8,["object"]))),256))]),u("div",z,[t(g,null,{default:l(()=>[_(f(i.$t("Информация по объектам")),1)]),_:1}),G])]))}}),I={},K={class:"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full"};function Q(s,a){return d(),p("div",K,[B(s.$slots,"default")])}const w=F(I,[["render",Q]]),W={class:"w-6/12"},X={class:"w-6/12"},Y=b({__name:"ObjectCreate",props:{showCreate:{type:Boolean,default:!1}},setup(s){const a=v(),i=k(),r=S({name:"",files:"",address:""});return(o,e)=>{var m;return d(),p("div",null,[(m=c(i).user.permissions)!=null&&m.find(n=>n.name_en==="object.create")?(d(),p("button",{key:0,class:"font-bold tracking-widest text-white bg-blue-400 mx-auto py-4 rounded-xl w-full px-4 text-sm",onClick:e[0]||(e[0]=n=>s.showCreate=!0)},f(o.$t("Создать объект")),1)):h("",!0),s.showCreate?(d(),j(E,{key:1,onShowModal:e[5]||(e[5]=n=>s.showCreate=!s.showCreate)},{default:l(()=>[t(g,null,{default:l(()=>[_(f(o.$t("Создание объекта")),1)]),_:1}),u("form",{onSubmit:e[4]||(e[4]=U(n=>c(a).createObject(c(r)),["prevent"]))},[t(w,null,{default:l(()=>[u("div",W,[t(y,{type:"text",label:o.$t("Наименование"),modelValue:c(r).name,"onUpdate:modelValue":e[1]||(e[1]=n=>c(r).name=n)},null,8,["label","modelValue"])])]),_:1}),t(w,{class:"flex-wrap"},{default:l(()=>[u("div",X,[t(y,{type:"text",label:o.$t("Адрес"),modelValue:c(r).address,"onUpdate:modelValue":e[2]||(e[2]=n=>c(r).address=n)},null,8,["label","modelValue"])])]),_:1}),t(w,null,{default:l(()=>[t($,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:e[3]||(e[3]=n=>s.showCreate=!1)},{default:l(()=>[_(f(o.$t("Отменить")),1)]),_:1}),t($,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:l(()=>[_(f(o.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1})):h("",!0)])}}}),ee={class:"flex items-center gap-x-6"},be=b({__name:"index",setup(s){const a=C(),i=k(),r=R();return x(()=>i.user,o=>{var e,m;((m=(e=i==null?void 0:i.user)==null?void 0:e.role)==null?void 0:m.name_en)==="admin"&&(window.history.length>1?a.push("/base/profile"):a.push("/"))}),x(()=>r.company,o=>{var m;((m=r.company.modules)==null?void 0:m.find(n=>n.name_en==="objects"))||(window.history.length>1?a.push("/base/profile"):a.push("/"))}),V({title:"Объекты",description:"Объекты компании"}),(o,e)=>(d(),p("div",null,[t(g,{"text-type":"pageTitle"},{default:l(()=>[_(f(o.$t("Страница с объектами")),1)]),_:1}),u("div",ee,[t(M,{class:"w-8/12"}),t(T),t(Y,{class:"w-2/12 ml-auto"})]),t(H)]))}});export{be as default};
