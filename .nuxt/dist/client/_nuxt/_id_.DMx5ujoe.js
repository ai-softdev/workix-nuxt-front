import{_ as A}from"./TheButton.vue.BVY6maLB.js";import{u as N}from"./index.COfx5xQv.js";import{u as S}from"./companies.DyejQYG-.js";import{b as H}from"./entry.CPXMl2NJ.js";import{_ as T}from"./TheTextContent.vue.Bxghit5p.js";import{_ as V}from"./TheBreadcrumbs.vue.jEog_mJp.js";import{_ as M}from"./TheModal.vue.CyL8QOxY.js";import{T as W}from"./TheCheckbox.Cpf2teTG.js";import{_ as f}from"./TheInput.vue.DPjuIUBj.js";import{j as z,a as x,w as F,b as L,a8 as j,N as i,O as u,L as d,V as m,Z as e,_ as n,u as a,J as v,a3 as k,P as $,a2 as E,$ as p}from"./swiper-vue.CGVHF6NK.js";import"./nuxt-storage.LTSgK-Sl.js";import"./nuxt-link.CubXqE4Q.js";import"./chat.Cj6hhnl2.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const D={class:"flex items-center gap-x-4"},I=e("div",null,[e("svg",{width:"15px",height:"15px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"dark:stroke-white stroke-black",d:"M14 12C14 14.7614 11.7614 17 9 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7H7.5M10 12C10 9.23858 12.2386 7 15 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17H16.5","stroke-width":"2","stroke-linecap":"round"})])],-1),J={class:"flex items-start gap-10 w-full max-md:flex-col"},O={class:"flex flex-col gap-4 mt-10 w-8/12 max-md:w-full"},P={class:"flex flex-col gap-2"},R={class:"flex flex-col gap-2"},Z={class:"flex flex-col gap-2"},q={class:"flex flex-col gap-2"},G={class:"bg-bgWhite p-3 rounded-lg flex flex-col gap-3 items-start"},K={class:"bg-bgWhite p-3 w-full border rounded-lg"},Q={class:"flex flex-col gap-2 w-4/12 max-md:w-full"},X={class:"flex flex-col gap-3 bg-bgWhite p-3 rounded-lg max-h-[400px] min-h-[400px] h-full overflow-y-scroll"},Y={class:"bg-bgWhite p-3 w-full border rounded-lg"},ee={class:"flex flex-col gap-2 min-h-[400px] min-w-[400px] max-md:min-w-full"},le={class:"grid grid-cols-2 gap-3 max-md:grid-cols-1"},ae={class:"bg-[#8881] p-3 w-full border rounded-lg"},oe={class:"flex flex-col gap-5"},te=e("p",null," Создание администратора: ",-1),se={class:"flex items-center gap-5 max-md:flex-col"},de={class:"grid grid-cols-2 items-center gap-5 max-md:grid-cols-1"},ve=z({__name:"[id]",setup(ne){const g=H(),t=S(),b=x(!1),h=x(!1),_=x([]);let s=x({email:"",password:"",first_name:"",last_name:"",patronymic:"",phone:"",company_id:""});const y=()=>{b.value=!b.value},w=()=>{h.value=!h.value},U=()=>{y();let r=[];_.value.forEach(l=>{l.value&&r.push(l.id)}),t.editModules({id:g.params.id,data:r})},B=()=>{w(),s.value.company_id=g.params.id,t.createAdministrator({data:s.value,company_id:g.params.id})};return F(()=>{t.loadCompany({id:g.params.id}),t.loadModules(),t.loadCompanyAdministrators({company_id:g.params.id})}),L(()=>t.modules,r=>{_.value=[],t.modules.forEach(l=>{const c=t.company.modules.some(o=>o.id===l.id);_.value.push({...l,value:c})})}),j(()=>{N({title:`${t.company.name}`})}),(r,l)=>{const c=A;return i(),u("div",null,[d(T,null,{default:m(()=>[p(n(r.$t("Страница компании "+a(t).company.name)),1)]),_:1}),e("div",null,[e("div",D,[d(V,{"breadcrumb-link":"/base/companies"},{default:m(()=>[p(n(r.$t("Список компаний")),1)]),_:1}),I,d(V,null,{default:m(()=>[p(n(a(t).company.name),1)]),_:1})]),e("div",J,[e("div",O,[e("div",P,[e("p",null,n(r.$t("Описание"))+": ",1),e("p",null,n(a(t).company.description),1)]),e("div",R,[e("p",null,n(r.$t("Email"))+": ",1),e("p",null,n(a(t).company.email),1)]),e("div",Z,[e("p",null,n(r.$t("Адрес"))+": ",1),e("p",null,n(a(t).company.address),1)]),e("div",q,[e("p",null,n(r.$t("Администраторы компании"))+": ",1),e("div",G,[d(c,{onClick:w,class:"mb-2 border p-3 rounded-lg !text-black dark:!text-white"},{default:m(()=>[p(" Добавить ")]),_:1}),(i(!0),u(v,null,k(a(t).company_administrators,(o,C)=>(i(),u("div",K,n(o.last_name+" "+o.first_name),1))),256))])])]),e("div",Q,[e("p",null,n(r.$t("Модули компании"))+": ",1),e("div",X,[d(c,{onClick:y,class:"mb-2 border p-3 rounded-lg !text-black dark:!text-white"},{default:m(()=>[p(" Изменить ")]),_:1}),(i(!0),u(v,null,k(a(t).company.modules,(o,C)=>(i(),u("div",Y,n(o.name),1))),256))])])])]),a(b)?(i(),$(M,{key:0,type:"resize",onShowModal:l[0]||(l[0]=()=>{})},{default:m(()=>[e("button",{class:"absolute top-3 right-3",onClick:y}," x "),e("div",ee,[e("p",null,n(r.$t("Модули"))+": ",1),e("div",le,[(i(!0),u(v,null,k(a(_),(o,C)=>(i(),u("div",ae,[d(W,{item:o},null,8,["item"])]))),256))]),d(c,{class:"mt-2 !text-black dark:!text-white",onClick:U},{default:m(()=>[p(" Сохранить ")]),_:1})])]),_:1})):E("",!0),a(h)?(i(),$(M,{key:1,type:"resize",onShowModal:l[7]||(l[7]=()=>{})},{default:m(()=>[e("button",{class:"absolute top-3 right-3",onClick:w}," x "),e("div",oe,[te,e("div",se,[d(f,{type:"default",modelValue:a(s).first_name,"onUpdate:modelValue":l[1]||(l[1]=o=>a(s).first_name=o),class:"bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none max-md:w-full",placeholder:"Имя"},null,8,["modelValue"]),d(f,{type:"default",modelValue:a(s).last_name,"onUpdate:modelValue":l[2]||(l[2]=o=>a(s).last_name=o),class:"bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none max-md:w-full",placeholder:"Фамилия"},null,8,["modelValue"]),d(f,{type:"default",modelValue:a(s).patronymic,"onUpdate:modelValue":l[3]||(l[3]=o=>a(s).patronymic=o),class:"bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none max-md:w-full",placeholder:"Отчество"},null,8,["modelValue"])]),e("div",de,[d(f,{type:"default",modelValue:a(s).email,"onUpdate:modelValue":l[4]||(l[4]=o=>a(s).email=o),class:"w-full bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none",placeholder:"Email"},null,8,["modelValue"]),d(f,{type:"default",modelValue:a(s).password,"onUpdate:modelValue":l[5]||(l[5]=o=>a(s).password=o),class:"w-full bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none",placeholder:"Пароль"},null,8,["modelValue"])]),d(f,{type:"default",modelValue:a(s).phone,"onUpdate:modelValue":l[6]||(l[6]=o=>a(s).phone=o),class:"w-[300px] max-md:w-full mx-auto bg-transparent bg-opacity-0 rounded-lg border-2 border-semiCyan outline-none",placeholder:"Номер телефона"},null,8,["modelValue"]),d(c,{class:"mt-2 !text-black dark:!text-white",onClick:B},{default:m(()=>[p(" Сохранить ")]),_:1})])]),_:1})):E("",!0)])}}});export{ve as default};
