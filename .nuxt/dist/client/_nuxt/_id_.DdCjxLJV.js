import{g as H,o as a,j as _,w as d,a as e,t,h as o,c as m,i as y,m as A,J as W,l as S,Y as N,z as R,A as E,d as c,b as u,H as G,F as I,r as U}from"./entry.Dos5mvIN.js";import{u as T}from"./index.da1fIcdO.js";import{_ as v}from"./TheBreadcrumbs.vue.BV7MhFPf.js";import{u as q}from"./companies.CkXOzTuB.js";import{_ as O}from"./TheSearch.vue.B19fxDWi.js";import{_ as Z}from"./nuxt-link.CfP_OKzb.js";import{u as F}from"./auth.aqacddpH.js";import{_ as V}from"./TheTextContent.vue.CevKCk7h.js";import{_ as b}from"./TheButton.vue.gJpUNod2.js";import{_ as z}from"./TheModal.vue.D3hlHb3t.js";import{T as J}from"./TheSceleton.fdqlrxRf.js";import{u as Y}from"./users.dTUL9f1E.js";import"./nuxt-storage.Df5leMsQ.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const K=""+globalThis.__publicAssetsURL("icons/delete.svg"),P={class:"flex items-center gap-x-4 border-r max-sm:border-none max-sm:justify-center"},Q=["src"],X={class:"font-bold max-xl:text-center"},ee={class:"flex flex-col items-center justify-center border-r max-[900px]:border-none"},te={key:0,class:"text-lg font-medium mb-2"},se={key:1,class:"text-lg font-medium mb-2"},oe={class:"text-center flex flex-col gap-y-2"},ne={key:0,class:"text-sm text-mediumGray"},re={class:"text-mediumGray text-sm"},ae={class:"flex items-center justify-between gap-5 max-[900px]:justify-start max-[900px]:border-r max-sm:border-none max-sm:justify-center"},ie={class:"text-center pr-6 pl-8 max-[900px]:pr-0"},le={class:"font-medium"},de={class:"text-mediumGray text-sm"},me=e("div",{class:"max-[900px]:hidden h-full border-l flex items-center justify-center pl-8"},[e("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M1.5 8.5L15.5 8.5M15.5 8.5L8.5 1.5M15.5 8.5L8.5 15.5",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),ce=e("div",{class:"hidden h-full max-[900px]:flex items-center justify-center"},[e("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M1.5 8.5L15.5 8.5M15.5 8.5L8.5 1.5M15.5 8.5L8.5 15.5",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),ue=H({__name:"DepartmentUserList",props:{userItem:{type:Object,required:!0}},setup(r){const n=F();function w(p){return new Date(p).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}return(p,f)=>{const x=Z;return a(),_(x,{to:`/base/users/${r.userItem.id}`,class:"department__item w-full transition-all grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 gap-4 hover:shadow-departmentCard border bg-whiteLilia hover:bg-white hover:border-golden dark:border-none dark:shadow-none dark:bg-gray-400 dark:hover:bg-gray-300 p-5 rounded-3xl cursor-pointer"},{default:d(()=>{var h,g;return[e("div",P,[e("img",{class:"w-14 h-14 rounded-full shadow",src:r.userItem.photo},null,8,Q),e("h2",X,t(r.userItem.first_name+" "+r.userItem.last_name),1)]),e("div",ee,[((h=o(n).user.role)==null?void 0:h.name_en)==="admin"?(a(),m("p",te,t(p.$t("Роль | Должность")),1)):(a(),m("p",se,t(p.$t("Должность")),1)),e("div",oe,[((g=o(n).user.role)==null?void 0:g.name_en)==="admin"?(a(),m("h2",ne,"("+t(r.userItem.role)+")",1)):y("",!0),e("h2",re,t(r.userItem.position),1)])]),e("div",ae,[e("div",ie,[e("h2",le,t(p.$t("Дата регистрации")),1),e("h2",de,t(w(r.userItem.created_at)),1)]),me]),ce]}),_:1},8,["to"])}}}),pe={class:"flex items-center gap-4 max-sm:flex-col max-sm:items-start"},fe=e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M15 8H1M1 8L8 15M1 8L8 1",stroke:"#7D7D7D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe={class:"flex items-center flex-wrap gap-x-3"},he=e("div",null,[e("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4.032 0.48H5.24L2.168 12H0.96L4.032 0.48Z",fill:"#1E1E1E"})])],-1),ge=e("div",null,[e("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4.032 0.48H5.24L2.168 12H0.96L4.032 0.48Z",fill:"#1E1E1E"})])],-1),_e={class:"mt-8 flex items-center gap-4 justify-between max-[680px]:flex-col max-[680px]:items-start max-[680px]:gap-5"},we={class:"dark:text-white text-3xl font-bold"},ve=e("img",{src:K,alt:"delete-button"},null,-1),be={class:"flex items-center gap-x-10 mt-8"},ye={class:"flex items-center w-11/12 max-sm:w-full gap-x-10"},ke={class:"text-center font-bold max-sm:w-9/12 max-sm:mx-auto"},$e={class:"text-center text-lg max-sm:text-sm w-7/12 mx-auto my-10 dark:text-white break-words max-sm:w-full"},je={class:"text-redOrange"},Le={class:"!text-base nt-2"},Me={class:"flex justify-center gap-3 max-sm:flex-col"},Ce={class:"flex gap-x-10 w-full mt-8 max-[1200px]:flex-col max-[1200px]:gap-3"},Be={key:0,class:"flex max-[1200px]:order-1 w-full gap-y-4 flex-col"},De={key:1,class:"w-full max-[1200px]:order-1 flex flex-col items-center justify-center gap-4 p-6 rounded-3xl shadow-departmentInfo bg-white"},Se={key:1,class:"text-gray-500 text-center py-4"},Ee={class:"w-3/12 max-[1200px]:w-full bg-white p-6 rounded-3xl h-fit shadow-departmentInfo"},Ie=e("svg",{width:"22",height:"23",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M11 15.5V11.5M11 7.5H11.01M21 11.5C21 17.0228 16.5228 21.5 11 21.5C5.47715 21.5 1 17.0228 1 11.5C1 5.97715 5.47715 1.5 11 1.5C16.5228 1.5 21 5.97715 21 11.5Z",stroke:"#2A2A2A","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ue={class:"flex items-center justify-between mt-8"},Ye=H({__name:"[id]",props:{showWarning:{type:Boolean,default:!1}},setup(r){const n=q(),w=A(),p=W(),f=S(""),x=S({}),h=Y();function g(){p.back()}return N(()=>{n.loadDepartment({id:w.params.id})}),R(()=>{T({title:`${n.current_department.name}`})}),E(()=>h.user,s=>{s&&(x.value.participants=[...s.results],console.log("User пришёл:",s))},{immediate:!1}),E(()=>n.current_department,s=>{s&&(x.value=s,console.log("department пришёл:",s))},{immediate:!1}),(s,i)=>{var k,$,j,L,M,C;return a(),m("div",null,[e("div",pe,[e("button",{onClick:g,class:"px-6 py-2 rounded-[30px] border-2 font-bold text-mediumGray bg-white flex items-center gap-2"},[fe,c(" "+t(s.$t("Назад")),1)]),e("div",xe,[u(v,{"breadcrumb-link":"/base/companies"},{default:d(()=>[c(t(s.$t("Компания")),1)]),_:1}),he,u(v,{"breadcrumb-link":"/base/companies/department"},{default:d(()=>[c(t(s.$t("Департаменты")),1)]),_:1}),ge,u(v,null,{default:d(()=>[c(t(o(n).get_department.name),1)]),_:1})])]),e("div",_e,[e("p",we,t(o(n).get_department.name),1),($=(k=o(n).get_department)==null?void 0:k.participants)!=null&&$.length?y("",!0):(a(),_(b,{key:0,type:"danger",class:"px-10 py-2 !bg-whiteSmoke !border !border-gainsboro rounded-full flex items-center gap-3 !text-sunset",onClick:i[0]||(i[0]=l=>r.showWarning=!0)},{default:d(()=>[ve,c(" "+t(s.$t("Удалить отдел")),1)]),_:1}))]),e("div",be,[e("div",ye,[u(O,{class:"w-3/12 max-[900px]:w-full","model-value":o(f),"onUpdate:modelValue":i[1]||(i[1]=l=>G(f)?f.value=l:null),onSearch:i[2]||(i[2]=l=>{var B,D;return o(h).loadUserList({query:o(f),page:1,limit:1e4,department_id:(D=(B=o(n))==null?void 0:B.get_department)==null?void 0:D.id})})},null,8,["model-value"])]),r.showWarning?(a(),_(z,{key:0,onShowModal:i[5]||(i[5]=l=>r.showWarning=!r.showWarning)},{default:d(()=>[e("div",null,[e("p",ke,t(s.$t("Вы действительно хотите удалить департамент?")),1),e("div",$e,[e("p",je,t(s.$t("Предупреждение!")),1),e("p",Le,t(s.$t("Удалённые департаменты восстановке не подлежат")),1)])]),e("div",Me,[u(b,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!bg-gray-200 gap-3 py-2 !bg-porcelain !border transition-all ease-in-out duration-300",t:"button",onClick:i[3]||(i[3]=l=>r.showWarning=!1)},{default:d(()=>[c(t(s.$t("Отменить")),1)]),_:1}),u(b,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-white gap-3 py-2 !bg-redOrange !border transition-all ease-in-out duration-300",t:"submit",onClick:i[4]||(i[4]=l=>o(n).deleteDepartment({id:o(n).get_department.id},s.$router))},{default:d(()=>[c(t(s.$t("Удалить")),1)]),_:1})])]),_:1})):y("",!0)]),e("div",Ce,[(j=o(n).get_department)!=null&&j.id?(a(),m("div",De,[(M=(L=o(x))==null?void 0:L.participants)!=null&&M.length?(a(!0),m(I,{key:0},U(o(x).participants,l=>(a(),_(ue,{key:l.id,"user-item":l},null,8,["user-item"]))),128)):(a(),m("p",Se,t(s.$t("Пользователей пока нет")),1))])):(a(),m("div",Be,[(a(),m(I,null,U(5,l=>u(J,{"border-radius":"10px",width:"90%",height:"80px"})),64))])),e("div",Ee,[u(V,null,{default:d(()=>[Ie,c(" "+t(s.$t("Информация")),1)]),_:1}),e("div",Ue,[e("p",null,t(s.$t("Сотрудников"))+": ",1),e("p",null,t((C=o(n).get_department.participants)==null?void 0:C.length),1)])])])])}}});export{Ye as default};
