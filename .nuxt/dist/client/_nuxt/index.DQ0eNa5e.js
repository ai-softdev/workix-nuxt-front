import{g as _,o as m,j as x,w as f,a as e,t as r,d as b,c as p,F as v,r as k,h as d,l as C,i as g,b as u,x as V,J as L,A as h}from"./entry.Dos5mvIN.js";import{u as O}from"./index.da1fIcdO.js";import{_ as U}from"./nuxt-link.CfP_OKzb.js";import{u as y}from"./objects.Z2qZu0SQ.js";import{_ as w}from"./TheButton.vue.gJpUNod2.js";import{_ as B}from"./TheModal.vue.D3hlHb3t.js";import{_ as $}from"./TheInput.vue.CR5iM2Pr.js";import{u as j}from"./auth.aqacddpH.js";import{u as N}from"./companies.CkXOzTuB.js";import"./nuxt-storage.Df5leMsQ.js";const A=""+globalThis.__publicAssetsURL("icons/address.svg"),R=""+globalThis.__publicAssetsURL("icons/workers-count.svg"),S=""+globalThis.__publicAssetsURL("icons/download.svg"),T={class:"font-bold mb-6 pb-6 border-b"},F={class:"flex items-center justify-between"},M={class:"flex items-center gap-2"},G=e("img",{src:A,alt:"address"},null,-1),D={class:"text-mediumGray"},E={class:"flex items-center justify-between mt-4"},J={class:"flex items-center gap-2"},q=e("img",{src:R,alt:"workers-count"},null,-1),z={class:"text-mediumGray"},H={class:"flex items-center gap-2.5 py-2.5 px-5 rounded-full border bg-porcelain hover:bg-golden mx-auto mt-6 font-bold transition-all ease-in-out duration-300"},I=e("img",{src:S,alt:"download"},null,-1),K=_({__name:"ObjectList",props:{object:{type:Object,default:()=>{}}},setup(o){return(s,i)=>{const a=U;return m(),x(a,{to:`/base/objects/${o.object.id}`,class:"block rounded-3xl shadow-cards bg-white p-6"},{default:f(()=>[e("h1",T,r(o.object.name),1),e("div",F,[e("div",M,[G,e("p",null,r(s.$t("Адрес"))+": ",1)]),e("p",D,r(o.object.address),1)]),e("div",E,[e("div",J,[q,e("p",null,r(s.$t("Кол-во участников"))+": ",1)]),e("p",z,r(o.object.participants_count||0),1)]),e("button",H,[I,b(" "+r(s.$t("Скачать документ")),1)])]),_:1},8,["to"])}}}),P={class:"mt-8"},Q={class:"grid grid-cols-4 max-[1050px]:grid-cols-3 max-[786px]:grid-cols-2 max-[678px]:grid-cols-1 gap-5"},W=_({__name:"ObjectContent",setup(o){const s=y();return s.loadObjectList(),(i,a)=>(m(),p("div",P,[e("div",Q,[(m(!0),p(v,null,k(d(s).get_objects.results,n=>(m(),x(K,{object:n},null,8,["object"]))),256))])]))}}),X={class:"font-bold text-center text-xl max-sm:text-sm"},Y={class:"flex flex-col gap-6"},Z={class:"flex flex-wrap gap-y-3 items-center mt-14 justify-center gap-x-10 max-sm:flex-col"},ee=_({__name:"ObjectCreate",props:{showCreate:{type:Boolean,default:!1}},setup(o){const s=y(),i=j(),a=C({name:"",files:"",address:""});return(n,t)=>{var c;return m(),p("div",null,[(c=d(i).user.permissions)!=null&&c.find(l=>l.name_en==="object.create")?(m(),p("button",{key:0,class:"font-bold bg-golden rounded-full py-2.5 px-10",onClick:t[0]||(t[0]=l=>o.showCreate=!0)}," + "+r(n.$t("Создать объект")),1)):g("",!0),o.showCreate?(m(),x(B,{key:1,onShowModal:t[5]||(t[5]=l=>o.showCreate=!o.showCreate)},{default:f(()=>[e("p",X,r(n.$t("Создание объекта")),1),e("form",{onSubmit:t[4]||(t[4]=V(l=>d(s).createObject(d(a)),["prevent"])),class:"mt-10"},[e("div",Y,[u($,{type:"text",label:n.$t("Наименование"),modelValue:d(a).name,"onUpdate:modelValue":t[1]||(t[1]=l=>d(a).name=l)},null,8,["label","modelValue"]),u($,{type:"text",label:n.$t("Адрес"),modelValue:d(a).address,"onUpdate:modelValue":t[2]||(t[2]=l=>d(a).address=l)},null,8,["label","modelValue"])]),e("div",Z,[u(w,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!bg-gray-200 gap-3 py-2 !bg-porcelain !border transition-all ease-in-out duration-300",t:"button",onClick:t[3]||(t[3]=l=>o.showCreate=!1)},{default:f(()=>[b(r(n.$t("Отменить")),1)]),_:1}),u(w,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!shadow-golden gap-3 py-2 !bg-golden !border transition-all ease-in-out duration-300",t:"submit",type:"success"},{default:f(()=>[b(r(n.$t("Создать")),1)]),_:1})])],32)]),_:1})):g("",!0)])}}}),te={class:"flex items-center justify-between mb-6 max-[678px]:flex-col max-[678px]:gap-3 max-[678px]:items-start"},se={class:"dark:text-white text-3xl font-bold"},pe=_({__name:"index",setup(o){const s=L(),i=j(),a=N();return h(()=>i.user,n=>{var t,c;((c=(t=i==null?void 0:i.user)==null?void 0:t.role)==null?void 0:c.name_en)==="admin"&&(window.history.length>1?s.push("/base/profile"):s.push("/"))}),h(()=>a.company,n=>{var c;((c=a.company.modules)==null?void 0:c.find(l=>l.name_en==="objects"))||(window.history.length>1?s.push("/base/profile"):s.push("/"))}),O({title:"Объекты",description:"Объекты компании"}),(n,t)=>(m(),p("div",null,[e("div",te,[e("p",se,r(n.$t("Страница с объектами")),1),u(ee)]),u(W)]))}});export{pe as default};
