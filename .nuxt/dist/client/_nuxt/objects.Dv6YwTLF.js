import{d as c}from"./entry.BaLrOuEZ.js";import{a,n as s,l as i}from"./nuxt-storage.gLjAmBiV.js";const d=c("object",{state:()=>({objects:{id:"",name:"",address:"",email:"",description:"",files:"",participants:{id:""}}}),getters:{get_objects(e){return this.objects}},actions:{async loadObjectList(){a.get("object/object-list",{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(e=>{this.objects=e.data})},async loadObject(e){a.get(`object/${e.id}`,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(t=>{this.objects=t.data})},async createObject(e){let t=new FormData;t.set("name",e.name),t.set("address",e.address),t.set("email",e.email),t.set("description",e.description),typeof e.files!="string"&&t.set("files",e.files),a.post("object/create",t,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(o=>{this.objects=o.data,i.success("Компания успешно создана",{autoClose:1500,theme:"auto"}),this.loadObjectList()}).catch(o=>{i.error(o,{autoClose:1500,theme:"auto"})})}}});export{d as u};
