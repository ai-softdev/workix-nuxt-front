import{e as C}from"./entry.Dp7d5lJq.js";import{u as V}from"./index.CN4qvGUF.js";import{_ as k}from"./nuxt-link.UBS0YUK3.js";import{j as b,N as c,P as $,V as m,Z as e,_ as r,$ as p,O as f,J as O,a3 as L,u as _,a5 as N,a as U,a2 as w,L as i,a6 as B,b as g}from"./swiper-vue.D8OdYOtj.js";import{u as j}from"./objects.DUcA4Dz0.js";import{_ as x}from"./TheButton.vue.BysbZV1X.js";import{_ as S}from"./TheModal.vue.B87978z5.js";import{_ as R}from"./TheTextContent.vue.m2iseIPA.js";import{_ as T}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{_ as y}from"./TheInput.vue.B9n9qFKm.js";import{u as v}from"./auth.DEWEs6f7.js";import{u as A}from"./companies.Dnb_h2gg.js";import"./nuxt-storage.jjXK-e5k.js";const M=""+globalThis.__publicAssetsURL("icons/address.svg"),E=""+globalThis.__publicAssetsURL("icons/workers-count.svg"),F=""+globalThis.__publicAssetsURL("icons/download.svg"),G={class:"font-bold mb-6 pb-6 border-b"},D={class:"flex items-center justify-between"},J={class:"flex items-center gap-2"},P=e("img",{src:M,alt:"address"},null,-1),Z={class:"text-mediumGray"},q={class:"flex items-center justify-between mt-4"},z={class:"flex items-center gap-2"},H=e("img",{src:E,alt:"workers-count"},null,-1),I={class:"text-mediumGray"},K={class:"flex items-center gap-2.5 py-2.5 px-5 rounded-full border bg-porcelain hover:bg-golden mx-auto mt-6 font-bold transition-all ease-in-out duration-300"},Q=e("img",{src:F,alt:"download"},null,-1),W=b({__name:"ObjectList",props:{object:{type:Object,default:()=>{}}},setup(s){return(o,d)=>{const a=k;return c(),$(a,{to:`/base/objects/${s.object.id}`,class:"block rounded-3xl shadow-cards bg-white p-6"},{default:m(()=>[e("h1",G,r(s.object.name),1),e("div",D,[e("div",J,[P,e("p",null,r(o.$t("Адрес"))+": ",1)]),e("p",Z,r(s.object.address),1)]),e("div",q,[e("div",z,[H,e("p",null,r(o.$t("Кол-во участников"))+": ",1)]),e("p",I,r(s.object.participants_count||0),1)]),e("button",K,[Q,p(" "+r(o.$t("Скачать документ")),1)])]),_:1},8,["to"])}}}),X={class:"mt-8"},Y={class:"grid grid-cols-4 gap-5"},ee=b({__name:"ObjectContent",setup(s){const o=j();return o.loadObjectList(),(d,a)=>(c(),f("div",X,[e("div",Y,[(c(!0),f(O,null,L(_(o).get_objects.results,n=>(c(),$(W,{object:n},null,8,["object"]))),256))])]))}}),te={},se={class:"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full"};function oe(s,o){return c(),f("div",se,[N(s.$slots,"default")])}const h=T(te,[["render",oe]]),ne={class:"w-6/12"},ae={class:"w-6/12"},le=b({__name:"ObjectCreate",props:{showCreate:{type:Boolean,default:!1}},setup(s){const o=j(),d=v(),a=U({name:"",files:"",address:""});return(n,t)=>{var u;return c(),f("div",null,[(u=_(d).user.permissions)!=null&&u.find(l=>l.name_en==="object.create")?(c(),f("button",{key:0,class:"font-bold bg-golden rounded-full py-2.5 px-10",onClick:t[0]||(t[0]=l=>s.showCreate=!0)}," + "+r(n.$t("Создать объект")),1)):w("",!0),s.showCreate?(c(),$(S,{key:1,onShowModal:t[5]||(t[5]=l=>s.showCreate=!s.showCreate)},{default:m(()=>[i(R,null,{default:m(()=>[p(r(n.$t("Создание объекта")),1)]),_:1}),e("form",{onSubmit:t[4]||(t[4]=B(l=>_(o).createObject(_(a)),["prevent"]))},[i(h,null,{default:m(()=>[e("div",ne,[i(y,{type:"text",label:n.$t("Наименование"),modelValue:_(a).name,"onUpdate:modelValue":t[1]||(t[1]=l=>_(a).name=l)},null,8,["label","modelValue"])])]),_:1}),i(h,{class:"flex-wrap"},{default:m(()=>[e("div",ae,[i(y,{type:"text",label:n.$t("Адрес"),modelValue:_(a).address,"onUpdate:modelValue":t[2]||(t[2]=l=>_(a).address=l)},null,8,["label","modelValue"])])]),_:1}),i(h,null,{default:m(()=>[i(x,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:t[3]||(t[3]=l=>s.showCreate=!1)},{default:m(()=>[p(r(n.$t("Отменить")),1)]),_:1}),i(x,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:m(()=>[p(r(n.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1})):w("",!0)])}}}),re={class:"flex items-center justify-between mb-6"},ie={class:"dark:text-white text-3xl font-bold"},ye=b({__name:"index",setup(s){const o=C(),d=v(),a=A();return g(()=>d.user,n=>{var t,u;((u=(t=d==null?void 0:d.user)==null?void 0:t.role)==null?void 0:u.name_en)==="admin"&&(window.history.length>1?o.push("/base/profile"):o.push("/"))}),g(()=>a.company,n=>{var u;((u=a.company.modules)==null?void 0:u.find(l=>l.name_en==="objects"))||(window.history.length>1?o.push("/base/profile"):o.push("/"))}),V({title:"Объекты",description:"Объекты компании"}),(n,t)=>(c(),f("div",null,[e("div",re,[e("p",ie,r(n.$t("Страница с объектами")),1),i(le)]),i(ee)]))}});export{ye as default};
