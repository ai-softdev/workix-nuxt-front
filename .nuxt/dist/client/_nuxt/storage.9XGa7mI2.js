import{b as rr,c as Ia,f as Yr,_ as Wa}from"./entry.Djm-dA_A.js";import{j as $e,a as ne,N as V,O as J,L as j,V as D,Z as b,_ as H,a3 as Te,u as y,a6 as Ce,a4 as se,M as De,P as he,$ as oe,ac as Ua,J as nr,a2 as or,x as _t,a7 as Na,a5 as Zr,a0 as Ba,a1 as Ga,b as je,H as Qr,I as za,k as Xt,ak as Ja,aa as qa,ad as Ya,a9 as Za}from"./swiper-vue.yO-n0JsZ.js";import{T as er}from"./TheContentBlock.C0O3sXrE.js";import{_ as Qa}from"./ContextMenu.DdHb3tYU.js";import{_ as Xa}from"./nuxt-link.Ci-n4VJ1.js";import{u as Re}from"./storage.DPvVHYKf.js";import{_ as St}from"./TheModal.vue.CfyleZWN.js";import{_ as Ne}from"./TheButton.vue.Db2UgGaT.js";import{_ as ar}from"./TheTextContent.vue.BjqIVlXe.js";import{_ as Xr}from"./TheSearch.vue.CMnXhBnJ.js";import{_ as Kr}from"./SelectMenu.DAvQiBJj.js";import{_ as Ka}from"./TheInput.vue.7qlRdbvh.js";import{_ as en}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{h as ei,v as Fr}from"./ElemUI.CPfiFPU3.js";import{_ as ti}from"./Tooltip.3AvJoGhZ.js";import{_ as ri}from"./Icon.0gUi8oZA.js";import{_ as ni}from"./StorageCard.vue.PH3R76DA.js";import{_ as Kt}from"./TheBreadcrumbs.vue.ChTZiOp5.js";import{u as oi}from"./auth.CTSoC32Q.js";import{u as ai}from"./companies.Bkd0NWkB.js";import"./selectMenu.DfSW3bZ8.js";import"./nuxt-storage.CgJyI38a.js";import"./client-only.B-Ihgf5O.js";import"./Icon.C51UkLVG.js";import"./index.DKzsDYrr.js";const ii={class:"flex items-center gap-x-3"},si=b("div",{class:"text-semiCyan"}," • ",-1),li={class:"tracking-wider"},ui=b("div",null,null,-1),ci=b("svg",{width:"25px",height:"25px",viewBox:"0 -5 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},[b("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"},[b("g",{id:"Icon-Set","sketch:type":"MSLayerGroup",transform:"translate(-516.000000, -1144.000000)",class:"dark:fill-white fill-black"},[b("path",{d:"M538.708,1151.28 C538.314,1150.89 537.676,1150.89 537.281,1151.28 L534.981,1153.58 L532.742,1151.34 C532.352,1150.95 531.718,1150.95 531.327,1151.34 C530.936,1151.73 530.936,1152.37 531.327,1152.76 L533.566,1154.99 L531.298,1157.26 C530.904,1157.65 530.904,1158.29 531.298,1158.69 C531.692,1159.08 532.331,1159.08 532.725,1158.69 L534.993,1156.42 L537.232,1158.66 C537.623,1159.05 538.257,1159.05 538.647,1158.66 C539.039,1158.27 539.039,1157.63 538.647,1157.24 L536.408,1155.01 L538.708,1152.71 C539.103,1152.31 539.103,1151.68 538.708,1151.28 L538.708,1151.28 Z M545.998,1162 C545.998,1163.1 545.102,1164 543.996,1164 L526.467,1164 L518.316,1154.98 L526.438,1146 L543.996,1146 C545.102,1146 545.998,1146.9 545.998,1148 L545.998,1162 L545.998,1162 Z M543.996,1144 L526.051,1144 C525.771,1143.98 525.485,1144.07 525.271,1144.28 L516.285,1154.22 C516.074,1154.43 515.983,1154.71 515.998,1154.98 C515.983,1155.26 516.074,1155.54 516.285,1155.75 L525.271,1165.69 C525.467,1165.88 525.723,1165.98 525.979,1165.98 L525.979,1166 L543.996,1166 C546.207,1166 548,1164.21 548,1162 L548,1148 C548,1145.79 546.207,1144 543.996,1144 L543.996,1144 Z",id:"delete","sketch:type":"MSShapeGroup"})])])],-1),di=[ci],fi={class:"break-words tracking-wider my-4 text-sm"},pi={class:"mt-4"},hi={class:"flex flex-wrap gap-x-10 justify-center"},mi=$e({__name:"StorageNavElemGoods",props:{item:{type:Object,default:{}},moveEffectSubCategory:{type:Boolean},moveEffectSubCategoryWarn:{type:Boolean}},setup(r){ne(!1);const o=rr(),a=Ia(),s=Re();return(d,u)=>{const m=Xa;return V(),J("div",{onMouseenter:u[5]||(u[5]=k=>r.moveEffectSubCategory=!0),onMouseleave:u[6]||(u[6]=k=>r.moveEffectSubCategory=!1),class:"relative rounded-l-md dark:hover:bg-semiCyan hover:!bg-opacity-30 hover:bg-cyan transition-all"},[j(m,{to:`/base/storage/${r.item.slug}`,class:Te([{"dark:bg-semiCyan":y(o).path===`/base/storage/${r.item.slug}/${y(o).params.id}`},"flex items-center w-full rounded-l-md p-1"]),onClick:u[0]||(u[0]=k=>y(s).currentCategory={...r.item})},{default:D(()=>[b("div",ii,[si,b("span",li,H(r.item.name),1)]),ui]),_:1},8,["to","class"]),j(De,{name:"slide-right"},{default:D(()=>[r.moveEffectSubCategory?(V(),J("button",{key:0,class:"absolute right-2 rounded-lg top-1",onClick:u[1]||(u[1]=Ce(k=>{r.moveEffectSubCategoryWarn=!0,r.moveEffectSubCategory=!1},["stop"]))},di)):se("",!0)]),_:1}),j(De,{name:"slide-down",class:"text-center"},{default:D(()=>[r.moveEffectSubCategoryWarn?(V(),he(St,{key:0,type:"resize",onShowModal:u[4]||(u[4]=k=>r.moveEffectSubCategoryWarn=!1)},{default:D(()=>[j(ar,null,{default:D(()=>[oe(H(d.$t("Удалить категорию?")),1)]),_:1}),b("div",fi,[b("p",null,H(d.$t("Если вы удалите категорию то всё содержимое данной категории удалиться без возврата")),1),b("p",pi,H(d.$t("Убедитесь что категория пустая, переместите нужные товары в другие категории")),1)]),b("div",hi,[j(Ne,{type:"chat",onClick:u[2]||(u[2]=k=>r.moveEffectSubCategoryWarn=!1)},{default:D(()=>[oe(H(d.$t("Отмена")),1)]),_:1}),j(Ne,{type:"chat",onClick:u[3]||(u[3]=k=>y(s).deleteStorageElem({deleteType:"subcategory",id:r.item.id}).then(f=>{y(s).currentCategory.slug===r.item.slug?(y(a).push("/base/storage"),y(s).currentCategory={}):y(s).currentCategory}))},{default:D(()=>[oe(H(d.$t("Удалить")),1)]),_:1})])]),_:1})):se("",!0)]),_:1})],32)}}}),vi={class:"flex items-center gap-x-3"},gi=Na('<div><svg class="dark:stroke-white stroke-black" width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.17004 7.43994L12 12.5499L20.77 7.46991" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 21.6099V12.5399" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.92999 2.48L4.59 5.45003C3.38 6.12003 2.39001 7.80001 2.39001 9.18001V14.83C2.39001 16.21 3.38 17.89 4.59 18.56L9.92999 21.53C11.07 22.16 12.94 22.16 14.08 21.53L19.42 18.56C20.63 17.89 21.62 16.21 21.62 14.83V9.18001C21.62 7.80001 20.63 6.12003 19.42 5.45003L14.08 2.48C12.93 1.84 11.07 1.84 9.92999 2.48Z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17 13.24V9.58002L7.51001 4.09998" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1),yi={class:"tracking-wider text-sm break-words"},wi=b("svg",{class:"dark:stroke-white stroke-black",width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M10 12V17","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M14 12V17","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M4 7H20","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),bi=[wi],Ci=b("path",{d:"M5.70711 9.71069C5.31658 10.1012 5.31658 10.7344 5.70711 11.1249L10.5993 16.0123C11.3805 16.7927 12.6463 16.7924 13.4271 16.0117L18.3174 11.1213C18.708 10.7308 18.708 10.0976 18.3174 9.70708C17.9269 9.31655 17.2937 9.31655 16.9032 9.70708L12.7176 13.8927C12.3271 14.2833 11.6939 14.2832 11.3034 13.8927L7.12132 9.71069C6.7308 9.32016 6.09763 9.32016 5.70711 9.71069Z"},null,-1),$i=[Ci],_i={class:"break-words tracking-wider my-4 text-sm"},ki={class:"mt-4"},Si={class:"flex flex-wrap gap-x-10 justify-center"},xi={key:0},Ti=b("svg",{class:"dark:stroke-white stroke-black",width:"23px",height:"23px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{"data-v-a06cf116":"",d:"M10 12V17","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{"data-v-a06cf116":"",d:"M14 12V17","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{"data-v-a06cf116":"",d:"M4 7H20","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{"data-v-a06cf116":"",d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{"data-v-a06cf116":"",d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Pi=$e({__name:"StorageNavElem",props:{item:{type:Object,default:()=>{}},isActiveCategory:{type:Boolean},moveEffectCategory:{type:Boolean},moveEffectCategoryWarn:{type:Boolean}},setup(r){const o=Re(),a=ne({getBoundingClientRect:()=>({})}),s=ne(!1);return(d,u)=>{const m=Ua("StorageNavContextMenu"),k=Qa;return V(),J("div",null,[b("button",{onContextmenu:u[1]||(u[1]=Ce(()=>{},["prevent"])),onMouseenter:u[2]||(u[2]=f=>r.moveEffectCategory=!0),onMouseleave:u[3]||(u[3]=f=>r.moveEffectCategory=!1),class:"flex items-center justify-between w-full relative",onClick:u[4]||(u[4]=f=>r.isActiveCategory=!r.isActiveCategory)},[b("div",vi,[gi,b("span",yi,H(r.item.name),1)]),j(De,{name:"fade"},{default:D(()=>[r.moveEffectCategory?(V(),J("button",{key:0,class:"absolute right-5 rounded-lg",onClick:u[0]||(u[0]=Ce(f=>r.moveEffectCategoryWarn=!0,["stop"]))},bi)):se("",!0)]),_:1}),b("div",{class:Te([{"rotate-180":r.isActiveCategory},"transition-all"])},[(V(),J("svg",{class:Te(["dark:fill-white fill-black",{"!fill-semiCyan":r.isActiveCategory}]),width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$i,2))],2)],32),j(De,{name:"slide-down",class:"text-center"},{default:D(()=>[r.moveEffectCategoryWarn?(V(),he(St,{key:0,type:"resize",onShowModal:u[7]||(u[7]=f=>r.moveEffectCategoryWarn=!1)},{default:D(()=>[j(ar,null,{default:D(()=>[oe(H(d.$t("Удалить коробку?")),1)]),_:1}),b("div",_i,[b("p",null,H(d.$t("Если вы удалите коробку то всё содержимое данной коробки удалиться без возврата")),1),b("p",ki,H(d.$t("Убедитесь что коробка пустая, переместите нужные товары в другие категории")),1)]),b("div",Si,[j(Ne,{type:"chat",onClick:u[5]||(u[5]=f=>r.moveEffectCategoryWarn=!1)},{default:D(()=>[oe(H(d.$t("Отмена")),1)]),_:1}),j(Ne,{type:"chat",onClick:u[6]||(u[6]=f=>y(o).deleteStorageElem({deleteType:"category",id:r.item.id}))},{default:D(()=>[oe(H(d.$t("Удалить")),1)]),_:1})])]),_:1})):se("",!0)]),_:1}),j(De,{name:"slide-down"},{default:D(()=>[r.item.sub_categories&&r.isActiveCategory?(V(),J("div",xi,[(V(!0),J(nr,null,or(r.item.sub_categories,f=>(V(),he(mi,{class:"mt-2",item:f,key:f.id},null,8,["item"]))),128))])):se("",!0)]),_:1}),j(k,{onContextmenu:u[8]||(u[8]=Ce(()=>{},["prevent"])),modelValue:y(s),"onUpdate:modelValue":u[9]||(u[9]=f=>_t(s)?s.value=f:null),"virtual-element":y(a)},{default:D(()=>[j(m,null,{ContextMenuSvg:D(()=>[Ti]),ContextMenuText:D(()=>[oe(H(d.$t("Удалить")),1)]),_:1})]),_:1},8,["modelValue","virtual-element"])])}}}),Ei={},Mi={class:"py-2 px-4 dark:bg-gray-600 bg-gray-200 rounded-lg tracking-wider transition-all"};function Oi(r,o){return V(),J("button",Mi,[Zr(r.$slots,"default")])}const Hr=en(Ei,[["render",Oi]]),Ai={class:"flex"},ji={class:"w-full"},Di=b("svg",{class:"dark:stroke-white stroke-black",width:"20px",height:"20px",viewBox:"-0.5 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M3 21.32L21 3.32001","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M3 3.32001L21 21.32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ri=[Di],Li={class:"my-2 text-sm tracking-wider text-center"},Vi={class:"flex gap-x-10 justify-center mt-4"},Fi={key:0,class:"mt-4"},Hi={class:"dark:text-black"},Ii={class:"flex justify-center gap-x-10 mt-6"},Wi=$e({__name:"StorageCreateCategory",setup(r){const o=Re(),a=ne(""),s=ne(o.storageCategoryList),d=ne("");return(u,m)=>{const k=Kr;return V(),J("div",null,[b("div",Ai,[b("div",ji,[j(ar,null,{default:D(()=>[oe(H(u.$t("Создание")),1)]),_:1})]),b("button",{onClick:m[0]||(m[0]=f=>y(o).createCategory=!1)},Ri)]),b("div",null,[b("p",Li,H(u.$t("Выберите тип который хотите создать")),1),b("div",Vi,[j(Hr,{class:Te({"!bg-blueSemiLight text-white":y(a)==="category"}),onClick:m[1]||(m[1]=f=>a.value="category")},{default:D(()=>[oe(H(u.$t("Коробка")),1)]),_:1},8,["class"]),j(Hr,{class:Te({"!bg-blueSemiLight text-white":y(a)==="subcategory"}),onClick:m[2]||(m[2]=f=>a.value="subcategory")},{default:D(()=>[oe(H(u.$t("Категория")),1)]),_:1},8,["class"])])]),b("form",{class:"mt-10",onSubmit:m[7]||(m[7]=Ce(()=>{},["prevent"]))},[j(Ka,{label:"Наименование",required:"",modelValue:y(d),"onUpdate:modelValue":m[3]||(m[3]=f=>_t(d)?d.value=f:null),type:"text"},null,8,["modelValue"]),j(De,{name:"slide-up"},{default:D(()=>[y(a)==="subcategory"?(V(),J("div",Fi,[b("p",null,H(u.$t("Выберите коробку")),1),b("div",null,[j(k,{searchable:"",required:"","searchable-placeholder":u.$t("Поиск..."),class:"w-full","select-class":"dark:bg-gray-300 h-10 bg-white border dark:border-none",placeholder:"Выберите",variant:"none",modelValue:y(s),"onUpdate:modelValue":m[4]||(m[4]=f=>_t(s)?s.value=f:null),options:y(o).storageCategoryList,"option-attribute":"name"},{label:D(()=>[b("span",Hi,H(y(s).name),1)]),"option-empty":D(({query:f})=>[b("q",null,H(f),1),oe(" "+H(u.$t("Не найдено")),1)]),empty:D(()=>[oe(H(u.$t("Ничего нет")),1)]),_:1},8,["searchable-placeholder","modelValue","options"])])])):se("",!0)]),_:1}),b("div",Ii,[j(Ne,{t:"button",type:"chat",onClick:m[5]||(m[5]=f=>y(o).createCategory=!1)},{default:D(()=>[oe(H(u.$t("Отмена")),1)]),_:1}),j(Ne,{t:"button",type:"chat",onClick:m[6]||(m[6]=f=>y(o).createStorageCategoryOrSubcategory({createType:y(a)==="category"?"category":"subcategory",category_id:y(a)==="subcategory"?y(s).id:null,name:y(d)}))},{default:D(()=>[oe(H(u.$t("Создать")),1)]),_:1})])],32)])}}}),Ui={class:"flex px-10 py-4 gap-x-4 items-center justify-between"},Ni=b("svg",{class:"dark:stroke-white stroke-black dark:hover:stroke-green-300 hover:stroke-green-500 transition-all",width:"40px",height:"40px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M23 18C23 18.75 22.79 19.46 22.42 20.06C22.21 20.42 21.94 20.74 21.63 21C20.93 21.63 20.01 22 19 22C17.78 22 16.69 21.45 15.97 20.59C15.95 20.56 15.92 20.54 15.9 20.51C15.78 20.37 15.67 20.22 15.58 20.06C15.21 19.46 15 18.75 15 18C15 16.74 15.58 15.61 16.5 14.88C17.19 14.33 18.06 14 19 14C20 14 20.9 14.36 21.6 14.97C21.72 15.06 21.83 15.17 21.93 15.28C22.59 16 23 16.95 23 18Z","stroke-width":"1","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M20.49 17.98H17.51","stroke-width":"1","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M19 16.52V19.51","stroke-width":"1","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M3.17004 7.43994L12 12.5499L20.7701 7.46991","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M12 21.6099V12.5399","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),b("path",{d:"M21.61 9.17V14.83C21.61 14.88 21.61 14.92 21.6 14.97C20.9 14.36 20 14 19 14C18.06 14 17.19 14.33 16.5 14.88C15.58 15.61 15 16.74 15 18C15 18.75 15.21 19.46 15.58 20.06C15.67 20.22 15.78 20.37 15.9 20.51L14.07 21.52C12.93 22.16 11.07 22.16 9.93001 21.52L4.59001 18.56C3.38001 17.89 2.39001 16.21 2.39001 14.83V9.17C2.39001 7.79 3.38001 6.11002 4.59001 5.44002L9.93001 2.48C11.07 1.84 12.93 1.84 14.07 2.48L19.41 5.44002C20.62 6.11002 21.61 7.79 21.61 9.17Z","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Bi=[Ni],Gi={class:"max-[800px]:max-h-[400px] overflow-auto"},zi=$e({__name:"StorageNav",setup(r){Yr();const o=Re();return(a,s)=>(V(),J("div",null,[j(er,{class:"!p-0 h-screen max-[800px]:h-full"},{default:D(()=>[b("div",Ui,[j(Xr,{modelValue:y(o).searchCategory,"onUpdate:modelValue":s[0]||(s[0]=d=>y(o).searchCategory=d),class:"w-11/12",onSearch:s[1]||(s[1]=d=>y(ei)(y(o).searchCategory,y(o).searchCategory.trim()!==""?y(o).loadStorageCategorySearch({query:y(o).searchCategory}):y(o).loadStorageCategoryList()))},null,8,["modelValue"]),b("button",{onClick:s[2]||(s[2]=d=>y(o).createCategory=!0)},Bi)]),b("div",Gi,[(V(!0),J(nr,null,or(y(o).storageCategoryList,d=>(V(),he(Pi,{class:"mt-2 border-b pb-4 mx-4 dark:border-[#666D76] max-[800px]:last:border-none",isActive:y(o).isActive,item:d},null,8,["isActive","item"]))),256))])]),_:1}),j(De,{name:"slide-down"},{default:D(()=>[y(o).createCategory?(V(),he(St,{key:0,type:"resize",onShowModal:s[3]||(s[3]=d=>y(o).createCategory=!1)},{default:D(()=>[j(Wi)]),_:1})):se("",!0)]),_:1})]))}}),Ge=r=>(Ba("data-v-0adcc7be"),r=r(),Ga(),r),Ji={class:"",width:"30px",height:"30px",viewBox:"0 -0.5 17 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},qi={stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Yi=Ge(()=>b("rect",{x:"13",y:"0",width:"1.953",height:"10.914",class:"si-glyph-fill"},null,-1)),Zi=Ge(()=>b("rect",{x:"10",y:"0",width:"1.967",height:"10.914",class:"si-glyph-fill"},null,-1)),Qi=Ge(()=>b("rect",{x:"8",y:"0",width:"0.95",height:"10.914",class:"si-glyph-fill"},null,-1)),Xi=Ge(()=>b("rect",{x:"4",y:"0",width:"1.972",height:"10.914",class:"si-glyph-fill"},null,-1)),Ki=Ge(()=>b("rect",{x:"2",y:"0",width:"0.973",height:"10.914",class:"si-glyph-fill"},null,-1)),es=Ge(()=>b("rect",{x:"0",y:"0",width:"0.973",height:"10.914",class:"si-glyph-fill"},null,-1)),ts=[Yi,Zi,Qi,Xi,Ki,es],rs=$e({__name:"ScanAnimation",props:{mode:String},setup(r){return(o,a)=>{const s=ti;return V(),he(s,{class:"text-lg tracking-wider",text:o.$t("Отсканируйте код"),popper:{arrow:!0}},{default:D(()=>[b("button",{type:"button",class:Te(["relative border dark:border-gray-400 rounded-lg p-1 transition-all",{"dark:border-gray-200 border-gray-400":r.mode==="scan"}]),onClick:a[0]||(a[0]=d=>o.$emit("onScan"))},[(V(),J("svg",Ji,[b("g",qi,[b("g",{transform:"translate(1.000000, 2.000000)",class:Te(["dark:fill-gray-400 fill-gray-400",{"dark:!fill-gray-200 fill-gray-500":r.mode==="scan"}])},ts,2)])])),b("div",{class:Te(["w-[39px] h-[1.2px] rounded-full shadow shadow-cyan dark:shadow-semiCyan dark:bg-semiCyan bg-blueSemiLight absolute top-4 left-0",{laser:r.mode==="scan"}])},null,2)],2)]),_:1},8,["text"])}}}),ns=en(rs,[["__scopeId","data-v-0adcc7be"]]),os={class:"flex justify-center gap-x-4 w-full mx-auto items-center"},as={class:"max-[800px]:hidden"},is=b("svg",{class:"dark:fill-white fill-black",width:"40px",height:"40px",viewBox:"0 0 24 24",id:"qr-code-scan-2","data-name":"Flat Color",xmlns:"http://www.w3.org/2000/svg"},[b("path",{d:"M10,15v2a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V15a1,1,0,0,1,1-1H9A1,1,0,0,1,10,15Zm7-9H15a1,1,0,0,0-1,1V9a1,1,0,0,0,1,1h2a1,1,0,0,0,1-1V7A1,1,0,0,0,17,6Zm0,6H13a1,1,0,0,0-1,1v4a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V13A1,1,0,0,0,17,12ZM12,7a1,1,0,0,0-1-1H7A1,1,0,0,0,6,7v4a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1Z",style:{fill:"rgb(44, 169, 188)","stroke-width":"1.2"}}),b("path",{d:"M3,9A1,1,0,0,1,2,8V4A2,2,0,0,1,4,2H8A1,1,0,0,1,8,4H4V8A1,1,0,0,1,3,9ZM22,8V4a2,2,0,0,0-2-2H16a1,1,0,0,0,0,2h4V8a1,1,0,0,0,2,0ZM9,21a1,1,0,0,0-1-1H4V16a1,1,0,0,0-2,0v4a2,2,0,0,0,2,2H8A1,1,0,0,0,9,21Zm13-1V16a1,1,0,0,0-2,0v4H16a1,1,0,0,0,0,2h4A2,2,0,0,0,22,20Z"})],-1),ss=[is],ls=$e({__name:"StorageHeader",setup(r){const o=Re(),a=ne(""),s=rr();return(d,u)=>(V(),J("div",os,[b("form",{onSubmit:u[4]||(u[4]=Ce(()=>{},["prevent"])),class:"w-full flex items-center justify-center gap-x-4"},[j(Xr,{mode:y(a),onFocusout:u[0]||(u[0]=m=>a.value=""),onSearch:u[1]||(u[1]=m=>y(o).searchGoods.trim()!==""&&y(s).path==="/base/storage"?y(o).loadAllListSearch({search:y(o).searchGoods}):y(o).loadStorageSubCategory({slug:y(s).params.slug,search:y(o).searchGoods})),modelValue:y(o).searchGoods,"onUpdate:modelValue":u[2]||(u[2]=m=>y(o).searchGoods=m),class:"!w-6/12",type:"text",ref:"scan"},null,8,["mode","modelValue"]),b("div",as,[j(ns,{onOnScan:u[3]||(u[3]=m=>a.value="scan"),mode:y(a)},null,8,["mode"])])],32),b("button",{class:"max-[800px]:block hidden",onClick:u[5]||(u[5]=m=>d.$emit("openStreamSearch"))},ss)]))}}),us={class:"flex gap-4 flex-wrap"},cs=$e({__name:"StorageContent",setup(r){const o=Re();return(a,s)=>(V(),J("div",us,[(V(!0),J(nr,null,or(y(o).storageHomeAllList,d=>(V(),he(ni,{class:"flex gap-2 flex-col max-[800px]:justify-center",from:!0,item:d},null,8,["item"]))),256))]))}});var tn=(r,o,a)=>{if(!o.has(r))throw TypeError("Cannot "+a)},Ir=(r,o,a)=>(tn(r,o,"read from private field"),a?a.call(r):o.get(r)),ds=(r,o,a)=>{if(o.has(r))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(r):o.set(r,a)},fs=(r,o,a,s)=>(tn(r,o,"write to private field"),s?s.call(r,a):o.set(r,a),a);const rn=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],ps=[...rn,["unknown"]].map(r=>r[0]),Ct=new Map(rn);function hs(r){for(const[o,a]of Ct)if(r===a)return o;return"unknown"}function ms(r){if(nn(r))return{width:r.naturalWidth,height:r.naturalHeight};if(on(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(an(r))return{width:r.videoWidth,height:r.videoHeight};if(ln(r))return{width:r.width,height:r.height};if(cn(r))return{width:r.displayWidth,height:r.displayHeight};if(sn(r))return{width:r.width,height:r.height};if(un(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function nn(r){try{return r instanceof HTMLImageElement}catch{return!1}}function on(r){try{return r instanceof SVGImageElement}catch{return!1}}function an(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function sn(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function ln(r){try{return r instanceof ImageBitmap}catch{return!1}}function un(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function cn(r){try{return r instanceof VideoFrame}catch{return!1}}function dn(r){try{return r instanceof Blob}catch{return!1}}function vs(r){try{return r instanceof ImageData}catch{return!1}}function gs(r,o){try{const a=new OffscreenCanvas(r,o);if(a.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return a;throw void 0}catch{const s=document.createElement("canvas");return s.width=r,s.height=o,s}}async function fn(r){if(nn(r)&&!await Cs(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(on(r)&&!await $s(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(cn(r)&&_s(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(an(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(ln(r)&&Ss(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:a}=ms(r);if(o===0||a===0)return null;const s=gs(o,a).getContext("2d");s.drawImage(r,0,0);try{return s.getImageData(0,0,o,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ys(r){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(r);else if(globalThis.Image){o=new Image;let a="";try{a=URL.createObjectURL(r),o.src=a,await o.decode()}finally{URL.revokeObjectURL(a)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await fn(o)}function ws(r){const{width:o,height:a}=r;if(o===0||a===0)return null;const s=r.getContext("2d");try{return s.getImageData(0,0,o,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function bs(r){if(dn(r))return await ys(r);if(vs(r)){if(ks(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return sn(r)||un(r)?ws(r):await fn(r)}async function Cs(r){try{return await r.decode(),!0}catch{return!1}}async function $s(r){var o;try{return await((o=r.decode)==null?void 0:o.call(r)),!0}catch{return!1}}function _s(r){return r.format===null}function ks(r){return r.data.buffer.byteLength===0}function Ss(r){return r.width===0&&r.height===0}function Wr(r,o){return r instanceof DOMException?new DOMException(`${o}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${o}: ${r.message}`):new Error(`${o}: ${r}`)}const Ur=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function xs(r){return r.join("|")}function Ts(r){const o=Nr(r);let a=0,s=Ur.length-1;for(;a<=s;){const d=Math.floor((a+s)/2),u=Ur[d],m=Nr(u);if(m===o)return u;m<o?a=d+1:s=d-1}return"None"}function Nr(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function Ps(r,o){return r.Binarizer[o]}function Es(r,o){return r.CharacterSet[o]}const Ms=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Os(r){return Ms[r.value]}function As(r,o){return r.EanAddOnSymbol[o]}function js(r,o){return r.TextMode[o]}const Be={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function pn(r,o){return{...o,formats:xs(o.formats),binarizer:Ps(r,o.binarizer),eanAddOnSymbol:As(r,o.eanAddOnSymbol),textMode:js(r,o.textMode),characterSet:Es(r,o.characterSet)}}function hn(r){return{...r,format:Ts(r.format),eccLevel:r.eccLevel,contentType:Os(r.contentType)}}const Ds={locateFile:(r,o)=>{const a=r.match(/_(.+?)\.wasm$/);return a?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${a[1]}/${r}`:o+r}};let Br=new WeakMap;function ir(r,o){var a;const s=Br.get(r);if(s!=null&&s.modulePromise&&(o===void 0||Object.is(o,s.moduleOverrides)))return s.modulePromise;const d=(a=o??(s==null?void 0:s.moduleOverrides))!=null?a:Ds,u=r({...d});return Br.set(r,{moduleOverrides:d,modulePromise:u}),u}async function Rs(r,o,a=Be){const s={...Be,...a},d=await ir(r),{size:u}=o,m=new Uint8Array(await o.arrayBuffer()),k=d._malloc(u);d.HEAPU8.set(m,k);const f=d.readBarcodesFromImage(k,u,pn(d,s));d._free(k);const $=[];for(let _=0;_<f.size();++_)$.push(hn(f.get(_)));return $}async function Ls(r,o,a=Be){const s={...Be,...a},d=await ir(r),{data:u,width:m,height:k,data:{byteLength:f}}=o,$=d._malloc(f);d.HEAPU8.set(u,$);const _=d.readBarcodesFromPixmap($,m,k,pn(d,s));d._free($);const w=[];for(let A=0;A<_.size();++A)w.push(hn(_.get(A)));return w}({...Be,formats:[...Be.formats]});var sr=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var a=o,s,d;a.ready=new Promise((e,t)=>{s=e,d=t});var u=Object.assign({},a),m="./this.program",k=typeof window=="object",f=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var $="";function _(e){return a.locateFile?a.locateFile(e,$):$+e}var w;(k||f)&&(f?$=self.location.href:typeof document<"u"&&document.currentScript&&($=document.currentScript.src),r&&($=r),$.indexOf("blob:")!==0?$=$.substr(0,$.replace(/[?#].*/,"").lastIndexOf("/")+1):$="",f&&(w=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),a.print||console.log.bind(console);var A=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.arguments&&a.arguments,a.thisProgram&&(m=a.thisProgram),a.quit&&a.quit;var R;a.wasmBinary&&(R=a.wasmBinary),typeof WebAssembly!="object"&&ie("no native wasm support detected");var L,I=!1,N,B,le,W,M,O,_e,ve;function Le(){var e=L.buffer;a.HEAP8=N=new Int8Array(e),a.HEAP16=le=new Int16Array(e),a.HEAPU8=B=new Uint8Array(e),a.HEAPU16=W=new Uint16Array(e),a.HEAP32=M=new Int32Array(e),a.HEAPU32=O=new Uint32Array(e),a.HEAPF32=_e=new Float32Array(e),a.HEAPF64=ve=new Float64Array(e)}var Ve=[],ze=[],Je=[];function nt(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Pt(a.preRun.shift());jt(Ve)}function xt(){jt(ze)}function Tt(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)qe(a.postRun.shift());jt(Je)}function Pt(e){Ve.unshift(e)}function Et(e){ze.unshift(e)}function qe(e){Je.unshift(e)}var de=0,Me=null;function Mt(e){var t;de++,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,de)}function ke(e){var t;if(de--,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,de),de==0&&Me){var n=Me;Me=null,n()}}function ie(e){var t;(t=a.onAbort)===null||t===void 0||t.call(a,e),e="Aborted("+e+")",A(e),I=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw d(n),n}var Ot="data:application/octet-stream;base64,",ot=e=>e.startsWith(Ot),Se;Se="zxing_reader.wasm",ot(Se)||(Se=_(Se));function at(e){if(e==Se&&R)return new Uint8Array(R);if(w)return w(e);throw"both async and sync fetching of the wasm failed"}function At(e){return!R&&(k||f)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>at(e)):Promise.resolve().then(()=>at(e))}function it(e,t,n){return At(e).then(i=>WebAssembly.instantiate(i,t)).then(i=>i).then(n,i=>{A(`failed to asynchronously prepare wasm: ${i}`),ie(i)})}function En(e,t,n,i){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!ot(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(l=>{var c=WebAssembly.instantiateStreaming(l,n);return c.then(i,function(p){return A(`wasm streaming compile failed: ${p}`),A("falling back to ArrayBuffer instantiation"),it(t,n,i)})}):it(t,n,i)}function Mn(){var e={a:ya};function t(i,l){return K=i.exports,L=K.ia,Le(),gr=K.ma,Et(K.ja),ke(),K}Mt();function n(i){t(i.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(i){A(`Module.instantiateWasm callback failed with error: ${i}`),d(i)}return En(R,Se,e,n).catch(d),{}}var jt=e=>{for(;e.length>0;)e.shift()(a)};a.noExitRuntime;var st=[],lt=0,On=e=>{var t=new Dt(e);return t.get_caught()||(t.set_caught(!0),lt--),t.set_rethrown(!1),st.push(t),Or(t.excPtr),t.get_exception_ptr()},ge=0,An=()=>{G(0,0);var e=st.pop();Mr(e.excPtr),ge=0};function Dt(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){O[this.ptr+4>>2]=t},this.get_type=function(){return O[this.ptr+4>>2]},this.set_destructor=function(t){O[this.ptr+8>>2]=t},this.get_destructor=function(){return O[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,N[this.ptr+12>>0]=t},this.get_caught=function(){return N[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,N[this.ptr+13>>0]=t},this.get_rethrown=function(){return N[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){O[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return O[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=jr(this.get_type());if(t)return O[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var jn=e=>{throw ge||(ge=e),ge},Rt=e=>{var t=ge;if(!t)return tt(0),0;var n=new Dt(t);n.set_adjusted_ptr(t);var i=n.get_type();if(!i)return tt(0),t;for(var l in e){var c=e[l];if(c===0||c===i)break;var p=n.ptr+16;if(Ar(c,i,p))return tt(c),t}return tt(i),t},Dn=()=>Rt([]),Rn=e=>Rt([e]),Ln=(e,t)=>Rt([e,t]),Vn=()=>{var e=st.pop();e||ie("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(st.push(e),e.set_rethrown(!0),e.set_caught(!1),lt++),ge=t,ge},Fn=(e,t,n)=>{var i=new Dt(e);throw i.init(t,n),ge=e,lt++,ge},Hn=()=>lt,ut={},Lt=e=>{for(;e.length;){var t=e.pop(),n=e.pop();n(t)}};function Vt(e){return this.fromWireType(M[e>>2])}var Fe={},Oe={},ct={},lr,dt=e=>{throw new lr(e)},Ae=(e,t,n)=>{e.forEach(function(h){ct[h]=t});function i(h){var v=n(h);v.length!==e.length&&dt("Mismatched type converter count");for(var C=0;C<e.length;++C)fe(e[C],v[C])}var l=new Array(t.length),c=[],p=0;t.forEach((h,v)=>{Oe.hasOwnProperty(h)?l[v]=Oe[h]:(c.push(h),Fe.hasOwnProperty(h)||(Fe[h]=[]),Fe[h].push(()=>{l[v]=Oe[h],++p,p===c.length&&i(l)}))}),c.length===0&&i(l)},In=e=>{var t=ut[e];delete ut[e];var n=t.rawConstructor,i=t.rawDestructor,l=t.fields,c=l.map(p=>p.getterReturnType).concat(l.map(p=>p.setterArgumentType));Ae([e],c,p=>{var h={};return l.forEach((v,C)=>{var S=v.fieldName,T=p[C],P=v.getter,E=v.getterContext,z=p[C+l.length],Q=v.setter,U=v.setterContext;h[S]={read:re=>T.fromWireType(P(E,re)),write:(re,g)=>{var x=[];Q(U,re,z.toWireType(x,g)),Lt(x)}}}),[{name:t.name,fromWireType:v=>{var C={};for(var S in h)C[S]=h[S].read(v);return i(v),C},toWireType:(v,C)=>{for(var S in h)if(!(S in C))throw new TypeError(`Missing field: "${S}"`);var T=n();for(S in h)h[S].write(T,C[S]);return v!==null&&v.push(i,T),T},argPackAdvance:pe,readValueFromPointer:Vt,destructorFunction:i}]})},Wn=(e,t,n,i,l)=>{},Un=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ur=e},ur,te=e=>{for(var t="",n=e;B[n];)t+=ur[B[n++]];return t},He,F=e=>{throw new He(e)};function Nn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i=t.name;if(e||F(`type "${i}" must have a positive integer typeid pointer`),Oe.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;F(`Cannot register type '${i}' twice`)}if(Oe[e]=t,delete ct[e],Fe.hasOwnProperty(e)){var l=Fe[e];delete Fe[e],l.forEach(c=>c())}}function fe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Nn(e,t,n)}var pe=8,Bn=(e,t,n,i)=>{t=te(t),fe(e,{name:t,fromWireType:function(l){return!!l},toWireType:function(l,c){return c?n:i},argPackAdvance:pe,readValueFromPointer:function(l){return this.fromWireType(B[l])},destructorFunction:null})},Gn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ft=e=>{function t(n){return n.$$.ptrType.registeredClass.name}F(t(e)+" instance already deleted")},Ht=!1,cr=e=>{},zn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},dr=e=>{e.count.value-=1;var t=e.count.value===0;t&&zn(e)},fr=(e,t,n)=>{if(t===n)return e;if(n.baseClass===void 0)return null;var i=fr(e,t,n.baseClass);return i===null?null:n.downcast(i)},pr={},Jn=()=>Object.keys(Qe).length,qn=()=>{var e=[];for(var t in Qe)Qe.hasOwnProperty(t)&&e.push(Qe[t]);return e},Ye=[],It=()=>{for(;Ye.length;){var e=Ye.pop();e.$$.deleteScheduled=!1,e.delete()}},Ze,Yn=e=>{Ze=e,Ye.length&&Ze&&Ze(It)},Zn=()=>{a.getInheritedInstanceCount=Jn,a.getLiveInheritedInstances=qn,a.flushPendingDeletes=It,a.setDelayFunction=Yn},Qe={},Qn=(e,t)=>{for(t===void 0&&F("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Xn=(e,t)=>(t=Qn(e,t),Qe[t]),ft=(e,t)=>{(!t.ptrType||!t.ptr)&&dt("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,i=!!t.smartPtr;return n!==i&&dt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Xe(Object.create(e,{$$:{value:t,writable:!0}}))};function Kn(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Xn(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var i=n.clone();return this.destructor(e),i}function l(){return this.isSmartPointer?ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(t),p=pr[c];if(!p)return l.call(this);var h;this.isConst?h=p.constPointerType:h=p.pointerType;var v=fr(t,this.registeredClass,h.registeredClass);return v===null?l.call(this):this.isSmartPointer?ft(h.registeredClass.instancePrototype,{ptrType:h,ptr:v,smartPtrType:this,smartPtr:e}):ft(h.registeredClass.instancePrototype,{ptrType:h,ptr:v})}var Xe=e=>typeof FinalizationRegistry>"u"?(Xe=t=>t,e):(Ht=new FinalizationRegistry(t=>{dr(t.$$)}),Xe=t=>{var n=t.$$,i=!!n.smartPtr;if(i){var l={$$:n};Ht.register(t,l,t)}return t},cr=t=>Ht.unregister(t),Xe(e)),eo=()=>{Object.assign(pt.prototype,{isAliasOf(e){if(!(this instanceof pt)||!(e instanceof pt))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,l=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;i.baseClass;)l=i.upcast(l),i=i.baseClass;return t===i&&n===l},clone(){if(this.$$.ptr||Ft(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Xe(Object.create(Object.getPrototypeOf(this),{$$:{value:Gn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),cr(this),dr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),Ye.push(this),Ye.length===1&&Ze&&Ze(It),this.$$.deleteScheduled=!0,this}})};function pt(){}var Ke=(e,t)=>Object.defineProperty(t,"name",{value:e}),hr=(e,t,n)=>{if(e[t].overloadTable===void 0){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||F(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},Wt=(e,t,n)=>{a.hasOwnProperty(e)?((n===void 0||a[e].overloadTable!==void 0&&a[e].overloadTable[n]!==void 0)&&F(`Cannot register public name '${e}' twice`),hr(a,e,e),a.hasOwnProperty(n)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),a[e].overloadTable[n]=t):(a[e]=t,n!==void 0&&(a[e].numArguments=n))},to=48,ro=57,no=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=to&&t<=ro?`_${e}`:e};function oo(e,t,n,i,l,c,p,h){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=l,this.getActualType=c,this.upcast=p,this.downcast=h,this.pureVirtualFunctions=[]}var Ut=(e,t,n)=>{for(;t!==n;)t.upcast||F(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function ao(e,t){if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${Jt(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Ut(t.$$.ptr,n,this.registeredClass);return i}function io(e,t){var n;if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;(!t||!t.$$)&&F(`Cannot pass "${Jt(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(n=Ut(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&F("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var l=t.clone();n=this.rawShare(n,ye.toHandle(()=>l.delete())),e!==null&&e.push(this.rawDestructor,n)}break;default:F("Unsupporting sharing policy")}return n}function so(e,t){if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${Jt(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Ut(t.$$.ptr,n,this.registeredClass);return i}function mr(e){return this.fromWireType(O[e>>2])}var lo=()=>{Object.assign(ht.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:pe,readValueFromPointer:mr,deleteObject(e){e!==null&&e.delete()},fromWireType:Kn})};function ht(e,t,n,i,l,c,p,h,v,C,S){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=i,this.isSmartPointer=l,this.pointeeType=c,this.sharingPolicy=p,this.rawGetPointee=h,this.rawConstructor=v,this.rawShare=C,this.rawDestructor=S,!l&&t.baseClass===void 0?i?(this.toWireType=ao,this.destructorFunction=null):(this.toWireType=so,this.destructorFunction=null):this.toWireType=io}var vr=(e,t,n)=>{a.hasOwnProperty(e)||dt("Replacing nonexistant public symbol"),a[e].overloadTable!==void 0&&n!==void 0?a[e].overloadTable[n]=t:(a[e]=t,a[e].argCount=n)},uo=(e,t,n)=>{var i=a["dynCall_"+e];return n&&n.length?i.apply(null,[t].concat(n)):i.call(null,t)},mt=[],gr,q=e=>{var t=mt[e];return t||(e>=mt.length&&(mt.length=e+1),mt[e]=t=gr.get(e)),t},co=(e,t,n)=>{if(e.includes("j"))return uo(e,t,n);var i=q(t).apply(null,n);return i},fo=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),co(e,t,n)}},ce=(e,t)=>{e=te(e);function n(){return e.includes("j")?fo(e,t):q(t)}var i=n();return typeof i!="function"&&F(`unknown function pointer with signature ${e}: ${t}`),i},po=(e,t)=>{var n=Ke(t,function(i){this.name=t,this.message=i;var l=new Error(i).stack;l!==void 0&&(this.stack=this.toString()+`
`+l.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},yr,wr=e=>{var t=Er(e),n=te(t);return we(t),n},vt=(e,t)=>{var n=[],i={};function l(c){if(!i[c]&&!Oe[c]){if(ct[c]){ct[c].forEach(l);return}n.push(c),i[c]=!0}}throw t.forEach(l),new yr(`${e}: `+n.map(wr).join([", "]))},ho=(e,t,n,i,l,c,p,h,v,C,S,T,P)=>{S=te(S),c=ce(l,c),h&&(h=ce(p,h)),C&&(C=ce(v,C)),P=ce(T,P);var E=no(S);Wt(E,function(){vt(`Cannot construct ${S} due to unbound types`,[i])}),Ae([e,t,n],i?[i]:[],function(z){z=z[0];var Q,U;i?(Q=z.registeredClass,U=Q.instancePrototype):U=pt.prototype;var re=Ke(S,function(){if(Object.getPrototypeOf(this)!==g)throw new He("Use 'new' to construct "+S);if(x.constructor_body===void 0)throw new He(S+" has no accessible constructor");var Vr=x.constructor_body[arguments.length];if(Vr===void 0)throw new He(`Tried to invoke ctor of ${S} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(x.constructor_body).toString()}) parameters instead!`);return Vr.apply(this,arguments)}),g=Object.create(U,{constructor:{value:re}});re.prototype=g;var x=new oo(S,re,g,P,Q,c,h,C);if(x.baseClass){var X,ee;(ee=(X=x.baseClass).__derivedClasses)!==null&&ee!==void 0||(X.__derivedClasses=[]),x.baseClass.__derivedClasses.push(x)}var Ie=new ht(S,x,!0,!1,!1),wt=new ht(S+"*",x,!1,!1,!1),Lr=new ht(S+" const*",x,!1,!0,!1);return pr[e]={pointerType:wt,constPointerType:Lr},vr(E,re),[Ie,wt,Lr]})},Nt=(e,t)=>{for(var n=[],i=0;i<e;i++)n.push(O[t+i*4>>2]);return n};function mo(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Bt(e,t,n,i,l,c){var p=t.length;p<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");var h=t[1]!==null&&n!==null,v=mo(t),C=t[0].name!=="void",S=p-2,T=new Array(S),P=[],E=[],z=function(){arguments.length!==S&&F(`function ${e} called with ${arguments.length} arguments, expected ${S}`),E.length=0;var Q;P.length=h?2:1,P[0]=l,h&&(Q=t[1].toWireType(E,this),P[1]=Q);for(var U=0;U<S;++U)T[U]=t[U+2].toWireType(E,arguments[U]),P.push(T[U]);var re=i.apply(null,P);function g(x){if(v)Lt(E);else for(var X=h?1:2;X<t.length;X++){var ee=X===1?Q:T[X-2];t[X].destructorFunction!==null&&t[X].destructorFunction(ee)}if(C)return t[0].fromWireType(x)}return g(re)};return Ke(e,z)}var vo=(e,t,n,i,l,c)=>{var p=Nt(t,n);l=ce(i,l),Ae([],[e],function(h){h=h[0];var v=`constructor ${h.name}`;if(h.registeredClass.constructor_body===void 0&&(h.registeredClass.constructor_body=[]),h.registeredClass.constructor_body[t-1]!==void 0)throw new He(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${h.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return h.registeredClass.constructor_body[t-1]=()=>{vt(`Cannot construct ${h.name} due to unbound types`,p)},Ae([],p,C=>(C.splice(1,0,null),h.registeredClass.constructor_body[t-1]=Bt(v,C,null,l,c),[])),[]})},br=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},go=(e,t,n,i,l,c,p,h,v)=>{var C=Nt(n,i);t=te(t),t=br(t),c=ce(l,c),Ae([],[e],function(S){S=S[0];var T=`${S.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),h&&S.registeredClass.pureVirtualFunctions.push(t);function P(){vt(`Cannot call ${T} due to unbound types`,C)}var E=S.registeredClass.instancePrototype,z=E[t];return z===void 0||z.overloadTable===void 0&&z.className!==S.name&&z.argCount===n-2?(P.argCount=n-2,P.className=S.name,E[t]=P):(hr(E,t,T),E[t].overloadTable[n-2]=P),Ae([],C,function(Q){var U=Bt(T,Q,S,c,p);return E[t].overloadTable===void 0?(U.argCount=n-2,E[t]=U):E[t].overloadTable[n-2]=U,[]}),[]})};function yo(){Object.assign(Cr.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function Cr(){this.allocated=[void 0],this.freelist=[]}var ue=new Cr,Gt=e=>{e>=ue.reserved&&--ue.get(e).refcount===0&&ue.free(e)},wo=()=>{for(var e=0,t=ue.reserved;t<ue.allocated.length;++t)ue.allocated[t]!==void 0&&++e;return e},bo=()=>{ue.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ue.reserved=ue.allocated.length,a.count_emval_handles=wo},ye={toValue:e=>(e||F("Cannot use deleted val. handle = "+e),ue.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ue.allocate({refcount:1,value:e})}}},Co=(e,t)=>{t=te(t),fe(e,{name:t,fromWireType:n=>{var i=ye.toValue(n);return Gt(n),i},toWireType:(n,i)=>ye.toHandle(i),argPackAdvance:pe,readValueFromPointer:Vt,destructorFunction:null})},$o=(e,t,n)=>{switch(t){case 1:return n?function(i){return this.fromWireType(N[i>>0])}:function(i){return this.fromWireType(B[i>>0])};case 2:return n?function(i){return this.fromWireType(le[i>>1])}:function(i){return this.fromWireType(W[i>>1])};case 4:return n?function(i){return this.fromWireType(M[i>>2])}:function(i){return this.fromWireType(O[i>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},_o=(e,t,n,i)=>{t=te(t);function l(){}l.values={},fe(e,{name:t,constructor:l,fromWireType:function(c){return this.constructor.values[c]},toWireType:(c,p)=>p.value,argPackAdvance:pe,readValueFromPointer:$o(t,n,i),destructorFunction:null}),Wt(t,l)},zt=(e,t)=>{var n=Oe[e];return n===void 0&&F(t+" has unknown type "+wr(e)),n},ko=(e,t,n)=>{var i=zt(e,"enum");t=te(t);var l=i.constructor,c=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:Ke(`${i.name}_${t}`,function(){})}});l.values[n]=c,l[t]=c},Jt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},So=(e,t)=>{switch(t){case 4:return function(n){return this.fromWireType(_e[n>>2])};case 8:return function(n){return this.fromWireType(ve[n>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},xo=(e,t,n)=>{t=te(t),fe(e,{name:t,fromWireType:i=>i,toWireType:(i,l)=>l,argPackAdvance:pe,readValueFromPointer:So(t,n),destructorFunction:null})},To=(e,t,n,i,l,c,p)=>{var h=Nt(t,n);e=te(e),e=br(e),l=ce(i,l),Wt(e,function(){vt(`Cannot call ${e} due to unbound types`,h)},t-1),Ae([],h,function(v){var C=[v[0],null].concat(v.slice(1));return vr(e,Bt(e,C,null,l,c),t-1),[]})},Po=(e,t,n)=>{switch(t){case 1:return n?i=>N[i>>0]:i=>B[i>>0];case 2:return n?i=>le[i>>1]:i=>W[i>>1];case 4:return n?i=>M[i>>2]:i=>O[i>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Eo=(e,t,n,i,l)=>{t=te(t);var c=S=>S;if(i===0){var p=32-8*n;c=S=>S<<p>>>p}var h=t.includes("unsigned"),v=(S,T)=>{},C;h?C=function(S,T){return v(T,this.name),T>>>0}:C=function(S,T){return v(T,this.name),T},fe(e,{name:t,fromWireType:c,toWireType:C,argPackAdvance:pe,readValueFromPointer:Po(t,n,i!==0),destructorFunction:null})},Mo=(e,t,n)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],l=i[t];function c(p){var h=O[p>>2],v=O[p+4>>2];return new l(N.buffer,v,h)}n=te(n),fe(e,{name:n,fromWireType:c,argPackAdvance:pe,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},$r=(e,t,n,i)=>{if(!(i>0))return 0;for(var l=n,c=n+i-1,p=0;p<e.length;++p){var h=e.charCodeAt(p);if(h>=55296&&h<=57343){var v=e.charCodeAt(++p);h=65536+((h&1023)<<10)|v&1023}if(h<=127){if(n>=c)break;t[n++]=h}else if(h<=2047){if(n+1>=c)break;t[n++]=192|h>>6,t[n++]=128|h&63}else if(h<=65535){if(n+2>=c)break;t[n++]=224|h>>12,t[n++]=128|h>>6&63,t[n++]=128|h&63}else{if(n+3>=c)break;t[n++]=240|h>>18,t[n++]=128|h>>12&63,t[n++]=128|h>>6&63,t[n++]=128|h&63}}return t[n]=0,n-l},Oo=(e,t,n)=>$r(e,B,t,n),_r=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++n):t+=3}return t},kr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ao=(e,t,n)=>{for(var i=t+n,l=t;e[l]&&!(l>=i);)++l;if(l-t>16&&e.buffer&&kr)return kr.decode(e.subarray(t,l));for(var c="";t<l;){var p=e[t++];if(!(p&128)){c+=String.fromCharCode(p);continue}var h=e[t++]&63;if((p&224)==192){c+=String.fromCharCode((p&31)<<6|h);continue}var v=e[t++]&63;if((p&240)==224?p=(p&15)<<12|h<<6|v:p=(p&7)<<18|h<<12|v<<6|e[t++]&63,p<65536)c+=String.fromCharCode(p);else{var C=p-65536;c+=String.fromCharCode(55296|C>>10,56320|C&1023)}}return c},qt=(e,t)=>e?Ao(B,e,t):"",jo=(e,t)=>{t=te(t);var n=t==="std::string";fe(e,{name:t,fromWireType(i){var l=O[i>>2],c=i+4,p;if(n)for(var h=c,v=0;v<=l;++v){var C=c+v;if(v==l||B[C]==0){var S=C-h,T=qt(h,S);p===void 0?p=T:(p+="\0",p+=T),h=C+1}}else{for(var P=new Array(l),v=0;v<l;++v)P[v]=String.fromCharCode(B[c+v]);p=P.join("")}return we(i),p},toWireType(i,l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));var c,p=typeof l=="string";p||l instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Int8Array||F("Cannot pass non-string to std::string"),n&&p?c=_r(l):c=l.length;var h=Qt(4+c+1),v=h+4;if(O[h>>2]=c,n&&p)Oo(l,v,c+1);else if(p)for(var C=0;C<c;++C){var S=l.charCodeAt(C);S>255&&(we(v),F("String has UTF-16 code units that do not fit in 8 bits")),B[v+C]=S}else for(var C=0;C<c;++C)B[v+C]=l[C];return i!==null&&i.push(we,h),h},argPackAdvance:pe,readValueFromPointer:mr,destructorFunction(i){we(i)}})},Sr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Do=(e,t)=>{for(var n=e,i=n>>1,l=i+t/2;!(i>=l)&&W[i];)++i;if(n=i<<1,n-e>32&&Sr)return Sr.decode(B.subarray(e,n));for(var c="",p=0;!(p>=t/2);++p){var h=le[e+p*2>>1];if(h==0)break;c+=String.fromCharCode(h)}return c},Ro=(e,t,n)=>{var i;if((i=n)!==null&&i!==void 0||(n=2147483647),n<2)return 0;n-=2;for(var l=t,c=n<e.length*2?n/2:e.length,p=0;p<c;++p){var h=e.charCodeAt(p);le[t>>1]=h,t+=2}return le[t>>1]=0,t-l},Lo=e=>e.length*2,Vo=(e,t)=>{for(var n=0,i="";!(n>=t/4);){var l=M[e+n*4>>2];if(l==0)break;if(++n,l>=65536){var c=l-65536;i+=String.fromCharCode(55296|c>>10,56320|c&1023)}else i+=String.fromCharCode(l)}return i},Fo=(e,t,n)=>{var i;if((i=n)!==null&&i!==void 0||(n=2147483647),n<4)return 0;for(var l=t,c=l+n-4,p=0;p<e.length;++p){var h=e.charCodeAt(p);if(h>=55296&&h<=57343){var v=e.charCodeAt(++p);h=65536+((h&1023)<<10)|v&1023}if(M[t>>2]=h,t+=4,t+4>c)break}return M[t>>2]=0,t-l},Ho=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&++n,t+=4}return t},Io=(e,t,n)=>{n=te(n);var i,l,c,p,h;t===2?(i=Do,l=Ro,p=Lo,c=()=>W,h=1):t===4&&(i=Vo,l=Fo,p=Ho,c=()=>O,h=2),fe(e,{name:n,fromWireType:v=>{for(var C=O[v>>2],S=c(),T,P=v+4,E=0;E<=C;++E){var z=v+4+E*t;if(E==C||S[z>>h]==0){var Q=z-P,U=i(P,Q);T===void 0?T=U:(T+="\0",T+=U),P=z+t}}return we(v),T},toWireType:(v,C)=>{typeof C!="string"&&F(`Cannot pass non-string to C++ string type ${n}`);var S=p(C),T=Qt(4+S+t);return O[T>>2]=S>>h,l(C,T+4,S+t),v!==null&&v.push(we,T),T},argPackAdvance:pe,readValueFromPointer:Vt,destructorFunction(v){we(v)}})},Wo=(e,t,n,i,l,c)=>{ut[e]={name:te(t),rawConstructor:ce(n,i),rawDestructor:ce(l,c),fields:[]}},Uo=(e,t,n,i,l,c,p,h,v,C)=>{ut[e].fields.push({fieldName:te(t),getterReturnType:n,getter:ce(i,l),getterContext:c,setterArgumentType:p,setter:ce(h,v),setterContext:C})},No=(e,t)=>{t=te(t),fe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,i)=>{}})},Yt=[],Bo=(e,t,n,i)=>(e=Yt[e],t=ye.toValue(t),e(null,t,n,i)),Go={},zo=e=>{var t=Go[e];return t===void 0?te(e):t},xr=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return n||delete t.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Jo=e=>e===0?ye.toHandle(xr()):(e=zo(e),ye.toHandle(xr()[e])),qo=e=>{var t=Yt.length;return Yt.push(e),t},Yo=(e,t)=>{for(var n=new Array(e),i=0;i<e;++i)n[i]=zt(O[t+i*4>>2],"parameter "+i);return n},Zo=Reflect.construct,Qo=(e,t,n)=>{var i=[],l=e.toWireType(i,n);return i.length&&(O[t>>2]=ye.toHandle(i)),l},Xo=(e,t,n)=>{var i=Yo(e,t),l=i.shift();e--;var c=new Array(e),p=(v,C,S,T)=>{for(var P=0,E=0;E<e;++E)c[E]=i[E].readValueFromPointer(T+P),P+=i[E].argPackAdvance;for(var z=n===1?Zo(C,c):C.apply(v,c),E=0;E<e;++E){var Q,U;(Q=(U=i[E]).deleteObject)===null||Q===void 0||Q.call(U,c[E])}return Qo(l,S,z)},h=`methodCaller<(${i.map(v=>v.name).join(", ")}) => ${l.name}>`;return qo(Ke(h,p))},Ko=e=>{e>4&&(ue.get(e).refcount+=1)},ea=e=>{var t=ye.toValue(e);Lt(t),Gt(e)},ta=(e,t)=>{e=zt(e,"_emval_take_value");var n=e.readValueFromPointer(t);return ye.toHandle(n)},ra=()=>{ie("")},na=(e,t,n)=>B.copyWithin(e,t,t+n),oa=()=>2147483648,aa=e=>{var t=L.buffer,n=(e-t.byteLength+65535)/65536;try{return L.grow(n),Le(),1}catch{}},ia=e=>{var t=B.length;e>>>=0;var n=oa();if(e>n)return!1;for(var i=(v,C)=>v+(C-v%C)%C,l=1;l<=4;l*=2){var c=t*(1+.2/l);c=Math.min(c,e+100663296);var p=Math.min(n,i(Math.max(e,c),65536)),h=aa(p);if(h)return!0}return!1},Zt={},sa=()=>m||"./this.program",et=()=>{if(!et.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:sa()};for(var n in Zt)Zt[n]===void 0?delete t[n]:t[n]=Zt[n];var i=[];for(var n in t)i.push(`${n}=${t[n]}`);et.strings=i}return et.strings},la=(e,t)=>{for(var n=0;n<e.length;++n)N[t++>>0]=e.charCodeAt(n);N[t>>0]=0},ua=(e,t)=>{var n=0;return et().forEach((i,l)=>{var c=t+n;O[e+l*4>>2]=c,la(i,c),n+=i.length+1}),0},ca=(e,t)=>{var n=et();O[e>>2]=n.length;var i=0;return n.forEach(l=>i+=l.length+1),O[t>>2]=i,0},da=e=>e,gt=e=>e%4===0&&(e%100!==0||e%400===0),fa=(e,t)=>{for(var n=0,i=0;i<=t;n+=e[i++]);return n},Tr=[31,29,31,30,31,30,31,31,30,31,30,31],Pr=[31,28,31,30,31,30,31,31,30,31,30,31],pa=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var i=gt(n.getFullYear()),l=n.getMonth(),c=(i?Tr:Pr)[l];if(t>c-n.getDate())t-=c-n.getDate()+1,n.setDate(1),l<11?n.setMonth(l+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n};function ha(e,t,n){var i=n>0?n:_r(e)+1,l=new Array(i),c=$r(e,l,0,l.length);return t&&(l.length=c),l}var ma=(e,t)=>{N.set(e,t)},va=(e,t,n,i)=>{var l=O[i+40>>2],c={tm_sec:M[i>>2],tm_min:M[i+4>>2],tm_hour:M[i+8>>2],tm_mday:M[i+12>>2],tm_mon:M[i+16>>2],tm_year:M[i+20>>2],tm_wday:M[i+24>>2],tm_yday:M[i+28>>2],tm_isdst:M[i+32>>2],tm_gmtoff:M[i+36>>2],tm_zone:l?qt(l):""},p=qt(n),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var v in h)p=p.replace(new RegExp(v,"g"),h[v]);var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=["January","February","March","April","May","June","July","August","September","October","November","December"];function T(g,x,X){for(var ee=typeof g=="number"?g.toString():g||"";ee.length<x;)ee=X[0]+ee;return ee}function P(g,x){return T(g,x,"0")}function E(g,x){function X(Ie){return Ie<0?-1:Ie>0?1:0}var ee;return(ee=X(g.getFullYear()-x.getFullYear()))===0&&(ee=X(g.getMonth()-x.getMonth()))===0&&(ee=X(g.getDate()-x.getDate())),ee}function z(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function Q(g){var x=pa(new Date(g.tm_year+1900,0,1),g.tm_yday),X=new Date(x.getFullYear(),0,4),ee=new Date(x.getFullYear()+1,0,4),Ie=z(X),wt=z(ee);return E(Ie,x)<=0?E(wt,x)<=0?x.getFullYear()+1:x.getFullYear():x.getFullYear()-1}var U={"%a":g=>C[g.tm_wday].substring(0,3),"%A":g=>C[g.tm_wday],"%b":g=>S[g.tm_mon].substring(0,3),"%B":g=>S[g.tm_mon],"%C":g=>{var x=g.tm_year+1900;return P(x/100|0,2)},"%d":g=>P(g.tm_mday,2),"%e":g=>T(g.tm_mday,2," "),"%g":g=>Q(g).toString().substring(2),"%G":g=>Q(g),"%H":g=>P(g.tm_hour,2),"%I":g=>{var x=g.tm_hour;return x==0?x=12:x>12&&(x-=12),P(x,2)},"%j":g=>P(g.tm_mday+fa(gt(g.tm_year+1900)?Tr:Pr,g.tm_mon-1),3),"%m":g=>P(g.tm_mon+1,2),"%M":g=>P(g.tm_min,2),"%n":()=>`
`,"%p":g=>g.tm_hour>=0&&g.tm_hour<12?"AM":"PM","%S":g=>P(g.tm_sec,2),"%t":()=>"	","%u":g=>g.tm_wday||7,"%U":g=>{var x=g.tm_yday+7-g.tm_wday;return P(Math.floor(x/7),2)},"%V":g=>{var x=Math.floor((g.tm_yday+7-(g.tm_wday+6)%7)/7);if((g.tm_wday+371-g.tm_yday-2)%7<=2&&x++,x){if(x==53){var X=(g.tm_wday+371-g.tm_yday)%7;X!=4&&(X!=3||!gt(g.tm_year))&&(x=1)}}else{x=52;var ee=(g.tm_wday+7-g.tm_yday-1)%7;(ee==4||ee==5&&gt(g.tm_year%400-1))&&x++}return P(x,2)},"%w":g=>g.tm_wday,"%W":g=>{var x=g.tm_yday+7-(g.tm_wday+6)%7;return P(Math.floor(x/7),2)},"%y":g=>(g.tm_year+1900).toString().substring(2),"%Y":g=>g.tm_year+1900,"%z":g=>{var x=g.tm_gmtoff,X=x>=0;return x=Math.abs(x)/60,x=x/60*100+x%60,(X?"+":"-")+("0000"+x).slice(-4)},"%Z":g=>g.tm_zone,"%%":()=>"%"};p=p.replace(/%%/g,"\0\0");for(var v in U)p.includes(v)&&(p=p.replace(new RegExp(v,"g"),U[v](c)));p=p.replace(/\0\0/g,"%");var re=ha(p,!1);return re.length>t?0:(ma(re,e),re.length-1)},ga=(e,t,n,i,l)=>va(e,t,n,i);lr=a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Un(),He=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},eo(),Zn(),lo(),yr=a.UnboundTypeError=po(Error,"UnboundTypeError"),yo(),bo();var ya={s:On,u:An,b:Dn,g:Rn,q:Ln,J:Vn,f:Fn,V:Hn,d:jn,da:In,Q:Wn,_:Bn,ca:ho,ba:vo,w:go,Y:Co,x:_o,h:ko,L:xo,M:To,t:Eo,o:Mo,K:jo,C:Io,A:Wo,ea:Uo,$:No,R:Bo,ha:Gt,fa:Jo,Z:Xo,N:Ko,O:ea,aa:ta,B:ra,X:na,W:ia,T:ua,U:ca,E:Da,D:_a,F:ja,n:Ra,a:wa,e:Sa,m:$a,k:Ta,H:Oa,v:Ea,G:Aa,z:Va,P:Ha,l:xa,j:ka,c:Ca,p:ba,I:Ma,r:La,i:Pa,y:Fa,ga:da,S:ga},K=Mn(),we=a._free=e=>(we=a._free=K.ka)(e),Qt=a._malloc=e=>(Qt=a._malloc=K.la)(e),Er=e=>(Er=K.na)(e),G=(e,t)=>(G=K.oa)(e,t),tt=e=>(tt=K.pa)(e),Y=()=>(Y=K.qa)(),Z=e=>(Z=K.ra)(e),Mr=e=>(Mr=K.sa)(e),Or=e=>(Or=K.ta)(e),Ar=(e,t,n)=>(Ar=K.ua)(e,t,n),jr=e=>(jr=K.va)(e);a.dynCall_viijii=(e,t,n,i,l,c,p)=>(a.dynCall_viijii=K.wa)(e,t,n,i,l,c,p);var Dr=a.dynCall_jiiii=(e,t,n,i,l)=>(Dr=a.dynCall_jiiii=K.xa)(e,t,n,i,l);a.dynCall_iiiiij=(e,t,n,i,l,c,p)=>(a.dynCall_iiiiij=K.ya)(e,t,n,i,l,c,p),a.dynCall_iiiiijj=(e,t,n,i,l,c,p,h,v)=>(a.dynCall_iiiiijj=K.za)(e,t,n,i,l,c,p,h,v),a.dynCall_iiiiiijj=(e,t,n,i,l,c,p,h,v,C)=>(a.dynCall_iiiiiijj=K.Aa)(e,t,n,i,l,c,p,h,v,C);function wa(e,t){var n=Y();try{return q(e)(t)}catch(i){if(Z(n),i!==i+0)throw i;G(1,0)}}function ba(e,t,n,i){var l=Y();try{q(e)(t,n,i)}catch(c){if(Z(l),c!==c+0)throw c;G(1,0)}}function Ca(e,t,n){var i=Y();try{q(e)(t,n)}catch(l){if(Z(i),l!==l+0)throw l;G(1,0)}}function $a(e,t,n,i){var l=Y();try{return q(e)(t,n,i)}catch(c){if(Z(l),c!==c+0)throw c;G(1,0)}}function _a(e,t,n,i,l){var c=Y();try{return q(e)(t,n,i,l)}catch(p){if(Z(c),p!==p+0)throw p;G(1,0)}}function ka(e,t){var n=Y();try{q(e)(t)}catch(i){if(Z(n),i!==i+0)throw i;G(1,0)}}function Sa(e,t,n){var i=Y();try{return q(e)(t,n)}catch(l){if(Z(i),l!==l+0)throw l;G(1,0)}}function xa(e){var t=Y();try{q(e)()}catch(n){if(Z(t),n!==n+0)throw n;G(1,0)}}function Ta(e,t,n,i,l){var c=Y();try{return q(e)(t,n,i,l)}catch(p){if(Z(c),p!==p+0)throw p;G(1,0)}}function Pa(e,t,n,i,l,c,p,h,v,C,S){var T=Y();try{q(e)(t,n,i,l,c,p,h,v,C,S)}catch(P){if(Z(T),P!==P+0)throw P;G(1,0)}}function Ea(e,t,n,i,l,c,p){var h=Y();try{return q(e)(t,n,i,l,c,p)}catch(v){if(Z(h),v!==v+0)throw v;G(1,0)}}function Ma(e,t,n,i,l){var c=Y();try{q(e)(t,n,i,l)}catch(p){if(Z(c),p!==p+0)throw p;G(1,0)}}function Oa(e,t,n,i,l,c){var p=Y();try{return q(e)(t,n,i,l,c)}catch(h){if(Z(p),h!==h+0)throw h;G(1,0)}}function Aa(e,t,n,i,l,c,p,h){var v=Y();try{return q(e)(t,n,i,l,c,p,h)}catch(C){if(Z(v),C!==C+0)throw C;G(1,0)}}function ja(e,t,n,i){var l=Y();try{return q(e)(t,n,i)}catch(c){if(Z(l),c!==c+0)throw c;G(1,0)}}function Da(e,t,n,i){var l=Y();try{return q(e)(t,n,i)}catch(c){if(Z(l),c!==c+0)throw c;G(1,0)}}function Ra(e){var t=Y();try{return q(e)()}catch(n){if(Z(t),n!==n+0)throw n;G(1,0)}}function La(e,t,n,i,l,c,p,h){var v=Y();try{q(e)(t,n,i,l,c,p,h)}catch(C){if(Z(v),C!==C+0)throw C;G(1,0)}}function Va(e,t,n,i,l,c,p,h,v,C,S,T){var P=Y();try{return q(e)(t,n,i,l,c,p,h,v,C,S,T)}catch(E){if(Z(P),E!==E+0)throw E;G(1,0)}}function Fa(e,t,n,i,l,c,p,h,v,C,S,T,P,E,z,Q){var U=Y();try{q(e)(t,n,i,l,c,p,h,v,C,S,T,P,E,z,Q)}catch(re){if(Z(U),re!==re+0)throw re;G(1,0)}}function Ha(e,t,n,i,l){var c=Y();try{return Dr(e,t,n,i,l)}catch(p){if(Z(c),p!==p+0)throw p;G(1,0)}}var yt;Me=function e(){yt||Rr(),yt||(Me=e)};function Rr(){if(de>0||(nt(),de>0))return;function e(){yt||(yt=!0,a.calledRun=!0,!I&&(xt(),s(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),Tt()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),e()},1)):e()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Rr(),o.ready}})();function Vs(r){return ir(sr,r)}async function Fs(r,o){return Rs(sr,r,o)}async function Hs(r,o){return Ls(sr,r,o)}var rt;class mn extends EventTarget{constructor(o={}){var a;super(),ds(this,rt,void 0);try{const s=(a=o==null?void 0:o.formats)==null?void 0:a.filter(d=>d!=="unknown");if((s==null?void 0:s.length)===0)throw new TypeError("Hint option provided, but is empty.");s==null||s.forEach(d=>{if(!Ct.has(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`)}),fs(this,rt,s??[]),Vs().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(s){throw Wr(s,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return ps.filter(o=>o!=="unknown")}async detect(o){try{const a=await bs(o);if(a===null)return[];let s;try{dn(a)?s=await Fs(a,{tryHarder:!0,formats:Ir(this,rt).map(d=>Ct.get(d))}):s=await Hs(a,{tryHarder:!0,formats:Ir(this,rt).map(d=>Ct.get(d))})}catch(d){throw console.error(d),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return s.map(d=>{const{topLeft:{x:u,y:m},topRight:{x:k,y:f},bottomLeft:{x:$,y:_},bottomRight:{x:w,y:A}}=d.position,R=Math.min(u,k,$,w),L=Math.min(m,f,_,A),I=Math.max(u,k,$,w),N=Math.max(m,f,_,A);return{boundingBox:new DOMRectReadOnly(R,L,I-R,N-L),rawValue:d.text,format:hs(d.format),cornerPoints:[{x:u,y:m},{x:k,y:f},{x:w,y:A},{x:$,y:_}]}})}catch(a){throw Wr(a,"Failed to execute 'detect' on 'BarcodeDetector'")}}}rt=new WeakMap;const vn=(r,o,a="error")=>{let s,d;const u=new Promise((m,k)=>{s=m,d=k,r.addEventListener(o,s),r.addEventListener(a,d)});return u.finally(()=>{r.removeEventListener(o,s),r.removeEventListener(a,d)}),u},Gr=r=>new Promise(o=>setTimeout(o,r));class gn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Is extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Ws extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let tr;const Us=r=>{tr=new mn({formats:r})},Ns=async(r,{detectHandler:o,locateHandler:a,minDelay:s,formats:d})=>{tr=new mn({formats:d});const u=m=>async k=>{if(r.readyState>1){const{lastScanned:f,contentBefore:$,lastScanHadContent:_}=m;if(k-f<s)window.requestAnimationFrame(u(m));else{const w=await tr.detect(r),A=w.some(I=>!$.includes(I.rawValue));A&&o(w);const R=w.length>0;R&&a(w),!R&&_&&a(w);const L={lastScanned:k,lastScanHadContent:R,contentBefore:A?w.map(I=>I.rawValue):$};window.requestAnimationFrame(u(L))}}};u({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var yn={},ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.compactObject=Cn;ae.deprecated=Xs;var Bs=ae.detectBrowser=Ks;ae.disableLog=Ys;ae.disableWarnings=Zs;ae.extractVersion=$t;ae.filterStats=el;ae.log=Qs;ae.walkStats=kt;ae.wrapPeerConnectionEvent=qs;function Gs(r,o,a){return o=zs(o),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r}function zs(r){var o=Js(r,"string");return Pe(o)==="symbol"?o:String(o)}function Js(r,o){if(Pe(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,o||"default");if(Pe(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}function Pe(r){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Pe(r)}var wn=!0,bn=!0;function $t(r,o,a){var s=r.match(o);return s&&s.length>=a&&parseInt(s[a],10)}function qs(r,o,a){if(r.RTCPeerConnection){var s=r.RTCPeerConnection.prototype,d=s.addEventListener;s.addEventListener=function(m,k){if(m!==o)return d.apply(this,arguments);var f=function($){var _=a($);_&&(k.handleEvent?k.handleEvent(_):k(_))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(k,f),d.apply(this,[m,f])};var u=s.removeEventListener;s.removeEventListener=function(m,k){if(m!==o||!this._eventMap||!this._eventMap[o])return u.apply(this,arguments);if(!this._eventMap[o].has(k))return u.apply(this,arguments);var f=this._eventMap[o].get(k);return this._eventMap[o].delete(k),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[m,f])},Object.defineProperty(s,"on"+o,{get:function(){return this["_on"+o]},set:function(m){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),m&&this.addEventListener(o,this["_on"+o]=m)},enumerable:!0,configurable:!0})}}function Ys(r){return typeof r!="boolean"?new Error("Argument type: "+Pe(r)+". Please use a boolean."):(wn=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Zs(r){return typeof r!="boolean"?new Error("Argument type: "+Pe(r)+". Please use a boolean."):(bn=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Qs(){if((typeof window>"u"?"undefined":Pe(window))==="object"){if(wn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Xs(r,o){bn&&console.warn(r+" is deprecated, please use "+o+" instead.")}function Ks(r){var o={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return o.browser="Not a browser.",o;var a=r.navigator;if(a.mozGetUserMedia)o.browser="firefox",o.version=$t(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)o.browser="chrome",o.version=$t(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=$t(a.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function zr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Cn(r){return zr(r)?Object.keys(r).reduce(function(o,a){var s=zr(r[a]),d=s?Cn(r[a]):r[a],u=s&&!Object.keys(d).length;return d===void 0||u?o:Object.assign(o,Gs({},a,d))},{}):r}function kt(r,o,a){!o||a.has(o.id)||(a.set(o.id,o),Object.keys(o).forEach(function(s){s.endsWith("Id")?kt(r,r.get(o[s]),a):s.endsWith("Ids")&&o[s].forEach(function(d){kt(r,r.get(d),a)})}))}function el(r,o,a){var s=a?"outbound-rtp":"inbound-rtp",d=new Map;if(o===null)return d;var u=[];return r.forEach(function(m){m.type==="track"&&m.trackIdentifier===o.id&&u.push(m)}),u.forEach(function(m){r.forEach(function(k){k.type===s&&k.trackId===m.id&&kt(r,k,d)})}),d}Object.defineProperty(yn,"__esModule",{value:!0});var tl=yn.shimGetUserMedia=ol,rl=nl(ae);function $n(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return($n=function(s){return s?a:o})(r)}function nl(r,o){if(!o&&r&&r.__esModule)return r;if(r===null||xe(r)!=="object"&&typeof r!="function")return{default:r};var a=$n(o);if(a&&a.has(r))return a.get(r);var s={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var m=d?Object.getOwnPropertyDescriptor(r,u):null;m&&(m.get||m.set)?Object.defineProperty(s,u,m):s[u]=r[u]}return s.default=r,a&&a.set(r,s),s}function xe(r){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xe(r)}var Jr=rl.log;function ol(r,o){var a=r&&r.navigator;if(a.mediaDevices){var s=function(f){if(xe(f)!=="object"||f.mandatory||f.optional)return f;var $={};return Object.keys(f).forEach(function(_){if(!(_==="require"||_==="advanced"||_==="mediaSource")){var w=xe(f[_])==="object"?f[_]:{ideal:f[_]};w.exact!==void 0&&typeof w.exact=="number"&&(w.min=w.max=w.exact);var A=function(L,I){return L?L+I.charAt(0).toUpperCase()+I.slice(1):I==="deviceId"?"sourceId":I};if(w.ideal!==void 0){$.optional=$.optional||[];var R={};typeof w.ideal=="number"?(R[A("min",_)]=w.ideal,$.optional.push(R),R={},R[A("max",_)]=w.ideal,$.optional.push(R)):(R[A("",_)]=w.ideal,$.optional.push(R))}w.exact!==void 0&&typeof w.exact!="number"?($.mandatory=$.mandatory||{},$.mandatory[A("",_)]=w.exact):["min","max"].forEach(function(L){w[L]!==void 0&&($.mandatory=$.mandatory||{},$.mandatory[A(L,_)]=w[L])})}}),f.advanced&&($.optional=($.optional||[]).concat(f.advanced)),$},d=function(f,$){if(o.version>=61)return $(f);if(f=JSON.parse(JSON.stringify(f)),f&&xe(f.audio)==="object"){var _=function(L,I,N){I in L&&!(N in L)&&(L[N]=L[I],delete L[I])};f=JSON.parse(JSON.stringify(f)),_(f.audio,"autoGainControl","googAutoGainControl"),_(f.audio,"noiseSuppression","googNoiseSuppression"),f.audio=s(f.audio)}if(f&&xe(f.video)==="object"){var w=f.video.facingMode;w=w&&(xe(w)==="object"?w:{ideal:w});var A=o.version<66;if(w&&(w.exact==="user"||w.exact==="environment"||w.ideal==="user"||w.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!A)){delete f.video.facingMode;var R;if(w.exact==="environment"||w.ideal==="environment"?R=["back","rear"]:(w.exact==="user"||w.ideal==="user")&&(R=["front"]),R)return a.mediaDevices.enumerateDevices().then(function(L){L=L.filter(function(N){return N.kind==="videoinput"});var I=L.find(function(N){return R.some(function(B){return N.label.toLowerCase().includes(B)})});return!I&&L.length&&R.includes("back")&&(I=L[L.length-1]),I&&(f.video.deviceId=w.exact?{exact:I.deviceId}:{ideal:I.deviceId}),f.video=s(f.video),Jr("chrome: "+JSON.stringify(f)),$(f)})}f.video=s(f.video)}return Jr("chrome: "+JSON.stringify(f)),$(f)},u=function(f){return o.version>=64?f:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[f.name]||f.name,message:f.message,constraint:f.constraint||f.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},m=function(f,$,_){d(f,function(w){a.webkitGetUserMedia(w,$,function(A){_&&_(u(A))})})};if(a.getUserMedia=m.bind(a),a.mediaDevices.getUserMedia){var k=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(f){return d(f,function($){return k($).then(function(_){if($.audio&&!_.getAudioTracks().length||$.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(function(w){w.stop()}),new DOMException("","NotFoundError");return _},function(_){return Promise.reject(u(_))})})}}}}var _n={};Object.defineProperty(_n,"__esModule",{value:!0});var al=_n.shimGetUserMedia=ll,il=sl(ae);function kn(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(kn=function(s){return s?a:o})(r)}function sl(r,o){if(!o&&r&&r.__esModule)return r;if(r===null||We(r)!=="object"&&typeof r!="function")return{default:r};var a=kn(o);if(a&&a.has(r))return a.get(r);var s={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var m=d?Object.getOwnPropertyDescriptor(r,u):null;m&&(m.get||m.set)?Object.defineProperty(s,u,m):s[u]=r[u]}return s.default=r,a&&a.set(r,s),s}function We(r){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},We(r)}function ll(r,o){var a=r&&r.navigator,s=r&&r.MediaStreamTrack;if(a.getUserMedia=function(f,$,_){il.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(f).then($,_)},!(o.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){var d=function(f,$,_){$ in f&&!(_ in f)&&(f[_]=f[$],delete f[$])},u=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(f){return We(f)==="object"&&We(f.audio)==="object"&&(f=JSON.parse(JSON.stringify(f)),d(f.audio,"autoGainControl","mozAutoGainControl"),d(f.audio,"noiseSuppression","mozNoiseSuppression")),u(f)},s&&s.prototype.getSettings){var m=s.prototype.getSettings;s.prototype.getSettings=function(){var f=m.apply(this,arguments);return d(f,"mozAutoGainControl","autoGainControl"),d(f,"mozNoiseSuppression","noiseSuppression"),f}}if(s&&s.prototype.applyConstraints){var k=s.prototype.applyConstraints;s.prototype.applyConstraints=function(f){return this.kind==="audio"&&We(f)==="object"&&(f=JSON.parse(JSON.stringify(f)),d(f,"autoGainControl","mozAutoGainControl"),d(f,"noiseSuppression","mozNoiseSuppression")),k.apply(this,[f])}}}}var me={};Object.defineProperty(me,"__esModule",{value:!0});me.shimAudioContext=yl;me.shimCallbacksAPI=pl;me.shimConstraints=Tn;me.shimCreateOfferLegacy=gl;var ul=me.shimGetUserMedia=hl;me.shimLocalStreamsAPI=dl;me.shimRTCIceServerUrls=ml;me.shimRemoteStreamsAPI=fl;me.shimTrackEventTransceiver=vl;var Sn=cl(ae);function xn(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(xn=function(s){return s?a:o})(r)}function cl(r,o){if(!o&&r&&r.__esModule)return r;if(r===null||Ee(r)!=="object"&&typeof r!="function")return{default:r};var a=xn(o);if(a&&a.has(r))return a.get(r);var s={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var m=d?Object.getOwnPropertyDescriptor(r,u):null;m&&(m.get||m.set)?Object.defineProperty(s,u,m):s[u]=r[u]}return s.default=r,a&&a.set(r,s),s}function Ee(r){"@babel/helpers - typeof";return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ee(r)}function dl(r){if(!(Ee(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(a){var s=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(function(d){return o.call(s,d,a)}),a.getVideoTracks().forEach(function(d){return o.call(s,d,a)})},r.RTCPeerConnection.prototype.addTrack=function(a){for(var s=this,d=arguments.length,u=new Array(d>1?d-1:0),m=1;m<d;m++)u[m-1]=arguments[m];return u&&u.forEach(function(k){s._localStreams?s._localStreams.includes(k)||s._localStreams.push(k):s._localStreams=[k]}),o.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(a){var s=this;this._localStreams||(this._localStreams=[]);var d=this._localStreams.indexOf(a);if(d!==-1){this._localStreams.splice(d,1);var u=a.getTracks();this.getSenders().forEach(function(m){u.includes(m.track)&&s.removeTrack(m)})}})}}function fl(r){if(!(Ee(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(a){var s=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=function(d){d.streams.forEach(function(u){if(s._remoteStreams||(s._remoteStreams=[]),!s._remoteStreams.includes(u)){s._remoteStreams.push(u);var m=new Event("addstream");m.stream=u,s.dispatchEvent(m)}})})}});var o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(d){if(a._remoteStreams||(a._remoteStreams=[]),!(a._remoteStreams.indexOf(d)>=0)){a._remoteStreams.push(d);var u=new Event("addstream");u.stream=d,a.dispatchEvent(u)}})}),o.apply(a,arguments)}}}function pl(r){if(!(Ee(r)!=="object"||!r.RTCPeerConnection)){var o=r.RTCPeerConnection.prototype,a=o.createOffer,s=o.createAnswer,d=o.setLocalDescription,u=o.setRemoteDescription,m=o.addIceCandidate;o.createOffer=function(f,$){var _=arguments.length>=2?arguments[2]:arguments[0],w=a.apply(this,[_]);return $?(w.then(f,$),Promise.resolve()):w},o.createAnswer=function(f,$){var _=arguments.length>=2?arguments[2]:arguments[0],w=s.apply(this,[_]);return $?(w.then(f,$),Promise.resolve()):w};var k=function(f,$,_){var w=d.apply(this,[f]);return _?(w.then($,_),Promise.resolve()):w};o.setLocalDescription=k,k=function(f,$,_){var w=u.apply(this,[f]);return _?(w.then($,_),Promise.resolve()):w},o.setRemoteDescription=k,k=function(f,$,_){var w=m.apply(this,[f]);return _?(w.then($,_),Promise.resolve()):w},o.addIceCandidate=k}}function hl(r){var o=r&&r.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var a=o.mediaDevices,s=a.getUserMedia.bind(a);o.mediaDevices.getUserMedia=function(d){return s(Tn(d))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(d,u,m){o.mediaDevices.getUserMedia(d).then(u,m)}).bind(o))}function Tn(r){return r&&r.video!==void 0?Object.assign({},r,{video:Sn.compactObject(r.video)}):r}function ml(r){if(r.RTCPeerConnection){var o=r.RTCPeerConnection;r.RTCPeerConnection=function(a,s){if(a&&a.iceServers){for(var d=[],u=0;u<a.iceServers.length;u++){var m=a.iceServers[u];m.urls===void 0&&m.url?(Sn.deprecated("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,d.push(m)):d.push(a.iceServers[u])}a.iceServers=d}return new o(a,s)},r.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function vl(r){Ee(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function gl(r){var o=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);var s=this.getTransceivers().find(function(u){return u.receiver.track.kind==="audio"});a.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):a.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);var d=this.getTransceivers().find(function(u){return u.receiver.track.kind==="video"});a.offerToReceiveVideo===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):a.offerToReceiveVideo===!0&&!d&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function yl(r){Ee(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const wl=r=>{let o=!1,a;return(...s)=>(o||(a=r(s),o=!0),a)};function be(r,o){if(r===!1)throw new Error(o??"assertion failure")}const bl=wl(()=>{const r=Bs(window);switch(r.browser){case"chrome":tl(window,r);break;case"firefox":al(window,r);break;case"safari":ul(window,r);break;default:throw new gn}});let Ue=Promise.resolve({type:"stop",data:{}});async function qr(r,o,a){var s,d,u;if(window.isSecureContext!==!0)throw new Is;if(((s=navigator==null?void 0:navigator.mediaDevices)==null?void 0:s.getUserMedia)===void 0)throw new gn;bl();const m=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});r.srcObject!==void 0?r.srcObject=m:r.mozSrcObject!==void 0?r.mozSrcObject=m:window.URL.createObjectURL?r.src=window.URL.createObjectURL(m):window.webkitURL?r.src=window.webkitURL.createObjectURL(m):r.src=m.id,r.play(),await Promise.race([vn(r,"loadeddata"),Gr(3e3).then(()=>{throw new Ws})]),await Gr(500);const[k]=m.getVideoTracks(),f=(u=(d=k==null?void 0:k.getCapabilities)==null?void 0:d.call(k))!=null?u:{};let $=!1;return a&&f.torch&&(await k.applyConstraints({advanced:[{torch:!0}]}),$=!0),{type:"start",data:{videoEl:r,stream:m,capabilities:f,constraints:o,isTorchOn:$}}}async function Cl(r,{constraints:o,torch:a,restart:s=!1}){Ue=Ue.then(u=>{if(u.type==="start"){const{data:{videoEl:m,stream:k,constraints:f,isTorchOn:$}}=u;return!s&&r===m&&o===f&&a===$?u:Pn(m,k,$).then(()=>qr(r,o,a))}return qr(r,o,a)});const d=await Ue;if(d.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");return d.data.capabilities}async function Pn(r,o,a){r.src="",r.srcObject=null,r.load(),await vn(r,"error");for(const s of o.getTracks())a!=null||await s.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(s),s.stop();return{type:"stop",data:{}}}async function bt(){if(Ue=Ue.then(r=>{if(r.type==="stop")return r;const{data:{videoEl:o,stream:a,isTorchOn:s}}=r;return Pn(o,a,s)}),(await Ue).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const $l=$e({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:o}){const a=r,s=o,d=ne(a.constraints),u=ne(a.formats);je(()=>a.constraints,(W,M)=>{JSON.stringify(W)!==JSON.stringify(M)&&(d.value=W)},{deep:!0}),je(()=>a.formats,(W,M)=>{JSON.stringify(W)!==JSON.stringify(M)&&(u.value=W)},{deep:!0});const m=ne(),k=ne(),f=ne(),$=ne(!1),_=ne(!1);Qr(()=>{_.value=!0}),za(()=>{bt()});const w=Xt(()=>({torch:a.torch,constraints:d.value,shouldStream:_.value&&!a.paused}));je(w,async W=>{const M=f.value;be(M!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const O=m.value;be(O!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const _e=O.getContext("2d");if(be(_e!==null,"if cavnas is defined, canvas 2d context should also be non-null"),W.shouldStream){bt(),$.value=!1;try{const ve=await Cl(M,W);_.value?($.value=!0,s("camera-on",ve)):await bt()}catch(ve){s("error",ve)}}else O.width=M.videoWidth,O.height=M.videoHeight,_e.drawImage(M,0,0,M.videoWidth,M.videoHeight),bt(),$.value=!1,s("camera-off")},{deep:!0}),je(u,W=>{_.value&&Us(W)});const A=Xt(()=>w.value.shouldStream&&$.value);je(A,W=>{if(W){be(m.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),R(m.value),be(k.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),R(k.value);const M=()=>a.track===void 0?500:40;be(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Ns(f.value,{detectHandler:O=>s("detect",O),formats:u.value,locateHandler:L,minDelay:M()})}});const R=W=>{const M=W.getContext("2d");be(M!==null,"canvas 2d context should always be non-null"),M.clearRect(0,0,W.width,W.height)},L=W=>{const M=k.value;be(M!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const O=f.value;if(be(O!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),W.length===0||a.track===void 0)R(M);else{const _e=O.offsetWidth,ve=O.offsetHeight,Le=O.videoWidth,Ve=O.videoHeight,ze=Math.max(_e/Le,ve/Ve),Je=Le*ze,nt=Ve*ze,xt=Je/Le,Tt=nt/Ve,Pt=(_e-Je)/2,Et=(ve-nt)/2,qe=({x:ke,y:ie})=>({x:Math.floor(ke*xt),y:Math.floor(ie*Tt)}),de=({x:ke,y:ie})=>({x:Math.floor(ke+Pt),y:Math.floor(ie+Et)}),Me=W.map(ke=>{const{boundingBox:ie,cornerPoints:Ot}=ke,{x:ot,y:Se}=de(qe({x:ie.x,y:ie.y})),{x:at,y:At}=qe({x:ie.width,y:ie.height});return{...ke,cornerPoints:Ot.map(it=>de(qe(it))),boundingBox:DOMRectReadOnly.fromRect({x:ot,y:Se,width:at,height:At})}});M.width=O.offsetWidth,M.height=O.offsetHeight;const Mt=M.getContext("2d");a.track(Me,Mt)}},I={width:"100%",height:"100%",position:"relative","z-index":"0"},N={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},B={width:"100%",height:"100%","object-fit":"cover"},le=Xt(()=>A.value?B:{...B,visibility:"hidden",position:"absolute"});return(W,M)=>(V(),J("div",{style:I},[b("video",{ref_key:"videoRef",ref:f,style:Ja(le.value),autoplay:"",muted:"",playsinline:""},null,4),qa(b("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:m,style:B},null,512),[[Ya,!A.value]]),b("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:k,style:N},null,512),b("div",{style:N},[Zr(W.$slots,"default")])]))}}),_l={class:"flex max-[800px]:flex-wrap justify-between max-[800px]:h-full gap-y-10 gap-x-6"},kl={key:0},Sl={class:"w-4/12 max-lg:w-5/12 max-[800px]:w-full"},xl={class:"w-full flex flex-col gap-y-2"},Tl={class:"flex justify-between items-center"},Pl={class:"flex items-center gap-x-4 mb-4"},El={key:0},Ml=b("svg",{width:"15px",height:"15px",viewBox:"0 0 24 24",fill:"none"},[b("path",{class:"dark:stroke-white stroke-black",d:"M14 12C14 14.7614 11.7614 17 9 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7H7.5M10 12C10 9.23858 12.2386 7 15 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17H16.5","stroke-width":"2","stroke-linecap":"round"})],-1),Ol=[Ml],Al={key:2},jl=b("svg",{width:"15px",height:"15px",viewBox:"0 0 24 24",fill:"none"},[b("path",{class:"dark:stroke-white stroke-black",d:"M14 12C14 14.7614 11.7614 17 9 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7H7.5M10 12C10 9.23858 12.2386 7 15 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17H16.5","stroke-width":"2","stroke-linecap":"round"})],-1),Dl=[jl],Rl={key:0},Ll={key:1},lu=$e({__name:"storage",setup(r){const o=rr(),a=Re();ne("");const s=ne(Fr[0]),d=ne(),u=ne(null),m=_=>{u.value=_,a.searchGoods=_,a.loadAllListSearch({search:JSON.stringify(a.searchGoods[0].rawValue)}),console.log(a.searchGoods),a.streaming=!1},k=Yr(),f=oi(),$=ai();return je(()=>f.user,_=>{var w,A;((A=(w=f==null?void 0:f.user)==null?void 0:w.role)==null?void 0:A.name_en)==="admin"&&(window.history.length>1?k.push("/base/profile"):k.push("/"))}),je(()=>$.company,_=>{var A;((A=$.company.modules)==null?void 0:A.find(R=>R.name_en==="task.create"))||(window.history.length>1?k.push("/base/profile"):k.push("/"))}),Qr(()=>{d.value=window.innerWidth,a.loadStorageCategoryList()}),Za(()=>{o.path==="/base/storage"&&a.loadAllList()}),(_,w)=>{const A=zi,R=ls,L=ri,I=Kr,N=cs,B=Wa;return V(),J("div",_l,[y(d)<=800?(V(),J("div",kl)):se("",!0),b("div",Sl,[j(A)]),b("div",xl,[j(er,{onScroll:w[2]||(w[2]=Ce(()=>{},["prevent"])),onWheel:w[3]||(w[3]=Ce(()=>{},["prevent"])),onTouch:w[4]||(w[4]=Ce(()=>{},["prevent"]))},{default:D(()=>[j(R,{ref:y(a).scan,onOpenStreamSearch:w[0]||(w[0]=le=>y(a).streaming=!0)},null,512),y(a).streaming?(V(),he(St,{key:0,type:"resize",onShowModal:w[1]||(w[1]=le=>{y(a).streaming=!1,u.value=null})},{default:D(()=>[b("p",null,H(y(u)?JSON.stringify(y(u)[0].rawValue):"not working"),1),j(y($l),{onDetect:m,formats:["qr_code","aztec","code_128","code_39","code_93","databar","codabar","linear_codes","micro_qr_code","databar_expanded","ean_13","ean_8","itf"]})]),_:1})):se("",!0)]),_:1}),j(er,{class:"w-full"},{default:D(()=>[b("div",Tl,[b("div",Pl,[j(Kt,{"breadcrumb-link":y(o).path===`/base/storage/${y(o).params.slug}`||y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?"/base/storage":""},{default:D(()=>[oe(H(_.$t("Главная")),1)]),_:1},8,["breadcrumb-link"]),y(o).path===`/base/storage/${y(o).params.slug}`||y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?(V(),J("div",El,Ol)):se("",!0),y(o).path===`/base/storage/${y(o).params.slug}`||y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?(V(),he(Kt,{key:1,"breadcrumb-link":y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?`/base/storage/${y(o).params.slug}`:""},{default:D(()=>[oe(H(y(a).currentCategory.name?y(a).currentCategory.name:y(a).storageItem.name),1)]),_:1},8,["breadcrumb-link"])):se("",!0),y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?(V(),J("div",Al,Dl)):se("",!0),y(o).path===`/base/storage/${y(o).params.slug}/${y(o).params.nestedSlug}`?(V(),he(Kt,{key:3},{default:D(()=>[oe(H(y(o).params.nestedSlug),1)]),_:1})):se("",!0)]),b("div",null,[j(I,{modelValue:y(s),"onUpdate:modelValue":w[5]||(w[5]=le=>_t(s)?s.value=le:null),options:y(Fr)},{label:D(()=>[j(L,{name:y(s).icon,class:"w-4 h-4"},null,8,["name"]),oe(" "+H(y(s).label),1)]),_:1},8,["modelValue","options"])])]),y(o).params.slug?(V(),J("div",Ll,[j(B)])):(V(),J("div",Rl,[j(N)]))]),_:1})])])}}});export{lu as default};
