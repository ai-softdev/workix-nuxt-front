import{p as s}from"./entry.Dy8EJx_g.js";import{a,n as o,l as r}from"./nuxt-storage.LTSgK-Sl.js";import{a as g}from"./swiper-vue.CGVHF6NK.js";const n=s("storage",{state:()=>({isActive:!1,createCategory:!1,storageCategoryList:[],storageHomeAllList:[],storageItem:{},currentCategory:{},contextMenuCategory:!1,scan:g(null),searchGoods:"",searchCategory:"",streaming:!1}),getters:{getStorageCategoryList:e=>e.storageCategoryList,getStorageSubCategory:e=>e.currentCategory,getStorageHomeAllList:e=>e.storageHomeAllList,getStorageItem:e=>e.storageItem},actions:{async loadStorageCategoryList(){await a.get("store/category/list",{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(e=>{this.storageCategoryList=e.data})},async loadStorageSubCategory(e){await a.get(`store/subcategory/${e.slug}?search=${e.search}`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{this.currentCategory=t.data}).catch(t=>{})},async loadStorageCategorySearch(e){await a.get(`store/category/list?name=${e.query}`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{this.storageCategoryList=t.data})},async loadAllList(){await a.get("store/item/list",{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(e=>{this.storageHomeAllList=e.data})},async loadAllListSearch(e){await a.get(`store/item/list?search=${e.search}`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{this.storageHomeAllList=t.data})},async loadItem(e){await a.get(`store/item/${e.itemSlug}`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{this.storageItem=t.data})},async createStorageCategoryOrSubcategory(e){await a.post(`store/${e.createType}/create`,{name:e.name,category_id:e.createType==="subcategory"?e.category_id:null},{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{this.loadStorageCategoryList(),this.createCategory=!1,r.success("Успешно создано",{autoClose:1500,theme:"auto"})}).catch(t=>{r.error("Возникла ошибка при создании",{autoClose:1500,theme:"auto"})})},async updateStorageElem(e){await a.patch(`store/${e.updateType}/update`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{}).catch(t=>{})},async deleteStorageElem(e){await a.delete(`store/${e.deleteType}/delete/${e.id}`,{headers:{Authorization:`Bearer ${o.localStorage.getData("token")}`}}).then(t=>{["subcategory","category"].includes(e.deleteType)&&this.loadStorageCategoryList(),r.success("Успешно удалён",{autoClose:1500,theme:"auto"})})}}});export{n as u};
