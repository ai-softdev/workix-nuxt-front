import{d as i}from"./entry.B5Wr0zqa.js";import{a as o,n as a,l as s}from"./nuxt-storage.CgJyI38a.js";import{a as c}from"./swiper-vue.yO-n0JsZ.js";const h=i("document-store",{state:()=>({documentList:{},documentItem:{},userList:c({}),createChainForm:[],showDepartment:[],showUsersNode:[],chainSchedule:{},createForm:{title:"",description:"",file:"",src:"",receiver_id:""},draggableUser:null,showContext:null,showContextDepartment:null,showWarn:!1,showCreateDoc:!1,showRejectedWarn:!1}),getters:{get_all_document:e=>e.documentList},actions:{async docSign(e){await o.patch(`document/sign/${e.id}`,{second_password:e.second_password},{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Доступ разрешен",{autoClose:1e3,theme:"auto"})})},async loadAllDocument(e){await o.get(`document/list${e.type?"/"+e.type:""}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{this.documentList=t.data})},async loadDocument(e){await o.get(`document/${e.slug}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{this.documentItem=t.data})},async docCreate(e){let t=new FormData;t.set("title",e.title),t.set("description",e.description),t.set("receiver_id",e.receiver_id),typeof e.file!="string"&&t.set("file",e.file),await o.post("document/create",t,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(n=>{s.success("Документ создан",{autoClose:1e3,theme:"auto"}),this.loadAllDocument({page:1,limit:10}),this.showCreateDoc=!1})},async setUsers(e,t){await o.post(`document/set-users/${e.slug}`,{participants:e.form},{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(n=>{t.push(`/base/documents/signification/${e.slug}`).then(r=>{s.success("Цепь запущена!",{autoClose:1e3,theme:"auto"})})})},async docUpdate(e){new FormData,await o.patch(`document/update/${e.id}`,{title:e.title,description:e.description,users:e.users},{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Успешный запуск",{autoClose:1e3,theme:"auto"})})},async documentSign(e,t){await o.patch(`document/sign/${e.slug}`,e.data,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(n=>{t.push("/base/documents").then(r=>{s.success("Успешная подпись!",{autoClose:1e3,theme:"auto"})})})},async docDelete(e){await o.delete(`document/delete/${e.slug}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Успешно удалён",{theme:"auto",autoClose:1e3})})}}});export{h as u};
