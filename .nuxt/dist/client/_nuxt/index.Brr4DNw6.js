import{c as C,e as k}from"./entry.Ou-ggK__.js";import{u as j}from"./index.6W5X-fyu.js";import{j as $,N as r,O as d,Z as t,_ as n,a2 as x,u as m,a as V,L as u,V as p,P as y,$ as f,a6 as I,b as L,J as w,a3 as b}from"./swiper-vue.D8OdYOtj.js";import{_}from"./TheButton.vue.rbsDzk10.js";import{_ as S}from"./TheModal.vue.B87978z5.js";import{_ as D}from"./TheTextContent.vue.m2iseIPA.js";import{u as v}from"./companies.BfkXz900.js";import{T}from"./TaskContentCreateElems.xymZ3oxp.js";import{_ as B}from"./TheInput.vue.B9n9qFKm.js";import{u as g}from"./auth.B7mE14iI.js";import{T as N}from"./TheSceleton.CBEpmsCj.js";import{u as M}from"./chat.BVxf5_J-.js";import"./nuxt-storage.jjXK-e5k.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const E={class:"items-center gap-x-4 max-lg:w-full max-md:justify-center font-medium max-sm:w-full max-sm:text-center mb-4 pb-4 border-b"},F={class:"flex flex-col gap-4"},O={class:"flex items-center justify-between"},R={class:"text-sm dark:text-gray-400"},G={key:0,class:"mt-2"},J={class:"flex items-center justify-between"},P={class:"text-sm dark:text-gray-400"},U={key:0,class:"mt-2"},Z=$({__name:"DepartmentContentLists",props:{departmentItem:{type:Object,default:()=>{}}},setup(s){const i=C();return(o,a)=>(r(),d("div",{onClick:a[0]||(a[0]=e=>m(i).push(`/base/companies/department/${s.departmentItem.id}`)),class:"transition-all px-5 py-6 rounded-3xl cursor-pointer border bg-white shadow-cards"},[t("div",E,n(s.departmentItem.name),1),t("div",F,[t("div",O,[t("p",R,n(o.$t("Руководитель")),1),s.departmentItem.department_director_name?(r(),d("p",G,n(s.departmentItem.department_director_name||"---"),1)):x("",!0)]),t("div",J,[t("p",P,n(o.$t("Заместитель")),1),s.departmentItem.vice_department_director_name?(r(),d("p",U,n(s.departmentItem.vice_department_director_name||"---"),1)):x("",!0)])])]))}}),q={class:"w-full"},z={class:"flex justify-center gap-x-10"},A=$({__name:"DepartmentCreate",props:{showCreate:{type:Boolean,default:!1}},setup(s){const i=v(),o=V({name:"",email:"",address:""});return(a,e)=>(r(),d("div",null,[u(_,{class:"w-full mr-auto !rounded-full !bg-golden !text-black",type:"signIn",onClick:e[0]||(e[0]=l=>s.showCreate=!0)},{default:p(()=>[f(" + "+n(a.$t("Создать департамент")),1)]),_:1}),s.showCreate?(r(),y(S,{key:0,onShowModal:e[5]||(e[5]=l=>s.showCreate=!s.showCreate)},{default:p(()=>[u(D,null,{default:p(()=>[f(n(a.$t("Создать департамент")),1)]),_:1}),t("form",{onSubmit:e[4]||(e[4]=I(l=>{m(i).createDepartment({department:m(o)}),s.showCreate=!1,m(o).name=" "},["prevent"]))},[u(T,null,{default:p(()=>[t("div",q,[u(B,{type:"text",label:a.$t("Наименование"),modelValue:m(o).name,"onUpdate:modelValue":e[1]||(e[1]=l=>m(o).name=l)},null,8,["label","modelValue"])])]),_:1}),t("div",z,[u(_,{class:"px-10 rounded-full py-2",t:"button",type:"danger",onClick:e[2]||(e[2]=l=>s.showCreate=!1)},{default:p(()=>[f(n(a.$t("Отменна")),1)]),_:1}),u(_,{class:"px-10 rounded-full py-2 bg-blueSemiLight",t:"submit",onClick:e[3]||(e[3]=l=>m(i).loadDepartmentList())},{default:p(()=>[f(n(a.$t("Создать")),1)]),_:1})])],32)]),_:1})):x("",!0)]))}}),H={class:"flex items-center justify-between"},K={class:"dark:text-white text-3xl font-bold mb-6"},Q={class:"flex relative items-center justify-between w-full gap-x-10 mt-4"},W={class:"text-mediumGray w-6/12"},X={class:"mt-8"},Y={key:0,class:"flex w-full gap-y-4 gap-x-4 flex-wrap"},ee={key:1,class:"grid grid-cols-4 gap-5"},te={class:"mt-6 flex items-center justify-end gap-1"},se={class:"font-bold"},$e=$({__name:"index",props:{formTitle:String},setup(s){M(),g();const i=v();i.loadDepartmentList();const o=k(),a=g();return L(()=>a.user,e=>{var l,c;((c=(l=a==null?void 0:a.user)==null?void 0:l.role)==null?void 0:c.name_en)==="admin"&&(window.history.length>1?o.push("/base/profile"):o.push("/"))}),j({title:"Департаменты",description:"Список департаментов компании"}),(e,l)=>{var c;return r(),d("div",null,[t("div",H,[t("p",K,n(e.$t("Страница департаментов компании")),1),u(A,{class:"w-3/12 max-md:w-9/12 max-md:mb-4 text-sm"})]),t("div",Q,[t("p",W,n(e.$t("Кликните на отдел, чтобы посмотреть доступные должности.")),1)]),t("div",X,[m(i).get_all_department.results?(r(),d("div",ee,[(r(!0),d(w,null,b((c=m(i))==null?void 0:c.get_all_department.results,h=>(r(),y(Z,{"department-item":h},null,8,["department-item"]))),256))])):(r(),d("div",Y,[(r(),d(w,null,b(6,h=>u(N,{"border-radius":"10px",width:"30%",height:"100px"})),64))])),t("div",te,[t("p",null,n(e.$t("Количество департаментов"))+": ",1),t("p",se,n(m(i).get_all_department.count),1)])])])}}});export{$e as default};
