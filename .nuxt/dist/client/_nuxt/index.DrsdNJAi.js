import{e as v}from"./entry.BzAtAm_p.js";import{u as k}from"./index.BW7u9jAu.js";import{_ as w}from"./TheTextContent.vue.DJ99356g.js";import{_ as C}from"./nuxt-link.vdwnkbCB.js";import{j as _,N as d,O as c,L as t,V as l,Z as i,_ as m,J as V,a2 as O,u,$ as p,P as $,a5 as L,a as N,a6 as B,a4 as S,b as g}from"./swiper-vue.yO-n0JsZ.js";import{u as y}from"./objects.B_3Si5rd.js";import{_ as M}from"./TheSearch.vue.CMnXhBnJ.js";import{_ as T}from"./TheFilter.vue.Ctn85OA0.js";import{_ as h}from"./TheButton.vue.D1qj47gJ.js";import{_ as U}from"./TheModal.vue.CfyleZWN.js";import{_ as E}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{_ as x}from"./TheInput.vue.7qlRdbvh.js";import{u as F}from"./auth.CBOA74pJ.js";import{u as R}from"./companies.CsHqSRw_.js";import"./nuxt-storage.CgJyI38a.js";const A=""+globalThis.__publicAssetsURL("img/logo-company.png"),D=i("img",{class:"w-[50px] h-[50px]",src:A,alt:""},null,-1),J={class:"tracking-widest"},P=_({__name:"ObjectList",props:{object:{type:Object,default:()=>{}}},setup(o){return(n,s)=>{const a=C;return d(),c("div",null,[t(a,{to:`/base/objects/${o.object.id}`,class:"transition-all cursor-pointer dark:bg-gray-400 dark:hover:bg-gray-300 dark:shadow-none shadow-xl hover:bg-gray-100 dark:border-none border-t border-t-gray-100 p-4 rounded-xl flex items-center gap-x-4"},{default:l(()=>[D,i("h1",J,m(o.object.name),1)]),_:1},8,["to"])])}}}),Z={class:"flex gap-x-10"},q={class:"w-full flex flex-col gap-y-4"},z={class:"dark:border-t dark:border-t-gray-500 border-t border-t-gray-100 dark:shadow-gray-500 shadow-md w-4/12 rounded-lg p-2"},G=i("div",null,null,-1),H=_({__name:"ObjectContent",setup(o){const n=y();return n.loadObjectList(),(s,a)=>(d(),c("div",Z,[i("div",q,[(d(!0),c(V,null,O(u(n).get_objects.results,e=>(d(),$(P,{object:e},null,8,["object"]))),256))]),i("div",z,[t(w,null,{default:l(()=>[p(m(s.$t("Информация по объектам")),1)]),_:1}),G])]))}}),I={},K={class:"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full"};function Q(o,n){return d(),c("div",K,[L(o.$slots,"default")])}const b=E(I,[["render",Q]]),W={class:"w-6/12"},X={class:"w-6/12"},Y=_({__name:"ObjectCreate",props:{showCreate:{type:Boolean,default:!1}},setup(o){const n=y(),s=N({name:"",description:"",email:"",files:"",address:""});return(a,e)=>(d(),c("div",null,[i("button",{class:"font-bold tracking-widest text-white bg-blue-400 mx-auto py-4 rounded-xl w-full px-4 text-sm",onClick:e[0]||(e[0]=r=>o.showCreate=!0)},m(a.$t("Создать объект")),1),o.showCreate?(d(),$(U,{key:0,onShowModal:e[5]||(e[5]=r=>o.showCreate=!o.showCreate)},{default:l(()=>[t(w,null,{default:l(()=>[p(m(a.$t("Создание объекта")),1)]),_:1}),i("form",{onSubmit:e[4]||(e[4]=B(r=>u(n).createObject(u(s)),["prevent"]))},[t(b,null,{default:l(()=>[i("div",W,[t(x,{type:"text",label:a.$t("Наименование"),modelValue:u(s).name,"onUpdate:modelValue":e[1]||(e[1]=r=>u(s).name=r)},null,8,["label","modelValue"])])]),_:1}),t(b,{class:"flex-wrap"},{default:l(()=>[i("div",X,[t(x,{type:"text",label:a.$t("Адрес"),modelValue:u(s).address,"onUpdate:modelValue":e[2]||(e[2]=r=>u(s).address=r)},null,8,["label","modelValue"])])]),_:1}),t(b,null,{default:l(()=>[t(h,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:e[3]||(e[3]=r=>o.showCreate=!1)},{default:l(()=>[p(m(a.$t("Отменить")),1)]),_:1}),t(h,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:l(()=>[p(m(a.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1})):S("",!0)]))}}),ee={class:"flex items-center gap-x-6"},be=_({__name:"index",setup(o){const n=v(),s=F(),a=R();return g(()=>s.user,e=>{var r,f;((f=(r=s==null?void 0:s.user)==null?void 0:r.role)==null?void 0:f.name_en)==="admin"&&(window.history.length>1?n.push("/base/profile"):n.push("/"))}),g(()=>a.company,e=>{var f;((f=a.company.modules)==null?void 0:f.find(j=>j.name_en==="objects"))||(window.history.length>1?n.push("/base/profile"):n.push("/"))}),k({title:"Объекты",description:"Объекты компании"}),(e,r)=>(d(),c("div",null,[t(w,{"text-type":"pageTitle"},{default:l(()=>[p(m(e.$t("Страница с объектами")),1)]),_:1}),i("div",ee,[t(M,{class:"w-8/12"}),t(T),t(Y,{class:"w-2/12 ml-auto"})]),t(H)]))}});export{be as default};
