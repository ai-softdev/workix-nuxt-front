import{g as _,q as v,o as i,c as d,a as e,t as a,h as l,l as C,b as u,w as p,j as b,i as k,d as f,x as j,J as V,A as D,F as g,r as h}from"./entry.Dos5mvIN.js";import{u as I}from"./index.da1fIcdO.js";import{_ as x}from"./TheButton.vue.gJpUNod2.js";import{_ as S}from"./TheModal.vue.D3hlHb3t.js";import{u as y}from"./companies.CkXOzTuB.js";import{T}from"./TaskContentCreateElems.D5Jtdb2M.js";import{_ as B}from"./TheInput.vue.CR5iM2Pr.js";import{u as $}from"./auth.aqacddpH.js";import{T as L}from"./TheSceleton.fdqlrxRf.js";import{u as N}from"./chat.DdCdJX2D.js";import"./nuxt-storage.Df5leMsQ.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const F={class:"items-center gap-x-4 max-lg:w-full max-md:justify-center font-medium max-sm:w-full max-sm:text-center mb-4 pb-4 border-b"},G={class:"flex flex-col gap-4"},M={class:"flex items-center justify-between"},E={class:"text-sm dark:text-gray-400"},R={class:"mt-2 text-mediumGray text-sm"},q={class:"flex items-center justify-between"},A={class:"text-sm dark:text-gray-400"},J={class:"mt-2 text-mediumGray text-sm"},O=_({__name:"DepartmentContentLists",props:{departmentItem:{type:Object,default:()=>{}}},setup(n){const m=v();return(r,s)=>(i(),d("div",{onClick:s[0]||(s[0]=t=>l(m).push(`/base/companies/department/${n.departmentItem.id}`)),class:"transition-all px-5 py-6 rounded-3xl cursor-pointer border bg-white shadow-cards"},[e("div",F,a(n.departmentItem.name),1),e("div",G,[e("div",M,[e("p",E,a(r.$t("Руководитель")),1),e("p",R,a(n.departmentItem.department_director_name||r.$t("Отсутствует")),1)]),e("div",q,[e("p",A,a(r.$t("Заместитель")),1),e("p",J,a(n.departmentItem.vice_department_director_name||r.$t("Отсутствует")),1)])])]))}}),U={class:"text-center font-bold max-sm:w-9/12 max-sm:mx-auto"},z={class:"w-full"},H={class:"flex flex-wrap gap-y-3 items-center justify-center gap-x-10 max-sm:flex-col"},K=_({__name:"DepartmentCreate",props:{showCreate:{type:Boolean,default:!1}},setup(n){const m=y(),r=C({name:"",email:"",address:""});return(s,t)=>(i(),d("div",null,[u(x,{class:"w-full mr-auto !rounded-full !bg-golden !text-black",type:"signIn",onClick:t[0]||(t[0]=o=>n.showCreate=!0)},{default:p(()=>[f(" + "+a(s.$t("Создать департамент")),1)]),_:1}),n.showCreate?(i(),b(S,{key:0,onShowModal:t[5]||(t[5]=o=>n.showCreate=!n.showCreate)},{default:p(()=>[e("p",U,a(s.$t("Создать департамент")),1),e("form",{onSubmit:t[4]||(t[4]=j(o=>{l(m).createDepartment({department:l(r)}),n.showCreate=!1,l(r).name=" "},["prevent"]))},[u(T,null,{default:p(()=>[e("div",z,[u(B,{type:"text",label:s.$t("Наименование"),modelValue:l(r).name,"onUpdate:modelValue":t[1]||(t[1]=o=>l(r).name=o)},null,8,["label","modelValue"])])]),_:1}),e("div",H,[u(x,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!bg-gray-200 gap-3 py-2 !bg-porcelain !border transition-all ease-in-out duration-300",t:"button",onClick:t[2]||(t[2]=o=>n.showCreate=!1)},{default:p(()=>[f(a(s.$t("Отменить")),1)]),_:1}),u(x,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!shadow-golden gap-3 py-2 !bg-golden !border transition-all ease-in-out duration-300",t:"submit",type:"success",onClick:t[3]||(t[3]=o=>l(m).loadDepartmentList())},{default:p(()=>[f(a(s.$t("Создать")),1)]),_:1})])],32)]),_:1})):k("",!0)]))}}),P={class:"flex items-center justify-between max-[786px]:flex-col max-[786px]:items-start"},Q={class:"dark:text-white text-3xl font-bold mb-6"},W={class:"flex relative items-center justify-between w-full gap-x-10 mt-4"},X={class:"text-mediumGray w-6/12 max-[786px]:w-full"},Y={class:"mt-8"},Z={key:0,class:"flex w-full gap-y-4 gap-x-4 flex-wrap"},ee={key:1,class:"grid grid-cols-4 max-[1250px]:grid-cols-3 max-[810px]:grid-cols-2 max-[636px]:grid-cols-1 gap-5"},te={class:"mt-6 flex items-center justify-end gap-1"},se={class:"font-bold"},xe=_({__name:"index",props:{formTitle:String},setup(n){N(),$();const m=y();m.loadDepartmentList();const r=V(),s=$();return D(()=>s.user,t=>{var o,c;((c=(o=s==null?void 0:s.user)==null?void 0:o.role)==null?void 0:c.name_en)==="admin"&&(window.history.length>1?r.push("/base/profile"):r.push("/"))}),I({title:"Департаменты",description:"Список департаментов компании"}),(t,o)=>{var c;return i(),d("div",null,[e("div",P,[e("p",Q,a(t.$t("Страница департаментов компании")),1),u(K,{class:"w-3/12 max-md:w-9/12 max-md:mb-4 text-sm"})]),e("div",W,[e("p",X,a(t.$t("Кликните на отдел, чтобы посмотреть доступные должности.")),1)]),e("div",Y,[l(m).get_all_department.results?(i(),d("div",ee,[(i(!0),d(g,null,h((c=l(m))==null?void 0:c.get_all_department.results,w=>(i(),b(O,{"department-item":w},null,8,["department-item"]))),256))])):(i(),d("div",Z,[(i(),d(g,null,h(6,w=>u(L,{"border-radius":"10px",width:"30%",height:"100px"})),64))])),e("div",te,[e("p",null,a(t.$t("Количество департаментов"))+": ",1),e("p",se,a(l(m).get_all_department.count),1)])])])}}});export{xe as default};
