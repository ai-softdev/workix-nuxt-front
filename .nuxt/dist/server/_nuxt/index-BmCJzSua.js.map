{"version":3,"file":"index-BmCJzSua.js","sources":["../../../../components/Objects/ObjectContent.vue","../../../../components/Objects/ObjectUI/ObjectContentCreateElems.vue","../../../../components/Objects/ObjectCreate.vue","../../../../pages/base/objects/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport ObjectList from \"~/components/Objects/ObjectList.vue\";\nimport {useObjects} from \"~/stores/objects\";\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\nconst objects = useObjects()\nobjects.loadObjectList()\n</script>\n\n<template>\n  <div class=\"flex gap-x-10\">\n\n    <div class=\"w-full flex flex-col gap-y-4\">\n      <ObjectList v-for=\"object in objects.get_objects.results\" :object=\"object\" />\n    </div>\n    <div class=\"dark:border-t dark:border-t-gray-500 border-t border-t-gray-100 dark:shadow-gray-500 shadow-md w-4/12 rounded-lg p-2\">\n      <TheTextContent>{{$t('Информация по объектам')}}</TheTextContent>\n      <div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup lang=\"ts\">\n\n</script>\n\n<template>\n  <div class=\"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full\">\n    <slot/>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup lang=\"ts\">\nimport TheButton from \"~/components/UI/TheButton.vue\";\nimport TheModal from \"~/components/UI/TheModal.vue\";\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\nimport ObjectContentCreateElems from \"~/components/Objects/ObjectUI/ObjectContentCreateElems.vue\";\nimport TheInput from \"~/components/UI/TheInput.vue\";\nimport {useObjects} from \"~/stores/objects\";\nimport {useAuthStore} from \"~/stores/auth\";\n\nconst objects = useObjects()\nconst currentUser = useAuthStore()\nconst createForm = ref({\n  name: '',\n  files: '',\n  address: ''\n})\n\ndefineProps({\n  showCreate: {\n    type: Boolean,\n    default: false,\n  }\n})\n</script>\n\n<template>\n  <div>\n    <button v-if=\"currentUser.user.permissions?.find(e=>e.name_en === 'object.create')\" class=\"font-bold tracking-widest text-white bg-blue-400 mx-auto py-4 rounded-xl w-full px-4 text-sm\"\n            @click=\"showCreate = true\">{{ $t('Создать объект') }}\n    </button>\n    <TheModal v-if=\"showCreate\" @showModal=\"showCreate = !showCreate\">\n      <TheTextContent>{{ $t('Создание объекта') }}</TheTextContent>\n      <form @submit.prevent=\"objects.createObject(createForm)\">\n        <ObjectContentCreateElems>\n          <div class=\"w-6/12\">\n            <TheInput type=\"text\" :label=\"$t('Наименование')\" v-model=\"createForm.name\"></TheInput>\n          </div>\n        </ObjectContentCreateElems>\n        <ObjectContentCreateElems class=\"flex-wrap\">\n          <div class=\"w-6/12\">\n            <TheInput type=\"text\" :label=\"$t('Адрес')\" v-model=\"createForm.address\"></TheInput>\n          </div>\n        </ObjectContentCreateElems>\n        <ObjectContentCreateElems>\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"button\" type=\"danger\" @click=\"showCreate = false\">\n            {{ $t('Отменить')\n            }}\n          </TheButton>\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"submit\" type=\"success\">{{ $t('Создать') }}</TheButton>\n        </ObjectContentCreateElems>\n      </form>\n\n    </TheModal>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup lang=\"ts\">\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport ObjectContent from \"~/components/Objects/ObjectContent.vue\";\r\nimport TheSearch from \"~/components/UI/TheSearch.vue\";\r\nimport TheFilter from \"~/components/UI/TheFilter.vue\";\r\nimport ObjectCreate from \"~/components/Objects/ObjectCreate.vue\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\nimport {useCompanies} from \"~/stores/companies\";\r\n\r\nconst router = useRouter()\r\nconst loadAuthStore = useAuthStore()\r\nconst company = useCompanies()\r\n\r\nwatch(() => loadAuthStore.user, (newValue) => {\r\n  if(loadAuthStore?.user?.role?.name_en === 'admin'){\r\n    if (window.history.length > 1) {\r\n      router.push('/base/profile');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  }\r\n})\r\nwatch(() => company.company, (newValue) => {\r\n  let permission = company.company.modules?.find(item => item.name_en === 'objects')\r\n  if(!permission){\r\n    if (window.history.length > 1) {\r\n      router.push('/base/profile');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  }\r\n})\r\n\r\nuseSeoMeta({\r\n  title: 'Объекты',\r\n  description: 'Объекты компании'\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <TheTextContent :text-type=\"'pageTitle'\">\r\n      {{ $t('Страница с объектами') }}\r\n    </TheTextContent>\r\n    <div class=\"flex items-center gap-x-6\">\r\n      <TheSearch class=\"w-8/12\"></TheSearch>\r\n      <TheFilter></TheFilter>\r\n      <ObjectCreate class=\"w-2/12 ml-auto\"></ObjectCreate>\r\n    </div>\r\n    <ObjectContent />\r\n  </div>\r\n\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderSlot"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,UAAM,UAAU;AAChB,YAAQ,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLvB,SAAA,eAAA,MAAA,OAAA,SAKY;AALZ,QAAA,OAAAA,eAAAC,WAAA,EAAA,OAAA,gFAAA,MAAA,CAAA,CAAA,GAAA;AAAAC,gBAAA,KAAA,QAAA,WAAA,CAAA,GAAA,MAAA,OAAA,OAAA;;;;;;;;;;;;;;;;;;;;ACSA,UAAM,UAAU;AAChB,UAAM,cAAc;AACpB,UAAM,aAAa,IAAI;AAAA,MACrB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,IAAA,CACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACND,UAAM,SAAS;AACf,UAAM,gBAAgB;AACtB,UAAM,UAAU;AAEhB,UAAM,MAAM,cAAc,MAAM,CAAC,aAAa;;AAC5C,YAAG,0DAAe,SAAf,mBAAqB,SAArB,mBAA2B,aAAY,SAAQ;AAC5C,YAAA,SAAO,QAAQ,SAAS,GAAG;AAC7B,iBAAO,KAAK,eAAe;AAAA,QAAA,OACtB;AACL,iBAAO,KAAK,GAAG;AAAA,QACjB;AAAA,MACF;AAAA,IAAA,CACD;AACD,UAAM,MAAM,QAAQ,SAAS,CAAC,aAAa;;AACrC,UAAA,cAAa,aAAQ,QAAQ,YAAhB,mBAAyB,KAAK,CAAQ,SAAA,KAAK,YAAY;AACxE,UAAG,CAAC,YAAW;AACT,YAAA,SAAO,QAAQ,SAAS,GAAG;AAC7B,iBAAO,KAAK,eAAe;AAAA,QAAA,OACtB;AACL,iBAAO,KAAK,GAAG;AAAA,QACjB;AAAA,MACF;AAAA,IAAA,CACD;AAEU,eAAA;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,IAAA,CACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}