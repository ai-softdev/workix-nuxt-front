{"version":3,"file":"index-BIT78snN.js","sources":["../../../../components/User/UserUI/UserContentCreateElems.vue","../../../../components/User/UserCreate.vue","../../../../components/User/UserContentList.vue","../../../../components/User/UserContent.vue","../../../../pages/base/users/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\n\r\n</script>\r\n\r\n<template>\r\n<div class=\"flex max-lg:flex-wrap justify-center gap-x-10 my-10 mx-auto w-full\">\r\n  <slot/>\r\n</div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup>\r\nimport TheButton from \"~/components/UI/TheButton.vue\";\r\nimport TheInput from \"~/components/UI/TheInput.vue\";\r\nimport TheModal from \"~/components/UI/TheModal.vue\";\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\"\r\nimport UserContentCreateElems from \"~/components/User/UserUI/UserContentCreateElems.vue\";\r\n\r\nimport {useUserStore} from \"~/stores/users\";\r\nimport {useCompanies} from \"~/stores/companies\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\n\r\n\r\nimport VueDatePicker from \"@vuepic/vue-datepicker\";\r\n\r\nconst loadCurrentUser = useAuthStore()\r\nconst company = useCompanies()\r\nconst userList = useUserStore()\r\nconst createForm = ref({\r\n  email: '',\r\n  first_name: '',\r\n  last_name: '',\r\n  patronymic: '',\r\n  password: '',\r\n  phone: '',\r\n  photo: '',\r\n  position: '',\r\n  date_of_birth: new Date().toDateString(),\r\n  company_id: Number(),\r\n  department_id: Number(),\r\n  role_id: Number(),\r\n  permissions: {}\r\n})\r\n\r\nfunction loads() {\r\n  userList.loadPositionList()\r\n  userList.loadUserList()\r\n  company.loadDepartmentList();\r\n}\r\n\r\ndefineProps({\r\n  showCreateUser: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <TheButton class=\"max-md:w-full w-full px-4 text-sm\" type=\"signIn\" v-if=\"loadCurrentUser.current_user.permissions\"\r\n               @click=\"showCreateUser = true; loads(); loadCurrentUser.user.role?.name_en === 'admin' ? company.loadCompanyList({page: 1, limit: 1000, query: ''}) : ''\">\r\n      {{ $t('Создать пользователя') }}\r\n    </TheButton>\r\n    <TheModal v-if=\"showCreateUser\"\r\n              @showModal=\"showCreateUser = !showCreateUser; !showCreateUser ? createForm = {} : createForm = {} \"\r\n              :show-create-user=\"showCreateUser\">\r\n      <TheTextContent>{{ $t('Создание пользователя') }}</TheTextContent>\r\n      <form enctype=\"multipart/form-data\"\r\n            @submit.prevent=\"loadCurrentUser.user.role?.name_en === 'admin' ? userList.createAdmin(createForm) : userList.createUser(createForm)\">\r\n        <UserContentCreateElems>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <TheInput type=\"text\" :label=\"$t('Имя')\" v-model=\"createForm.first_name\"/>\r\n          </div>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <TheInput type=\"text\" :label=\"$t('Фамилия')\" v-model=\"createForm.last_name\"/>\r\n          </div>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <TheInput type=\"text\" :label=\"$t('Отчество')\" v-model=\"createForm.patronymic\"/>\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <TheInput type=\"text\" label=\"Email\" v-model=\"createForm.email\"/>\r\n          </div>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <TheInput type=\"password\" :label=\"$t('Пароль')\" v-model=\"createForm.password\"/>\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <div class=\"w-6/12 max-lg:w-full flex flex-col\">\r\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Дата рождения') }}</p>\r\n            <VueDatePicker v-model=\"createForm.date_of_birth\" :select-text=\"$t('Выбрать')\"\r\n                           :cancel-text=\"$t('Отменить')\" placeholder=\"Start Typing ...\" text-input\r\n                           class=\"w-full max-lg:hidden rounded-lg p-2 dark:border-none mx-auto outline-semiCyan outline-1\"\r\n                           auto-apply\r\n                           multi-calendars-solo/>\r\n            <input type=\"date\" v-model=\"createForm.date_of_birth\"\r\n                   class=\"max-lg:block border outline-semiCyan dark:outline-none outline-1 dark:border-none hidden p-4 dark:bg-gray-300 dark:text-black mb-4 rounded-lg\">\r\n          </div>\r\n          <div class=\"w-6/12 flex flex-col max-lg:w-full gap-y-1\">\r\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Номер телефона') }}</p>\r\n            <TheInput type=\"tel\" class=\"w-full rounded-lg p-2 outline-1\"\r\n                      id=\"phone\"\r\n                      placeholder=\"+998 (__) ___-__-__\"\r\n                      v-model=\"createForm.phone\"\r\n            />\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <div class=\"w-6/12 flex flex-col max-lg:w-full\">\r\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Фото') }}</p>\r\n            <label class=\"cursor-pointer hover:bg-semiCyan rounded-lg border-dashed border p-4 transition-all mt-2\">\r\n              <input type=\"file\" name=\"file\" :label=\"'Фото'\" class=\"dark:text-white cursor-pointer\"\r\n                     @input=\"createForm.photo = $event.target.files[0]\">\r\n            </label>\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <div class=\"w-6/12 max-lg:w-full\">\r\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Должность') }}</p>\r\n            <TheInput v-if=\"!userList?.get_position_list\" type=\"text\" name=\"text\" :label=\"'Должность'\" class=\"dark:text-white cursor-pointer\" v-model=\"createForm.position\"/>\r\n            <select v-else type=\"text\" v-model=\"createForm.position\" :modelValue=\"createForm.position\"\r\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black\">\r\n              <option v-for=\"position in userList?.get_position_list\" :value=\"position.name\">{{ position.name }}</option>\r\n            </select>\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <div class=\"w-full\">\r\n            <p v-if=\"loadCurrentUser.user.role.name_en === 'admin'\"\r\n               class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Компании') }}</p>\r\n            <p v-else class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Компания') }}</p>\r\n            <select type=\"text\" v-model=\"createForm.company_id\"\r\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black\"\r\n                    v-if=\"loadCurrentUser?.user.role.name_en === 'admin'\">\r\n              <option class=\"text-black\" v-for=\"companyItem in company?.get_all_company?.results\"\r\n                      :value=\"companyItem.id\">\r\n                {{ companyItem.name }}\r\n              </option>\r\n            </select>\r\n            <div v-else-if=\"loadCurrentUser.user.role.name_en === 'company_admin'\">\r\n              <p class=\"text-md dark:text-white tracking-widest mb-2\">{{ loadCurrentUser.user.company }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"w-full\" v-if=\"loadCurrentUser.user.role.name_en === 'company_admin'\">\r\n            <p class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Отдел') }}</p>\r\n            <select type=\"text\" v-model=\"createForm.department_id\"\r\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black\">\r\n              <option v-for=\"department in company?.get_all_department.results\" :value=\"department.id\">\r\n                {{ department.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </UserContentCreateElems>\r\n        <UserContentCreateElems>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"button\" type=\"danger\" @click=\"showCreateUser = false\">\r\n            {{ $t('Отменить') }}\r\n          </TheButton>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"submit\" type=\"success\">\r\n            {{ $t('Создать') }}\r\n          </TheButton>\r\n        </UserContentCreateElems>\r\n      </form>\r\n    </TheModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport {useAuthStore} from \"~/stores/auth\";\r\nconst loadCurrentUser = useAuthStore()\r\ndefineProps({\r\n  userItem: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"my-2 flex\">\r\n    <NuxtLink :to=\"`/base/users/${userItem.id}`\" class=\"transition-all shadow-md hover:shadow-lg border dark:border-none dark:shadow-none dark:bg-gray-700  dark:hover:bg-gray-800 p-4 rounded-lg items-center max-md:flex  max-md:w-full max-sm:flex-col max-sm:gap-y-4\">\r\n      <div class=\"flex   items-center max-md:w-4/12 gap-x-4 max-lg:mx-auto\">\r\n        <img class=\"w-14 h-14 rounded-full\" :src=\"userItem.photo\" alt=\"\">\r\n        <h2 class=\"tracking-widest font-bold  break-words\">{{ userItem.first_name + ' ' + userItem.last_name }}</h2>\r\n      </div>\r\n      <div class=\"flex flex-col items-center justify-center my-2 max-md:w-4/12  mx-auto\">\r\n        <div>\r\n          <p class=\"text-lg font-bold tracking-widest mb-2\" v-if=\"loadCurrentUser.user.role_en === 'admin'\">{{$t('Роль | Должность')}}</p>\r\n          <p class=\"text-lg font-bold tracking-widest mb-2\" v-else>{{$t('Должность')}}</p>\r\n        </div>\r\n        <div class=\"text-center flex flex-col gap-y-2 tes-sm\">\r\n          <h2 class=\"tracking-widest text-sm text-gray-600\" v-if=\"loadCurrentUser.user.role_en === 'admin'\">({{ userItem.role }})</h2>\r\n          <h2 class=\"tracking-widest text-md \">{{ userItem.position }}</h2>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex flex-col items-center text-center\">\r\n        <h2 class=\"tracking-widest font-bold\" v-if=\"['company_admin', 'director', 'vice_director'].includes(loadCurrentUser.user.role_en)\">{{$t('Дата регистрации')}}</h2>\r\n        <p>20.20.2025</p>\r\n      </div>\r\n    </NuxtLink>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup>\r\nimport TheFilter from \"~/components/UI/TheFilter.vue\"\r\nimport TheUserStats from \"~/components/User/UserUI/TheUserStats.vue\"\r\nimport {useUserStore} from \"~/stores/users\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\nimport TheModal from \"~/components/UI/TheModal.vue\";\r\nimport TheSearch from \"~/components/UI/TheSearch.vue\";\r\n\r\nconst loadCurrentUser = useAuthStore()\r\nconst userList = useUserStore()\r\nconst phone = ref('')\r\nconst params = {\r\n  page: 1,\r\n  limit: 15,\r\n  query: '',\r\n  user_type: 'user-list'\r\n}\r\n\r\ndefineProps({\r\n  userChecked: {\r\n    type: String,\r\n    default: 'user-list'\r\n  },\r\n  showUserInfo: {\r\n    type: Boolean,\r\n    default: false,\r\n  }\r\n})\r\n\r\nfunction loadPage(page) {\r\n  if (page === '<') {\r\n    if (Number(params.page) > 1) {\r\n      params.page -= 1;\r\n    }\r\n  } else if (page === '>') {\r\n    if (Number(params.page) < userList.user.number_of_pages) {\r\n      params.page = Number(params.page) + 1\r\n    }\r\n  } else {\r\n    if (Number(page) <= userList.user.number_of_pages) {\r\n      params.page = Number(page)\r\n    }\r\n  }\r\n  if (window.innerWidth > 1000) {\r\n    window.scrollTo({top: 600})\r\n  } else if (window.innerWidth < 1000) {\r\n    window.scrollTo({top: 895})\r\n  } else {\r\n    window.scrollTo()\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  navigateTo({\r\n    params: {\r\n      page: params.page\r\n    }\r\n  })\r\n})\r\nwatchSyncEffect(() => {\r\n  if (loadCurrentUser.user.role?.name_en === 'admin') {\r\n    userList.loadAdminList({page: params.page, limit: params.limit, query: params.query})\r\n  } else if(loadCurrentUser.user.role?.name_en === 'company_admin') {\r\n    userList.loadUserList({\r\n      page: params.page,\r\n      limit: params.limit,\r\n      query: params.query\r\n    })\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"\">\r\n    <div :class=\"{'flex flex-wrap items-center justify-between' :['company_admin', 'admin'].includes( loadCurrentUser.user.role?.name_en )}\">\r\n      <div class=\"mb-10 mt-12 text-lg flex gap-x-10\">\r\n        <p class=\"dark:text-white tracking-widest\" v-if=\"loadCurrentUser.user.role?.name_en === 'admin'\">\r\n          {{ $t('Список администраторов компании') }}</p>\r\n        <p class=\"dark:text-white tracking-widest \" v-else>{{ $t('Список всех пользователей компании') }}</p>\r\n      </div>\r\n      <div\r\n        :class=\"{'flex items-center justify-evenly my-10' : loadCurrentUser.user.role?.name_en === 'admin', 'w-2/12 max-lg:w-4/12 max-sm:w-full max-sm:mb-6 max-sm:mx-auto' : loadCurrentUser.user.role_en !== 'admin'}\">\r\n        <div class=\"flex gap-x-10\" v-if=\"loadCurrentUser?.user.role === 'Администратор сайта'\">\r\n          <button class=\"p-2 rounded-xl dark:text-white tracking-widest font-bold\"\r\n                  :class=\"{'bg-blueDarkSemiLight text-white' : userChecked === 'user-list'}\"\r\n                  @click=\"userChecked = 'user-list'; userList.loadUserList({page: userList.page, limit: params.limit, user_type: userChecked})\">\r\n            {{ $t('Все пользователи') }}\r\n          </button>\r\n          <button class=\"p-2 rounded-xl dark:text-white tracking-widest font-bold\"\r\n                  :class=\"{'bg-blueDarkSemiLight text-white' : userChecked === 'admin-list'}\"\r\n                  @click=\"userChecked = 'admin-list'; userList.loadAdminList({page: userList.page, limit: params.limit})\">\r\n            {{ $t('Администраторы компаний') }}\r\n          </button>\r\n        </div>\r\n        <UserCreate></UserCreate>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full \">\r\n      <div class=\"flex gap-x-10 max-lg:flex-wrap max-md:justify-center\">\r\n        <div class=\"flex w-9/12 justify-between max-lg:justify-center gap-x-10 items-center max-md:flex-wrap max-md:mt-10 max-md:justify-center\">\r\n          <TheSearch class=\"w-full\" v-model:model-value=\"params.query\" @search=\"userList.loadUserList(params)\"/>\r\n          <TheFilter></TheFilter>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex max-md:flex-wrap justify-center max-md:mt-10\">\r\n        <div class=\"flex flex-wrap gap-x-6 max-md:order-2 max-lg:justify-center\">\r\n          <UserContentList v-if=\"userList?.get_user_list.count > 0\" v-for=\"userItem in userList?.get_user_list.results\" :user-item=\"userItem\" class=\"max-md:w-full\"></UserContentList>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex flex-wrap justify-center gap-x-4 mt-10\">\r\n      <div v-if=\"userList.get_user_list.count > 5\" v-for=\"(page, id) in userList?.get_user_list?.links\" :key=\"id\"\r\n           class=\"px-4 py-2 rounded-full cursor-pointer\"\r\n           :class=\"{'bg-blue-400 text-white' : page.active, 'bg-gray-200 text-black' : !page.active}\"\r\n           @click=\"loadPage(page.label); userList?.loadUserList({page: params.page, limit: params.limit, user_type: loadCurrentUser.user.role_en !== 'admin' ? 'user-list/my-company' : userChecked, query: params.query})\">\r\n        {{ page.label }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\n\r\n\r\nconst currentUser = useAuthStore()\r\n\r\nuseSeoMeta({\r\n  title: 'Пользователи',\r\n  description: 'Список пользователей данной платформы'\r\n})\r\n\r\nonMounted(()=> {\r\n  currentUser.loadCurrentUserWorker()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <TheTextContent :text-type=\"'pageTitle'\">{{ $t('Страница с пользователями') }}</TheTextContent>\r\n    <p class=\"dark:text-gray-300 tracking-widest text-sm\">\r\n      {{ $t('Данная страница хранит информацию о пользователях данной платформы') }}</p>\r\n    <div>\r\n      <UserContent></UserContent>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderSlot"],"mappings":"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"}