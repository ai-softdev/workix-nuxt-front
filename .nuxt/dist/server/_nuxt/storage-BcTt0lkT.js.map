{"version":3,"file":"storage-BcTt0lkT.js","sources":["../../../../stores/storage.ts"],"sourcesContent":["import {defineStore} from \"pinia\";\nimport axios from \"~/composables/axios\";\nimport nuxtStorage from \"nuxt-storage/nuxt-storage\";\nimport {toast} from \"vue3-toastify\";\nimport type {ICurrentCategory, TGoods} from \"~/types/storage\";\n\nexport const useStorageStore = defineStore('storage', {\n  state: () => ({\n    isActive: false,\n    createCategory: false,\n    storageCategoryList: [],\n    storageHomeAllList: [],\n    storageItem: {} as TGoods,\n    currentCategory: {} as ICurrentCategory,\n    contextMenuCategory: false,\n    scan: ref(null),\n    searchGoods: '',\n    searchCategory: '',\n    streaming: false,\n  }),\n  getters: {\n    getStorageCategoryList: (state) => state.storageCategoryList,\n    getStorageSubCategory: (state) => state.currentCategory,\n    getStorageHomeAllList: (state) => state.storageHomeAllList,\n    getStorageItem: (state) => state.storageItem\n  },\n  actions: {\n    async loadStorageCategoryList(): Promise<void> {\n      await axios.get(`store/category/list`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.storageCategoryList = res.data\n      })\n    },\n    async loadStorageSubCategory(params: { slug: string | string[], search?: string | number }): Promise<void> {\n      await axios.get(`store/subcategory/${params.slug}?search=${params.search}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.currentCategory = res.data\n\n      }).catch(e => {\n      })\n    },\n    async loadStorageCategorySearch(params: { query: string | number }): Promise<void> {\n      await axios.get(`store/category/list?name=${params.query}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.storageCategoryList = res.data\n      })\n    },\n    async loadAllList(): Promise<void> {\n      await axios.get(`store/item/list`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.storageHomeAllList = res.data\n      })\n    },\n    async loadAllListSearch(params: { search?: any }): Promise<void> {\n      await axios.get(`store/item/list?search=${params.search}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.storageHomeAllList = res.data\n      })\n    },\n    async loadItem(params: { itemSlug: string | string[] }): Promise<void> {\n      await axios.get(`store/item/${params.itemSlug}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.storageItem = res.data\n      })\n    },\n    async createStorageCategoryOrSubcategory(params: {\n      createType?: string,\n      name: string,\n      category_id?: number\n    }): Promise<void> {\n      await axios.post(`store/${params.createType}/create`, {\n        name: params.name,\n        category_id: params.createType === 'subcategory' ? params.category_id : null\n      }, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        this.loadStorageCategoryList()\n        this.createCategory = false\n        toast.success('Успешно создано', {autoClose: 1500, theme: 'auto'})\n      }).catch(e => {\n        toast.error('Возникла ошибка при создании', {autoClose: 1500, theme: 'auto'})\n      })\n    },\n    async updateStorageElem(params: { updateType: string, id: number }): Promise<void> {\n      await axios.patch(`store/${params.updateType}/update`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n\n      }).catch(e => {\n\n      })\n    },\n    async deleteStorageElem(params: { deleteType: string, id: number }): Promise<void> {\n      await axios.delete(`store/${params.deleteType}/delete/${params.id}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res => {\n        if (['subcategory', 'category'].includes(params.deleteType)) {\n          this.loadStorageCategoryList()\n        }\n        toast.success('Успешно удалён', {autoClose: 1500, theme: 'auto'})\n      })\n    }\n  }\n})"],"names":[],"mappings":"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"}