{"version":3,"file":"index-CVLeJL6t.js","sources":["../../../../components/Company/admin/adminUI/CompanyContentCreateElems.vue","../../../../components/Company/admin/CompanyCreate.vue","../../../../components/Company/User/CurrentCompanyDepartment.vue","../../../../components/Company/User/CurrentCompanyChart.vue","../../../../components/Company/User/CurrentCompanyInfo.vue","../../../../components/Company/CompanyUI/CompanyStats.vue","../../../../components/Company/User/CurrentCompanyChangeInfo/CurrentCompanyChangeInfoContent.vue","../../../../components/Company/User/CurrentCompanyChangeInfo.vue","../../../../pages/base/companies/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full\">\r\n    <slot/>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheButton from \"~/components/UI/TheButton.vue\";\r\nimport TheModal from \"~/components/UI/TheModal.vue\";\r\nimport TheInput from \"~/components/UI/TheInput.vue\";\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\"\r\nimport {useCompanies} from \"~/stores/companies\";\r\nimport CompanyContentCreateElems from \"~/components/Company/admin/adminUI/CompanyContentCreateElems.vue\";\r\n\r\nconst createCompany = useCompanies()\r\n\r\nconst createForm = ref({\r\n  name: '',\r\n  logo_file: ''\r\n})\r\n\r\ndefineProps({\r\n  showCreateCompany: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <TheButton class=\"w-full h-full\" type=\"signIn\" @click=\"showCreateCompany = true\">{{ $t('Создать компанию') }}\r\n    </TheButton>\r\n    <TheModal v-if=\"showCreateCompany\" @showModal=\"showCreateCompany = !showCreateCompany; !showCreateCompany ? createForm = {} : createForm = {}\">\r\n      <form @submit.prevent=\"createCompany.createCompany(createForm);showCreateCompany = false\">\r\n        <TheTextContent>{{ $t('Создание компании') }}</TheTextContent>\r\n        <CompanyContentCreateElems>\r\n          <div class=\"w-6/12\">\r\n            <TheInput type=\"text\" :label=\"$t('Наименование')\" v-model=\"createForm.name\"></TheInput>\r\n          </div>\r\n        </CompanyContentCreateElems>\r\n        <CompanyContentCreateElems>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"button\" type=\"danger\" @click=\"showCreateCompany = false\">\r\n            {{ $t('Отменить')\r\n            }}\r\n          </TheButton>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"submit\" type=\"success\">{{ $t('Создать') }}</TheButton>\r\n        </CompanyContentCreateElems>\r\n      </form>\r\n    </TheModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport CurrentCompanyElems from \"~/components/Company/CompanyUI/CurrentCompanyElems.vue\";\r\nimport {useCompanies} from \"~/stores/companies\";\r\n\r\nconst departments = useCompanies()\r\ndepartments.loadDepartmentList()\r\ndefineProps({\r\n  more: {\r\n    type: Number,\r\n    default: null\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <p\r\n        class=\"dark:text-white text-3xl font-bold mb-6\"\r\n    >\r\n      {{ $t('Отделы компании') }}\r\n    </p>\r\n    <div\r\n        class=\"grid grid-cols-4 max-[1750px]:grid-cols-3 max-lg:grid-cols-2 max-md:grid-cols-1 mt-10 items-center gap-x-4 gap-y-4\">\r\n      <div\r\n          v-for=\"department in departments.get_all_department.results\"\r\n          class=\"relative border p-5 rounded-3xl bg-white dark:border-gray-400\"\r\n      >\r\n<!--        @mouseenter=\"more = department.id\" @mouseleave=\"more = null\"-->\r\n        <div :class=\"{'blur-[1px]' : more === department.id}\">\r\n          <div class=\"font-bold pb-6 mb-6 border-b\">\r\n            <h2 class=\"text-md\">{{ department.name }}</h2>\r\n          </div>\r\n          <div class=\"flex flex-col gap-6\">\r\n            <div class=\"flex items-center justify-between gap-3\">\r\n              <p>{{ $t('Руководитель') }}</p>\r\n              <p class=\"break-words text-mediumGray\">\r\n                {{ department.department_director_name ? department.department_director_name : 'Отсутсвует' }}</p>\r\n            </div>\r\n            <div class=\"flex items-center justify-between gap-3\">\r\n              <p>{{ $t('Заместитель') }}</p>\r\n              <p class=\"break-words text-mediumGray\">\r\n                {{ department.vice_department_director_name ? department.vice_department_director_name : 'Отсутсвует' }}</p>\r\n            </div>\r\n            <NuxtLink\r\n                :to=\"`/base/companies/department/${department.id}`\"\r\n                class=\"block p-2.5 rounded-full bg-golden text-center\">\r\n              {{ $t('Подробнее') }}\r\n            </NuxtLink>\r\n          </div>\r\n        </div>\r\n<!--        <Transition name=\"fade\">-->\r\n<!--          <NuxtLink-->\r\n<!--              :to=\"`/base/companies/department/${department.id}`\"-->\r\n<!--              v-if=\"more === department.id\"-->\r\n<!--              class=\"cursor-pointer absolute top-0 left-0 w-full h-full bg-black bg-opacity-40 rounded-3xl\"-->\r\n<!--          >-->\r\n<!--            <button class=\"text-center mt-20 mx-auto uppercase text-sm rounded-full dark:bg-gray-400 bg-white w-4/12\">-->\r\n<!--              {{ $t('Подробнее') }}-->\r\n<!--            </button>-->\r\n<!--          </NuxtLink>-->\r\n<!--        </Transition>-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport {Chart as ChartJS, ArcElement, Tooltip, Legend, RadialLinearScale, Chart} from 'chart.js'\r\nimport {Doughnut, Pie, PolarArea} from 'vue-chartjs'\r\nimport { useColorMode } from '@vueuse/core'\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend, RadialLinearScale,)\r\nChart.defaults.color = '#b6b6b6'\r\n\r\nconst chartData = ref({\r\n  labels: ['Выполненные задания', 'Выполненные IQ тесты', 'Активность', 'Посещаемость'],\r\n  datasets: [\r\n    {\r\n      backgroundColor: ['rgba(109,252,118,0.4)', \"rgba(252,155,0,0.91)\" , \"rgba(0,121,255,0.4)\", \"rgba(255,9,0,0.68)\"],\r\n      data: [70, 70, 90, 100]\r\n    }\r\n  ]\r\n});\r\n\r\nconst chartOptions = ref({\r\n  responsive: true,\r\n  maintainAspectRatio: false\r\n});\r\n</script>\r\n\r\n<template>\r\n    <PolarArea class=\"text-white\" style=\"{color: white;}\" :data=\"chartData\" :options=\"chartOptions\"></PolarArea>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport {useCompanies} from \"~/stores/companies\";\r\nimport CurrentCompanyElems from \"~/components/Company/CompanyUI/CurrentCompanyElems.vue\";\r\n\r\nimport FullCalendar from '@fullcalendar/vue3'\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport CurrentCompanyNews from \"~/components/Company/User/CurrentCompanyNews.vue\";\r\nimport CurrentCompanyFiles from \"~/components/Company/User/CurrentCompanyFiles.vue\";\r\nimport CurrentCompanyDepartment from \"~/components/Company/User/CurrentCompanyDepartment.vue\";\r\nimport CurrentCompanyChart from \"~/components/Company/User/CurrentCompanyChart.vue\";\r\nimport ruLocale from '@fullcalendar/core/locales/ru';\r\n\r\nconst currentCompany = useCompanies()\r\nconst calendarOptions = {\r\n  plugins: [dayGridPlugin, interactionPlugin],\r\n  initialView: 'dayGridMonth',\r\n  locales: [ruLocale],\r\n  locale: 'ru',\r\n  events: [\r\n    { title: 'Событие 1', date: '2022-12-26' },\r\n    { title: 'Событие 2', date: '2022-12-27' },\r\n  ],\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-col overflow-hidden gap-y-10\">\r\n    <div class=\"grid grid-cols-3 max-[1020px]:grid-cols-1 gap-5 w-full\">\r\n      <div class=\"p-6 bg-white rounded-3xl\">\r\n        <div class=\"flex items-center gap-4 py-2 px-3 border rounded-full justify-center w-fit\">\r\n          <img src=\"/icons/chart.svg\" alt=\"chart\">\r\n          {{ $t('График') }}\r\n        </div>\r\n        <div class=\"mt-8\">\r\n          <CurrentCompanyChart/>\r\n        </div>\r\n      </div>\r\n      <div class=\"p-6 bg-white rounded-3xl\">\r\n        <div class=\"flex items-center gap-4 py-2 px-3 border rounded-full justify-center w-fit\">\r\n          <img src=\"/icons/chart.svg\" alt=\"chart\">\r\n          {{ $t('О компании') }}\r\n        </div>\r\n        <div class=\"mt-8\">\r\n          {{ currentCompany.company.description || $t('Нет описания')}}\r\n        </div>\r\n      </div>\r\n      <div class=\"p-6 bg-white rounded-3xl\">\r\n        <div class=\"flex items-center gap-4 py-2 px-3 border rounded-full justify-center w-fit\">\r\n          <img src=\"/icons/company-statistic.svg\" alt=\"company-statistic\">\r\n          {{ $t('Статистика компании') }}\r\n        </div>\r\n        <div class=\"mt-8\">\r\n          <div class=\"w-full flex items-center justify-between my-4 py-4 px-5 rounded-full gap-x-5 bg-porcelain\">\r\n            <div class=\"flex items-center gap-x-2 w-8/12 max-md:w-9/12 \">\r\n              <div>\r\n                <svg width=\"24\" height=\"24\" class=\"stroke-black dark:stroke-white\" viewBox=\"0 0 24 24\" fill=\"none\"\r\n                     xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path d=\"M20.3873 7.1575L11.9999 12L3.60913 7.14978\" stroke-width=\"1\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"></path>\r\n                  <path d=\"M12 12V21\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\r\n                  <path\r\n                      d=\"M11 2.57735C11.6188 2.22008 12.3812 2.22008 13 2.57735L19.6603 6.42265C20.2791 6.77992 20.6603 7.44017 20.6603 8.1547V15.8453C20.6603 16.5598 20.2791 17.2201 19.6603 17.5774L13 21.4226C12.3812 21.7799 11.6188 21.7799 11 21.4226L4.33975 17.5774C3.72094 17.2201 3.33975 16.5598 3.33975 15.8453V8.1547C3.33975 7.44017 3.72094 6.77992 4.33975 6.42265L11 2.57735Z\"\r\n                      stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\r\n                </svg>\r\n              </div>\r\n              <p class=\"font-medium\">{{ $t('Объекты') }}:</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"w-10 h-10 flex items-center justify-center dark:text-white\">{{currentCompany.company.objects_count || 0}}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"w-full flex items-center justify-between my-4 py-4 px-5 rounded-full gap-x-5 bg-porcelain\">\r\n            <div class=\"flex items-center gap-x-2 w-8/12 max-md:w-9/12 \">\r\n              <div>\r\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path d=\"M16 18L19 15M19 15L22 18M19 15V21M15.5 3.29076C16.9659 3.88415 18 5.32131 18 7C18 8.67869 16.9659 10.1159 15.5 10.7092M12 15H8C6.13623 15 5.20435 15 4.46927 15.3045C3.48915 15.7105 2.71046 16.4892 2.30448 17.4693C2 18.2044 2 19.1362 2 21M13.5 7C13.5 9.20914 11.7091 11 9.5 11C7.29086 11 5.5 9.20914 5.5 7C5.5 4.79086 7.29086 3 9.5 3C11.7091 3 13.5 4.79086 13.5 7Z\" stroke=\"black\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                </svg>\r\n              </div>\r\n              <p>{{ $t('Сотрудники') }}:</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"w-10 h-10 flex items-center justify-center dark:text-white\">{{currentCompany.company.users_count || 0}}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"w-full flex items-center justify-between my-4 py-4 px-5 rounded-full gap-x-5 bg-porcelain\">\r\n            <div class=\"flex items-center gap-x-2 w-8/12 max-md:w-9/12 \">\r\n              <div>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path d=\"M13 19V13.6C13 13.0399 13 12.7599 12.891 12.546C12.7951 12.3578 12.6422 12.2049 12.454 12.109C12.2401 12 11.9601 12 11.4 12H8.6C8.0399 12 7.75992 12 7.54601 12.109C7.35785 12.2049 7.20487 12.3578 7.10899 12.546C7 12.7599 7 13.0399 7 13.6V19M17 19V4.2C17 3.0799 17 2.51984 16.782 2.09202C16.5903 1.71569 16.2843 1.40973 15.908 1.21799C15.4802 1 14.9201 1 13.8 1H6.2C5.07989 1 4.51984 1 4.09202 1.21799C3.71569 1.40973 3.40973 1.71569 3.21799 2.09202C3 2.51984 3 3.0799 3 4.2V19M19 19H1M7.5 6H7.51M12.5 6H12.51M8 6C8 6.27614 7.77614 6.5 7.5 6.5C7.22386 6.5 7 6.27614 7 6C7 5.72386 7.22386 5.5 7.5 5.5C7.77614 5.5 8 5.72386 8 6ZM13 6C13 6.27614 12.7761 6.5 12.5 6.5C12.2239 6.5 12 6.27614 12 6C12 5.72386 12.2239 5.5 12.5 5.5C12.7761 5.5 13 5.72386 13 6Z\" stroke=\"black\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                </svg>\r\n              </div>\r\n              <p>{{ $t('Департаменты') }}:</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"w-10 h-10 flex items-center justify-center dark:text-white\">{{currentCompany.company.departments_count || 0}}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full\">\r\n      <CurrentCompanyDepartment/>\r\n    </div>\r\n<!--    <div>-->\r\n<!--      <CurrentCompanyNews/>-->\r\n<!--    </div>-->\r\n    <div class=\"w-full mx-auto\">\r\n      <p\r\n          class=\"dark:text-white text-3xl font-bold mb-6\"\r\n      >\r\n        {{ $t('Календарь событий') }}\r\n      </p>\r\n      <div class=\"bg-white rounded-3xl mt-6 p-6 shadow-cards\">\r\n        <FullCalendar\r\n            :options=\"calendarOptions\"\r\n        />\r\n      </div>\r\n<!--      <CurrentCompanyElems class=\"w-10/12 mx-auto \">-->\r\n<!--        <template v-slot:blockTitle>-->\r\n<!--          {{ $t('Календарь событий') }}-->\r\n<!--        </template>-->\r\n<!--        <template v-slot:blockContent>-->\r\n<!--          <div>-->\r\n<!--            -->\r\n<!--          </div>-->\r\n<!--        </template>-->\r\n<!--      </CurrentCompanyElems>-->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\n\r\n</script>\r\n\r\n<template>\r\n<div class=\"my-10 dark:text-white tracking-wider flex flex-col gap-y-4\">\r\n  <p class=\"flex items-center w-11/12 justify-between gap-x-10\"><slot name=\"statsName\"/> <span class=\"bg-gray-300 py-2 px-4 rounded-full font-bold\"><slot name=\"statsValue\"/></span></p>\r\n</div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\n\r\nimport TheInput from \"~/components/UI/TheInput.vue\";\r\nimport {useCompanies} from \"~/stores/companies\";\r\n\r\nconst companies = useCompanies()\r\nconst form = reactive({\r\n  title: '',\r\n  description: '',\r\n  email: '',\r\n  address: '',\r\n  file: null as File | null,\r\n  phones: [''] // массив номеров\r\n})\r\n\r\nconst handleFileChange = (e: Event) => {\r\n  const target = e.target as HTMLInputElement\r\n  if (target.files && target.files.length > 0) {\r\n    form.file = target.files[0]\r\n  }\r\n}\r\n\r\nconst addPhone = () => {\r\n  form.phones.push('')\r\n}\r\n\r\nconst removePhone = (index: number) => {\r\n  if (form.phones.length > 1) {\r\n    form.phones.splice(index, 1)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  const company = companies.company\r\n\r\n  if (company) {\r\n    form.title = company.name || ''\r\n    form.description = company.description || ''\r\n    form.email = company.email || ''\r\n    form.address = company.address || ''\r\n    form.phones = Array.isArray(company.phones) && company.phones.length > 0\r\n        ? [...company.phones]\r\n        : ['']\r\n  }\r\n})\r\n\r\nconst handleSubmit = async () => {\r\n  const fd = new FormData()\r\n  fd.append('title', form.title)\r\n  fd.append('description', form.description)\r\n  fd.append('email', form.email)\r\n  fd.append('address', form.address)\r\n\r\n  // Добавим телефоны как массив\r\n  form.phones.forEach((phone, index) => {\r\n    fd.append(`phones[${index}]`, phone)\r\n  })\r\n\r\n  // Файл, если выбран\r\n  if (form.file) {\r\n    fd.append('file', form.file)\r\n  }\r\n\r\n  try {\r\n    await companies.editCompany({ form: fd })\r\n    // alert('Компания успешно обновлена!')\r\n  } catch (e) {\r\n    console.error('Ошибка при сохранении компании:', e)\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"mt-10 flex flex-col gap-4\">\r\n    <TheInput label=\"Название\" v-model=\"form.title\" />\r\n    <TheInput label=\"Описание\" v-model=\"form.description\" />\r\n    <TheInput label=\"Email\" v-model=\"form.email\" />\r\n    <TheInput label=\"Адрес\" v-model=\"form.address\" />\r\n\r\n    <div>\r\n      <label class=\"font-medium mb-2 block\">Мобильный телефон(ы)</label>\r\n      <div v-for=\"(phone, index) in form.phones\" :key=\"index\" class=\"flex items-center gap-2 mb-2\">\r\n        <TheInput\r\n            :label=\"`Телефон #${index + 1}`\"\r\n            v-model=\"form.phones[index]\"\r\n        />\r\n        <button @click=\"removePhone(index)\" v-if=\"form.phones.length > 1\" class=\"text-red-500 text-sm\">Удалить</button>\r\n      </div>\r\n      <button @click=\"addPhone\" class=\"text-blue-500 text-sm\">+ Добавить номер</button>\r\n    </div>\r\n\r\n    <TheInput\r\n        type=\"file\"\r\n        id=\"upload-file\"\r\n        @input=\"handleFileChange\"\r\n    />\r\n\r\n    <button @click=\"handleSubmit\" class=\"bg-blue-600 text-white px-4 py-2 rounded w-fit mt-4\">\r\n      Сохранить компанию\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheModal from \"~/components/UI/TheModal.vue\";\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport CurrentCompanyChangeInfoContent\r\n  from \"~/components/Company/User/CurrentCompanyChangeInfo/CurrentCompanyChangeInfoContent.vue\";\r\n\r\nconst changeShow = ref(false)\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n   <button class=\"fill-white fixed bottom-6 right-20 bg-blueSemiLight p-2 rounded-full z-20 hover:bg-semiCyan\" @click=\"changeShow = true\">\r\n     <svg  width=\"30px\" height=\"30px\" viewBox=\"-0.5 0 16 16\" id=\"settings-16px\" xmlns=\"http://www.w3.org/2000/svg\">\r\n       <path id=\"Path_39\"  d=\"M-493.35-320H-494.7a1.865,1.865,0,0,1-1.863-1.862v-.626a.186.186,0,0,0-.091-.159l-.676-.394a.184.184,0,0,0-.183,0l-.539.311a1.845,1.845,0,0,1-1.414.186,1.855,1.855,0,0,1-1.133-.869l-.679-1.18a1.867,1.867,0,0,1,.68-2.541l.548-.316a.186.186,0,0,0,.092-.16v-.78a.186.186,0,0,0-.092-.16l-.547-.316a1.866,1.866,0,0,1-.681-2.541l.679-1.18a1.855,1.855,0,0,1,1.133-.869,1.837,1.837,0,0,1,1.414.187l.538.31a.181.181,0,0,0,.184,0l.676-.394a.186.186,0,0,0,.091-.159v-.626A1.865,1.865,0,0,1-494.7-336h1.353a1.865,1.865,0,0,1,1.864,1.862v.626a.187.187,0,0,0,.09.159l.677.394a.179.179,0,0,0,.183,0l.538-.311a1.841,1.841,0,0,1,1.415-.186,1.85,1.85,0,0,1,1.132.869l.679,1.18a1.866,1.866,0,0,1-.68,2.541l-.548.316a.186.186,0,0,0-.092.16v.78a.186.186,0,0,0,.092.16l.547.316a1.865,1.865,0,0,1,.681,2.541l-.679,1.18a1.85,1.85,0,0,1-1.132.869,1.842,1.842,0,0,1-1.415-.187l-.537-.31a.186.186,0,0,0-.184,0l-.677.394a.187.187,0,0,0-.09.159v.626A1.865,1.865,0,0,1-493.35-320Zm-4.076-4.063a1.185,1.185,0,0,1,.6.161l.676.4a1.181,1.181,0,0,1,.586,1.019v.626a.866.866,0,0,0,.866.865h1.353a.867.867,0,0,0,.867-.865v-.626a1.183,1.183,0,0,1,.585-1.019l.676-.4a1.185,1.185,0,0,1,1.186,0l.537.31a.849.849,0,0,0,.658.087.854.854,0,0,0,.525-.4l.68-1.179a.868.868,0,0,0-.317-1.181l-.546-.317a1.183,1.183,0,0,1-.59-1.022v-.78a1.183,1.183,0,0,1,.59-1.022h0l.547-.317a.868.868,0,0,0,.316-1.181l-.68-1.179a.854.854,0,0,0-.525-.4.871.871,0,0,0-.658.086l-.538.311a1.176,1.176,0,0,1-1.185,0l-.676-.4a1.183,1.183,0,0,1-.585-1.019v-.626a.867.867,0,0,0-.867-.865H-494.7a.866.866,0,0,0-.866.865v.626a1.181,1.181,0,0,1-.586,1.019l-.676.4a1.181,1.181,0,0,1-1.186,0l-.536-.31a.862.862,0,0,0-.658-.087.856.856,0,0,0-.526.4l-.68,1.179a.868.868,0,0,0,.317,1.181l.546.317a1.183,1.183,0,0,1,.59,1.022v.78a1.183,1.183,0,0,1-.59,1.022l-.547.317a.868.868,0,0,0-.316,1.181l.68,1.179a.856.856,0,0,0,.526.4.853.853,0,0,0,.658-.086l.537-.311A1.172,1.172,0,0,1-497.426-324.063Zm3.417-.711A3.23,3.23,0,0,1-497.235-328a3.23,3.23,0,0,1,3.226-3.226A3.23,3.23,0,0,1-490.782-328,3.23,3.23,0,0,1-494.009-324.774Zm0-5.455A2.232,2.232,0,0,0-496.238-328a2.232,2.232,0,0,0,2.229,2.229A2.233,2.233,0,0,0-491.778-328,2.233,2.233,0,0,0-494.009-330.229Z\" transform=\"translate(501.528 336)\"/>\r\n     </svg>\r\n   </button>\r\n  <Transition name=\"fade\">\r\n    <TheModal v-if=\"changeShow\"  @showModal=\"changeShow = false\">\r\n      <TheTextContent>{{$t('Изменение информации компании')}}</TheTextContent>\r\n      <div>\r\n        <CurrentCompanyChangeInfoContent/>\r\n      </div>\r\n    </TheModal>\r\n  </Transition>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport TheSearch from \"~/components/UI/TheSearch.vue\";\r\nimport CompanyCreate from \"~/components/Company/admin/CompanyCreate.vue\";\r\n\r\nimport {useCompanies} from \"~/stores/companies\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\n\r\nimport CurrentCompanyInfo from \"~/components/Company/User/CurrentCompanyInfo.vue\";\r\nimport CompanyList from \"~/components/Company/admin/CompanyList.vue\";\r\nimport CompanyStats from \"~/components/Company/CompanyUI/CompanyStats.vue\";\r\nimport TheContentBlock from \"~/components/UI/TheContentBlock.vue\";\r\nimport CurrentCompanyChangeInfo from \"~/components/Company/User/CurrentCompanyChangeInfo.vue\";\r\n\r\nconst currentUser = useAuthStore()\r\nconst companies = useCompanies()\r\nconst params = {\r\n  page: 1,\r\n  limit: 5,\r\n  query: '',\r\n}\r\nfunction loadPage(page) {\r\n  if (page === '<') {\r\n    if (Number(params.page) > 1) {\r\n      params.page -= 1;\r\n    }\r\n  } else if (page === '>') {\r\n    if (Number(params.page) < companies.company.number_of_pages) {\r\n      params.page = Number(params.page) + 1\r\n    }\r\n  } else {\r\n    if (Number(page) <= companies.company.number_of_pages) {\r\n      params.page = Number(page)\r\n    }\r\n  }\r\n  // console.log(page)\r\n  if (window.innerWidth > 1000) {\r\n    window.scrollTo({top: 600})\r\n  } else if (window.innerWidth < 1000) {\r\n    window.scrollTo({top: 895})\r\n  } else {\r\n    window.scrollTo()\r\n  }\r\n}\r\nwatchEffect(() => {\r\n  if (currentUser.user.role?.name_en !== 'admin') {\r\n    companies.loadCurrentCompany()\r\n  } else {\r\n    companies.loadCompanyList({page: params.page, limit: params.limit, query: params.query})\r\n  }\r\n})\r\nuseSeoMeta({\r\n  title: 'О компании',\r\n  description: 'Страница с информацией о компании'\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div v-if=\"currentUser.user.role?.name_en !== 'admin'\">\r\n      <div class=\"\">\r\n        <p\r\n            class=\"dark:text-white text-3xl font-bold mb-6\"\r\n        >\r\n          {{ $t('Страница информации о ') }} {{ companies.company.name}}\r\n        </p>\r\n        <CurrentCompanyChangeInfo v-if=\"['company_admin', 'director', 'vice_director'].includes(currentUser.user.role?.name_en)\"/>\r\n      </div>\r\n      <div class=\"\">\r\n        <CurrentCompanyInfo/>\r\n      </div>\r\n    </div>\r\n    <div v-else-if=\"currentUser.user.role?.name_en === 'admin'\">\r\n      <TheTextContent :text-type=\"'pageTitle'\">\r\n        {{ $t('Страница списка Компаний') }}\r\n      </TheTextContent>\r\n      <div class=\"flex justify-between items-center max-md:flex-col\">\r\n        <TheSearch class=\"my-10 w-6/12 max-md:w-full\"/>\r\n        <CompanyCreate class=\"w-2/12 max-md:w-full\"></CompanyCreate>\r\n      </div>\r\n      <div class=\"flex gap-x-10 max-md:flex-col max-md:mt-5\">\r\n        <div class=\"w-full gap-y-10 flex flex-col max-md:order-2\">\r\n          <CompanyList v-for=\"item in companies?.get_all_company.results\" :company-block=\"item\"></CompanyList>\r\n        </div>\r\n        <TheContentBlock\r\n          class=\"w-3/12 h-full transition-all rounded-md p-4 max-md:w-full\">\r\n          <h2 class=\"text-center text-lg tracking-widest font-bold dark:text-white\">{{ $t('Информация Компаний') }}</h2>\r\n          <CompanyStats>\r\n            <template v-slot:statsName>\r\n              {{ $t('Количество компаний') }}\r\n            </template>\r\n            <template v-slot:statsValue>\r\n              <p v-if=\"companies.get_all_company.count > 0\">{{ companies.get_all_company.count }}</p>\r\n              <p v-else>{{ '0' }}</p>\r\n            </template>\r\n          </CompanyStats>\r\n        </TheContentBlock>\r\n      </div>\r\n      <div class=\"flex justify-center gap-x-4 mt-10\">\r\n        <div v-if=\"companies?.get_all_company.count > 5\" v-for=\"(page, id) in companies?.get_all_company.links\" :key=\"id\"\r\n             class=\"px-4 py-2  rounded-full cursor-pointer\"\r\n             :class=\"{'bg-blue-400 text-white' : page.active, 'bg-gray-200 text-black hover:bg-blue-400 hover:text-white transition-all' : !page.active}\"\r\n             @click=\"loadPage(page.label); companies.loadCompanyList({page: params.page, limit: params.limit, query: params.query})\">\r\n          {{ page.label }}\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>"],"names":["_sfc_ssrRender","_ssrRenderAttrs","_mergeProps","_ssrRenderSlot","ChartJS"],"mappings":"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"}