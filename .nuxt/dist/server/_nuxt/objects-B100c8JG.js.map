{"version":3,"file":"objects-B100c8JG.js","sources":["../../../../stores/objects.ts"],"sourcesContent":["import {defineStore} from \"pinia\";\nimport axios from \"~/composables/axios\";\nimport {toast} from \"vue3-toastify\";\nimport nuxtStorage from \"nuxt-storage/nuxt-storage\";\nexport const useObjects = defineStore('object', {\n  state:() => ({\n    objects: {\n      id: '',\n      name: '',\n      address: '',\n      email: '',\n      description: '',\n      files: '',\n      participants: {\n        id: ''\n      }\n    }\n  }),\n  getters: {\n    get_objects(object) {\n      return this.objects\n    }\n  },\n  actions: {\n    async loadObjectList() {\n      axios.get(`object/list`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(response => {\n        this.objects = response.data\n      })\n    },\n\n    async loadObject(params: {id: number}) {\n      axios.get(`object/${params.id}`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(response => {\n        this.objects = response.data\n      })\n    },\n\n    async createObject(params: {objects: any}) {\n      let fd = new FormData();\n      fd.set('name', params.name)\n      fd.set('address', params.address)\n      fd.set('email', params.email)\n      fd.set('description', params.description)\n     if(typeof params.files !== 'string') {\n       fd.set('files', params.files)\n     }\n      axios.post(`object/create`, fd, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(response => {\n        this.objects = response.data\n        toast.success('Компания успешно создана', {autoClose: 1500, theme: 'auto'})\n        this.loadObjectList()\n      }).catch(e => {\n        toast.error(e, {autoClose: 1500, theme: 'auto'})\n      })\n    }\n  }\n})"],"names":[],"mappings":";;;;AAIa,MAAA,aAAa,YAAY,UAAU;AAAA,EAC9C,OAAM,OAAO;AAAA,IACX,SAAS;AAAA,MACP,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,MACb,OAAO;AAAA,MACP,cAAc;AAAA,QACZ,IAAI;AAAA,MACN;AAAA,IACF;AAAA,EAAA;AAAA,EAEF,SAAS;AAAA,IACP,YAAY,QAAQ;AAClB,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,MAAM,iBAAiB;AACrB,YAAM,IAAI,eAAe;AAAA,QACvB,SAAS;AAAA,UACP,eAAe,UAAU,YAAY,aAAa,QAAQ,OAAO,CAAC;AAAA,QACpE;AAAA,MAAA,CACD,EAAE,KAAK,CAAY,aAAA;AAClB,aAAK,UAAU,SAAS;AAAA,MAAA,CACzB;AAAA,IACH;AAAA,IAEA,MAAM,WAAW,QAAsB;AACrC,YAAM,IAAI,UAAU,OAAO,EAAE,IAAI;AAAA,QAC/B,SAAS;AAAA,UACP,eAAe,UAAU,YAAY,aAAa,QAAQ,OAAO,CAAC;AAAA,QACpE;AAAA,MAAA,CACD,EAAE,KAAK,CAAY,aAAA;AAClB,aAAK,UAAU,SAAS;AAAA,MAAA,CACzB;AAAA,IACH;AAAA,IAEA,MAAM,aAAa,QAAwB;AACrC,UAAA,KAAK,IAAI;AACV,SAAA,IAAI,QAAQ,OAAO,IAAI;AACvB,SAAA,IAAI,WAAW,OAAO,OAAO;AAC7B,SAAA,IAAI,SAAS,OAAO,KAAK;AACzB,SAAA,IAAI,eAAe,OAAO,WAAW;AACtC,UAAA,OAAO,OAAO,UAAU,UAAU;AAChC,WAAA,IAAI,SAAS,OAAO,KAAK;AAAA,MAC9B;AACO,YAAA,KAAK,iBAAiB,IAAI;AAAA,QAC9B,SAAS;AAAA,UACP,eAAe,UAAU,YAAY,aAAa,QAAQ,OAAO,CAAC;AAAA,QACpE;AAAA,MAAA,CACD,EAAE,KAAK,CAAY,aAAA;AAClB,aAAK,UAAU,SAAS;AACxB,cAAM,QAAQ,4BAA4B,EAAC,WAAW,MAAM,OAAO,QAAO;AAC1E,aAAK,eAAe;AAAA,MAAA,CACrB,EAAE,MAAM,CAAK,MAAA;AACZ,cAAM,MAAM,GAAG,EAAC,WAAW,MAAM,OAAO,QAAO;AAAA,MAAA,CAChD;AAAA,IACH;AAAA,EACF;AACF,CAAC;"}