{"version":3,"file":"index-Dfb78Cch.js","sources":["../../../../components/Objects/ObjectContent.vue","../../../../components/Objects/ObjectUI/ObjectContentCreateElems.vue","../../../../components/Objects/ObjectCreate.vue","../../../../pages/base/objects/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport ObjectList from \"~/components/Objects/ObjectList.vue\";\r\nimport {useObjects} from \"~/stores/objects\";\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nconst objects = useObjects()\r\nobjects.loadObjectList()\r\n</script>\r\n\r\n<template>\r\n  <div class=\"mt-8\">\r\n    <div class=\"grid grid-cols-4 gap-5\">\r\n      <ObjectList v-for=\"object in objects.get_objects.results\" :object=\"object\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full\">\r\n    <slot/>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheButton from \"~/components/UI/TheButton.vue\";\r\nimport TheModal from \"~/components/UI/TheModal.vue\";\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport ObjectContentCreateElems from \"~/components/Objects/ObjectUI/ObjectContentCreateElems.vue\";\r\nimport TheInput from \"~/components/UI/TheInput.vue\";\r\nimport {useObjects} from \"~/stores/objects\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\n\r\nconst objects = useObjects()\r\nconst currentUser = useAuthStore()\r\nconst createForm = ref({\r\n  name: '',\r\n  files: '',\r\n  address: ''\r\n})\r\n\r\ndefineProps({\r\n  showCreate: {\r\n    type: Boolean,\r\n    default: false,\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <button\r\n        v-if=\"currentUser.user.permissions?.find(e=>e.name_en === 'object.create')\"\r\n        class=\"font-bold bg-golden rounded-full py-2.5 px-10\"\r\n        @click=\"showCreate = true\"\r\n    >\r\n      + {{ $t('Создать объект') }}\r\n    </button>\r\n    <TheModal v-if=\"showCreate\" @showModal=\"showCreate = !showCreate\">\r\n      <TheTextContent>{{ $t('Создание объекта') }}</TheTextContent>\r\n      <form @submit.prevent=\"objects.createObject(createForm)\">\r\n        <ObjectContentCreateElems>\r\n          <div class=\"w-6/12\">\r\n            <TheInput type=\"text\" :label=\"$t('Наименование')\" v-model=\"createForm.name\"></TheInput>\r\n          </div>\r\n        </ObjectContentCreateElems>\r\n        <ObjectContentCreateElems class=\"flex-wrap\">\r\n          <div class=\"w-6/12\">\r\n            <TheInput type=\"text\" :label=\"$t('Адрес')\" v-model=\"createForm.address\"></TheInput>\r\n          </div>\r\n        </ObjectContentCreateElems>\r\n        <ObjectContentCreateElems>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"button\" type=\"danger\" @click=\"showCreate = false\">\r\n            {{ $t('Отменить')\r\n            }}\r\n          </TheButton>\r\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"submit\" type=\"success\">{{ $t('Создать') }}</TheButton>\r\n        </ObjectContentCreateElems>\r\n      </form>\r\n\r\n    </TheModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<script setup lang=\"ts\">\r\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\r\nimport ObjectContent from \"~/components/Objects/ObjectContent.vue\";\r\nimport TheSearch from \"~/components/UI/TheSearch.vue\";\r\nimport TheFilter from \"~/components/UI/TheFilter.vue\";\r\nimport ObjectCreate from \"~/components/Objects/ObjectCreate.vue\";\r\nimport {useAuthStore} from \"~/stores/auth\";\r\nimport {useCompanies} from \"~/stores/companies\";\r\n\r\nconst router = useRouter()\r\nconst loadAuthStore = useAuthStore()\r\nconst company = useCompanies()\r\n\r\nwatch(() => loadAuthStore.user, (newValue) => {\r\n  if(loadAuthStore?.user?.role?.name_en === 'admin'){\r\n    if (window.history.length > 1) {\r\n      router.push('/base/profile');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  }\r\n})\r\nwatch(() => company.company, (newValue) => {\r\n  let permission = company.company.modules?.find(item => item.name_en === 'objects')\r\n  if(!permission){\r\n    if (window.history.length > 1) {\r\n      router.push('/base/profile');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  }\r\n})\r\n\r\nuseSeoMeta({\r\n  title: 'Объекты',\r\n  description: 'Объекты компании'\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"flex items-center justify-between mb-6\">\r\n      <p\r\n          class=\"dark:text-white text-3xl font-bold\"\r\n      >\r\n        {{$t('Страница с объектами')}}\r\n      </p>\r\n      <ObjectCreate></ObjectCreate>\r\n    </div>\r\n<!--    <div class=\"flex items-center gap-x-6\">-->\r\n<!--      <TheSearch class=\"w-8/12\"></TheSearch>-->\r\n<!--      <TheFilter></TheFilter>-->\r\n<!--    </div>-->\r\n    <ObjectContent />\r\n  </div>\r\n\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderSlot"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,UAAM,UAAU;AAChB,YAAQ,eAAe;;;;;;;;;;;;;;;;;ACLvB,SAAA,eAAA,MAAA,OAAA,SAKY;AALZ,QAAA,OAAAA,eAAAC,WAAA,EAAA,OAAA,gFAAA,MAAA,CAAA,CAAA,GAAA;AAAAC,gBAAA,KAAA,QAAA,WAAA,CAAA,GAAA,MAAA,OAAA,OAAA;;;;;;;;;;;;;;;;;;;;ACSA,UAAM,UAAU;AAChB,UAAM,cAAc;AACpB,UAAM,aAAa,IAAI;AAAA,MACrB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,IAAA,CACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACND,UAAM,SAAS;AACf,UAAM,gBAAgB;AACtB,UAAM,UAAU;AAEhB,UAAM,MAAM,cAAc,MAAM,CAAC,aAAa;;AAC5C,YAAG,0DAAe,SAAf,mBAAqB,SAArB,mBAA2B,aAAY,SAAQ;AAC5C,YAAA,SAAO,QAAQ,SAAS,GAAG;AAC7B,iBAAO,KAAK,eAAe;AAAA,QAAA,OACtB;AACL,iBAAO,KAAK,GAAG;AAAA,QACjB;AAAA,MACF;AAAA,IAAA,CACD;AACD,UAAM,MAAM,QAAQ,SAAS,CAAC,aAAa;;AACrC,UAAA,cAAa,aAAQ,QAAQ,YAAhB,mBAAyB,KAAK,CAAQ,SAAA,KAAK,YAAY;AACxE,UAAG,CAAC,YAAW;AACT,YAAA,SAAO,QAAQ,SAAS,GAAG;AAC7B,iBAAO,KAAK,eAAe;AAAA,QAAA,OACtB;AACL,iBAAO,KAAK,GAAG;AAAA,QACjB;AAAA,MACF;AAAA,IAAA,CACD;AAEU,eAAA;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,IAAA,CACd;;;;;;;;;;;;;;;;"}