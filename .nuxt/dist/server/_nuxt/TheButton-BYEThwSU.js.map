{"version":3,"file":"TheButton-BYEThwSU.js","sources":["../../../../stores/tree.ts","../../../../components/UI/TheButton.vue"],"sourcesContent":["import {defineStore} from \"pinia\";\nimport axios from \"~/composables/axios\";\nimport nuxtStorage from \"nuxt-storage/nuxt-storage\";\nexport const useTreeStore = defineStore('useTree', {\n  state: ()=>({\n    tree: [],\n    treeFullScreen: false\n  }),\n  getters: {\n    get_list(tree: any) {\n      const userMap = new Map();\n      const rootUsers = [];\n\n      // Заполняем userMap и добавляем свойство children\n      this.tree.forEach(department => {\n        department.participants.forEach(user => {\n          user.children = [];\n          userMap.set(user.id, user);\n        });\n      });\n\n      // Формируем иерархию\n      this.tree.forEach(department => {\n        department.participants.forEach(user => {\n          if (user.head_user_id && userMap.has(user.head_user_id)) {\n            userMap.get(user.head_user_id).children.push(user);\n          } else {\n            rootUsers.push(user); // Если нет head_user_id, значит, это корневой элемент\n          }\n        });\n      });\n\n      return rootUsers;\n    }\n  },\n  actions: {\n    async loadTreeList(){\n      axios.get(`department/`, {\n        headers: {\n          Authorization: `Bearer ${nuxtStorage.localStorage.getData('token')}`\n        }\n      }).then(res=> {\n        this.tree = res.data.results\n      })\n    }\n  }\n})\n\n\n","<template>\n  <button :type=\"t\" class=\"font-bold  tracking-widest text-white\"\n          :class=\"{\n          'bg-blue-400 w-5/12 mx-auto py-4 rounded-xl' : type === 'signIn',\n          'bg-blueSemiLight' : type === 'change', 'bg-green-400' : type === 'success',\n          'bg-red-400': type === 'danger',\n          'dark:hover:bg-gray-600 hover:bg-gray-100 rounded-lg !text-semiCyan transition-all p-2' : type === 'chat',\n          '!text-black dark:!text-white border border-semiCyan p-2 rounded-lg' : type === 'treeBtn',\n          'dark:hover:bg-gray-700 hover:bg-gray-100 rounded-lg !text-semiCyan transition-all p-2' : type === 'documentBtn',\n          }\">\n    <slot/>\n  </button>\n</template>\n\n<script setup lang=\"ts\">\nimport {useTreeStore} from \"~/stores/tree\";\nconst treeStore = useTreeStore()\ndefineProps({\n  type: String,\n  t: String\n})\n</script>"],"names":[],"mappings":";;;;;AAGa,MAAA,eAAe,YAAY,WAAW;AAAA,EACjD,OAAO,OAAK;AAAA,IACV,MAAM,CAAC;AAAA,IACP,gBAAgB;AAAA,EAAA;AAAA,EAElB,SAAS;AAAA,IACP,SAAS,MAAW;AACZ,YAAA,8BAAc;AACpB,YAAM,YAAY,CAAA;AAGb,WAAA,KAAK,QAAQ,CAAc,eAAA;AACnB,mBAAA,aAAa,QAAQ,CAAQ,SAAA;AACtC,eAAK,WAAW;AACR,kBAAA,IAAI,KAAK,IAAI,IAAI;AAAA,QAAA,CAC1B;AAAA,MAAA,CACF;AAGI,WAAA,KAAK,QAAQ,CAAc,eAAA;AACnB,mBAAA,aAAa,QAAQ,CAAQ,SAAA;AACtC,cAAI,KAAK,gBAAgB,QAAQ,IAAI,KAAK,YAAY,GAAG;AACvD,oBAAQ,IAAI,KAAK,YAAY,EAAE,SAAS,KAAK,IAAI;AAAA,UAAA,OAC5C;AACL,sBAAU,KAAK,IAAI;AAAA,UACrB;AAAA,QAAA,CACD;AAAA,MAAA,CACF;AAEM,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,MAAM,eAAc;AAClB,YAAM,IAAI,eAAe;AAAA,QACvB,SAAS;AAAA,UACP,eAAe,UAAU,YAAY,aAAa,QAAQ,OAAO,CAAC;AAAA,QACpE;AAAA,MAAA,CACD,EAAE,KAAK,CAAM,QAAA;AACP,aAAA,OAAO,IAAI,KAAK;AAAA,MAAA,CACtB;AAAA,IACH;AAAA,EACF;AACF,CAAC;;;;;;;;;AC9BiB,iBAAa;;;;;;;;;;;;;;;;;;;;;;;;;"}