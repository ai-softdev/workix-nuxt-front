{"version":3,"file":"index-BvhKjHls.js","sources":["../../../../components/User/UserUI/UserContentCreateElems.vue","../../../../components/User/UserCreate.vue","../../../../components/User/UserContentList.vue","../../../../components/User/UserContent.vue","../../../../pages/base/users/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\n\n</script>\n\n<template>\n<div class=\"flex max-lg:flex-wrap justify-center gap-x-10 my-10 mx-auto w-full\">\n  <slot/>\n</div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup>\nimport TheButton from \"~/components/UI/TheButton.vue\";\nimport TheInput from \"~/components/UI/TheInput.vue\";\nimport TheModal from \"~/components/UI/TheModal.vue\";\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\"\nimport UserContentCreateElems from \"~/components/User/UserUI/UserContentCreateElems.vue\";\n\nimport {useUserStore} from \"~/stores/users\";\nimport {useCompanies} from \"~/stores/companies\";\nimport {useAuthStore} from \"~/stores/auth\";\n\n\nimport VueDatePicker from \"@vuepic/vue-datepicker\";\n\nconst loadCurrentUser = useAuthStore()\nconst company = useCompanies()\nconst userList = useUserStore()\nconst createForm = ref({\n  email: '',\n  first_name: '',\n  last_name: '',\n  patronymic: '',\n  password: '',\n  phone: '',\n  photo: '',\n  position: '',\n  date_of_birth: new Date().toDateString(),\n  company_id: Number(),\n  department_id: Number(),\n  role_id: Number(),\n  permissions: {}\n})\n\nfunction loads() {\n  userList.loadPositionList()\n  userList.loadUserList()\n  company.loadDepartmentList();\n}\n\ndefineProps({\n  showCreateUser: {\n    type: Boolean,\n    default: false\n  },\n})\n\n</script>\n\n<template>\n  <div>\n    <TheButton class=\"max-md:w-full w-full px-4 text-sm\" type=\"signIn\" v-if=\"loadCurrentUser.current_user.permissions\"\n               @click=\"showCreateUser = true; loads(); loadCurrentUser.user.role?.name_en === 'admin' ? company.loadCompanyList({page: 1, limit: 1000, query: ''}) : ''\">\n      {{ $t('Создать пользователя') }}\n    </TheButton>\n    <TheModal v-if=\"showCreateUser\"\n              @showModal=\"showCreateUser = !showCreateUser; !showCreateUser ? createForm = {} : createForm = {} \"\n              :show-create-user=\"showCreateUser\">\n      <TheTextContent>{{ $t('Создание пользователя') }}</TheTextContent>\n      <form enctype=\"multipart/form-data\"\n            @submit.prevent=\"loadCurrentUser.user.role?.name_en === 'admin' ? userList.createAdmin(createForm) : userList.createUser(createForm)\">\n        <UserContentCreateElems>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <TheInput type=\"text\" :label=\"$t('Имя')\" v-model=\"createForm.first_name\"/>\n          </div>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <TheInput type=\"text\" :label=\"$t('Фамилия')\" v-model=\"createForm.last_name\"/>\n          </div>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <TheInput type=\"text\" :label=\"$t('Отчество')\" v-model=\"createForm.patronymic\"/>\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <TheInput type=\"text\" label=\"Email\" v-model=\"createForm.email\"/>\n          </div>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <TheInput type=\"password\" :label=\"$t('Пароль')\" v-model=\"createForm.password\"/>\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <div class=\"w-6/12 max-lg:w-full flex flex-col\">\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Дата рождения') }}</p>\n            <VueDatePicker v-model=\"createForm.date_of_birth\" :select-text=\"$t('Выбрать')\"\n                           :cancel-text=\"$t('Отменить')\" placeholder=\"Start Typing ...\" text-input\n                           class=\"w-full max-lg:hidden rounded-lg p-2 dark:border-none mx-auto outline-semiCyan outline-1\"\n                           auto-apply\n                           multi-calendars-solo/>\n            <input type=\"date\" v-model=\"createForm.date_of_birth\"\n                   class=\"max-lg:block border outline-semiCyan dark:outline-none outline-1 dark:border-none hidden p-4 dark:bg-gray-300 dark:text-black mb-4 rounded-lg\">\n          </div>\n          <div class=\"w-6/12 flex flex-col max-lg:w-full gap-y-1\">\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Номер телефона') }}</p>\n            <TheInput type=\"tel\" class=\"w-full rounded-lg p-2 outline-1\"\n                      id=\"phone\"\n                      placeholder=\"+998 (__) ___-__-__\"\n                      v-model=\"createForm.phone\"\n            />\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <div class=\"w-6/12 flex flex-col max-lg:w-full\">\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Фото') }}</p>\n            <label class=\"cursor-pointer hover:bg-semiCyan rounded-lg border-dashed border p-4 transition-all mt-2\">\n              <input type=\"file\" name=\"file\" :label=\"'Фото'\" class=\"dark:text-white cursor-pointer\"\n                     @input=\"createForm.photo = $event.target.files[0]\">\n            </label>\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <div class=\"w-6/12 max-lg:w-full\">\n            <p class=\"text-md dark:text-white tracking-wider\">{{ $t('Должность') }}</p>\n            <TheInput v-if=\"!userList?.get_position_list\" type=\"text\" name=\"text\" :label=\"'Должность'\" class=\"dark:text-white cursor-pointer\" v-model=\"createForm.position\"/>\n            <select v-else type=\"text\" v-model=\"createForm.position\" :modelValue=\"createForm.position\"\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black\">\n              <option v-for=\"position in userList?.get_position_list\" :value=\"position.name\">{{ position.name }}</option>\n            </select>\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <div class=\"w-full\">\n            <p v-if=\"loadCurrentUser.user.role.name_en === 'admin'\"\n               class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Компании') }}</p>\n            <p v-else class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Компания') }}</p>\n            <select type=\"text\" v-model=\"createForm.company_id\"\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black\"\n                    v-if=\"loadCurrentUser?.user.role.name_en === 'admin'\">\n              <option class=\"text-black\" v-for=\"companyItem in company?.get_all_company?.results\"\n                      :value=\"companyItem.id\">\n                {{ companyItem.name }}\n              </option>\n            </select>\n            <div v-else-if=\"loadCurrentUser.user.role.name_en === 'company_admin'\">\n              <p class=\"text-md dark:text-white tracking-widest mb-2\">{{ loadCurrentUser.user.company }}</p>\n            </div>\n          </div>\n          <div class=\"w-full\" v-if=\"loadCurrentUser.user.role.name_en === 'company_admin'\">\n            <p class=\"text-md dark:text-white tracking-widest mb-2\">{{ $t('Отдел') }}</p>\n            <select type=\"text\" v-model=\"createForm.department_id\"\n                    class=\"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black\">\n              <option v-for=\"department in company?.get_all_department.results\" :value=\"department.id\">\n                {{ department.name }}\n              </option>\n            </select>\n          </div>\n        </UserContentCreateElems>\n        <UserContentCreateElems>\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"button\" type=\"danger\" @click=\"showCreateUser = false\">\n            {{ $t('Отменить') }}\n          </TheButton>\n          <TheButton class=\"py-2 px-6 rounded-full\" t=\"submit\" type=\"success\">\n            {{ $t('Создать') }}\n          </TheButton>\n        </UserContentCreateElems>\n      </form>\n    </TheModal>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup lang=\"ts\">\nimport {useAuthStore} from \"~/stores/auth\";\nconst loadCurrentUser = useAuthStore()\ndefineProps({\n  userItem: {\n    type: Object,\n    required: true,\n  },\n})\n\n</script>\n\n<template>\n  <div class=\"my-2 flex\">\n    <NuxtLink :to=\"`/base/users/${userItem.id}`\" class=\"transition-all shadow-md hover:shadow-lg border dark:border-none dark:shadow-none dark:bg-gray-700  dark:hover:bg-gray-800 p-4 rounded-lg items-center max-md:flex  max-md:w-full max-sm:flex-col max-sm:gap-y-4\">\n      <div class=\"flex   items-center max-md:w-4/12 gap-x-4 max-lg:mx-auto\">\n        <img class=\"w-14 h-14 rounded-full\" :src=\"userItem.photo\" alt=\"\">\n        <h2 class=\"tracking-widest font-bold  break-words\">{{ userItem.first_name + ' ' + userItem.last_name }}</h2>\n      </div>\n      <div class=\"flex flex-col items-center justify-center my-2 max-md:w-4/12  mx-auto\">\n        <div>\n          <p class=\"text-lg font-bold tracking-widest mb-2\" v-if=\"loadCurrentUser.user.role_en === 'admin'\">{{$t('Роль | Должность')}}</p>\n          <p class=\"text-lg font-bold tracking-widest mb-2\" v-else>{{$t('Должность')}}</p>\n        </div>\n        <div class=\"text-center flex flex-col gap-y-2 tes-sm\">\n          <h2 class=\"tracking-widest text-sm text-gray-600\" v-if=\"loadCurrentUser.user.role_en === 'admin'\">({{ userItem.role }})</h2>\n          <h2 class=\"tracking-widest text-md \">{{ userItem.position }}</h2>\n        </div>\n      </div>\n      <div class=\"flex flex-col items-center text-center\">\n        <h2 class=\"tracking-widest font-bold\" v-if=\"['company_admin', 'director', 'vice_director'].includes(loadCurrentUser.user.role_en)\">{{$t('Дата регистрации')}}</h2>\n        <p>20.20.2025</p>\n      </div>\n    </NuxtLink>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>","<script setup>\nimport TheFilter from \"~/components/UI/TheFilter.vue\"\nimport TheUserStats from \"~/components/User/UserUI/TheUserStats.vue\"\nimport {useUserStore} from \"~/stores/users\";\nimport {useAuthStore} from \"~/stores/auth\";\nimport TheModal from \"~/components/UI/TheModal.vue\";\nimport TheSearch from \"~/components/UI/TheSearch.vue\";\n\nconst loadCurrentUser = useAuthStore()\nconst userList = useUserStore()\nconst phone = ref('')\nconst params = {\n  page: 1,\n  limit: 15,\n  query: '',\n  user_type: 'user-list'\n}\n\ndefineProps({\n  userChecked: {\n    type: String,\n    default: 'user-list'\n  },\n  showUserInfo: {\n    type: Boolean,\n    default: false,\n  }\n})\n\nfunction loadPage(page) {\n  if (page === '<') {\n    if (Number(params.page) > 1) {\n      params.page -= 1;\n    }\n  } else if (page === '>') {\n    if (Number(params.page) < userList.user.number_of_pages) {\n      params.page = Number(params.page) + 1\n    }\n  } else {\n    if (Number(page) <= userList.user.number_of_pages) {\n      params.page = Number(page)\n    }\n  }\n  if (window.innerWidth > 1000) {\n    window.scrollTo({top: 600})\n  } else if (window.innerWidth < 1000) {\n    window.scrollTo({top: 895})\n  } else {\n    window.scrollTo()\n  }\n}\n\nonMounted(() => {\n  navigateTo({\n    params: {\n      page: params.page\n    }\n  })\n})\nwatchSyncEffect(() => {\n  if (loadCurrentUser.user.role?.name_en === 'admin') {\n    userList.loadAdminList({page: params.page, limit: params.limit, query: params.query})\n  } else if(loadCurrentUser.user.role?.name_en === 'company_admin') {\n    userList.loadUserList({\n      page: params.page,\n      limit: params.limit,\n      query: params.query\n    })\n  }\n})\n</script>\n\n<template>\n  <div class=\"\">\n    <div :class=\"{'flex flex-wrap items-center justify-between' :['company_admin', 'admin'].includes( loadCurrentUser.user.role?.name_en )}\">\n      <div class=\"mb-10 mt-12 text-lg flex gap-x-10\">\n        <p class=\"dark:text-white tracking-widest\" v-if=\"loadCurrentUser.user.role?.name_en === 'admin'\">\n          {{ $t('Список администраторов компании') }}</p>\n        <p class=\"dark:text-white tracking-widest \" v-else>{{ $t('Список всех пользователей компании') }}</p>\n      </div>\n      <div\n        :class=\"{'flex items-center justify-evenly my-10' : loadCurrentUser.user.role?.name_en === 'admin', 'w-2/12 max-lg:w-4/12 max-sm:w-full max-sm:mb-6 max-sm:mx-auto' : loadCurrentUser.user.role_en !== 'admin'}\">\n        <div class=\"flex gap-x-10\" v-if=\"loadCurrentUser?.user.role === 'Администратор сайта'\">\n          <button class=\"p-2 rounded-xl dark:text-white tracking-widest font-bold\"\n                  :class=\"{'bg-blueDarkSemiLight text-white' : userChecked === 'user-list'}\"\n                  @click=\"userChecked = 'user-list'; userList.loadUserList({page: userList.page, limit: params.limit, user_type: userChecked})\">\n            {{ $t('Все пользователи') }}\n          </button>\n          <button class=\"p-2 rounded-xl dark:text-white tracking-widest font-bold\"\n                  :class=\"{'bg-blueDarkSemiLight text-white' : userChecked === 'admin-list'}\"\n                  @click=\"userChecked = 'admin-list'; userList.loadAdminList({page: userList.page, limit: params.limit})\">\n            {{ $t('Администраторы компаний') }}\n          </button>\n        </div>\n        <UserCreate></UserCreate>\n      </div>\n    </div>\n    <div class=\"w-full \">\n      <div class=\"flex gap-x-10 max-lg:flex-wrap max-md:justify-center\">\n        <div class=\"flex w-9/12 justify-between max-lg:justify-center gap-x-10 items-center max-md:flex-wrap max-md:mt-10 max-md:justify-center\">\n          <TheSearch class=\"w-full\" v-model:model-value=\"params.query\" @search=\"userList.loadUserList(params)\"/>\n          <TheFilter></TheFilter>\n        </div>\n      </div>\n      <div class=\"flex max-md:flex-wrap justify-center max-md:mt-10\">\n        <div class=\"flex flex-wrap gap-x-6 max-md:order-2 max-lg:justify-center\">\n          <UserContentList v-if=\"userList?.get_user_list.count > 0\" v-for=\"userItem in userList?.get_user_list.results\" :user-item=\"userItem\" class=\"max-md:w-full\"></UserContentList>\n        </div>\n      </div>\n    </div>\n    <div class=\"flex flex-wrap justify-center gap-x-4 mt-10\">\n      <div v-if=\"userList.get_user_list.count > 5\" v-for=\"(page, id) in userList?.get_user_list?.links\" :key=\"id\"\n           class=\"px-4 py-2 rounded-full cursor-pointer\"\n           :class=\"{'bg-blue-400 text-white' : page.active, 'bg-gray-200 text-black' : !page.active}\"\n           @click=\"loadPage(page.label); userList?.loadUserList({page: params.page, limit: params.limit, user_type: loadCurrentUser.user.role_en !== 'admin' ? 'user-list/my-company' : userChecked, query: params.query})\">\n        {{ page.label }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n\n</style>","<script setup lang=\"ts\">\nimport TheTextContent from \"~/components/UI/TheTextContent.vue\";\nimport {useAuthStore} from \"~/stores/auth\";\n\n\nconst currentUser = useAuthStore()\n\nuseSeoMeta({\n  title: 'Пользователи',\n  description: 'Список пользователей данной платформы'\n})\n\nonMounted(()=> {\n  currentUser.loadCurrentUserWorker()\n})\n</script>\n\n<template>\n  <div>\n    <TheTextContent :text-type=\"'pageTitle'\">{{ $t('Страница с пользователями') }}</TheTextContent>\n    <p class=\"dark:text-gray-300 tracking-widest text-sm\">\n      {{ $t('Данная страница хранит информацию о пользователях данной платформы') }}</p>\n    <div>\n      <UserContent></UserContent>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderSlot"],"mappings":"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"}