import{e as j}from"./entry.C_V07BOh.js";import{u as V}from"./index.Djxotxdq.js";import{_ as $}from"./TheTextContent.vue.DJ99356g.js";import{_ as k}from"./nuxt-link.DYfF4tKS.js";import{j as w,N as u,O as p,L as t,V as i,Z as l,_ as m,J as C,a2 as O,u as r,$ as _,P as y,a5 as L,a as N,a6 as B,a4 as S,b as g}from"./swiper-vue.yO-n0JsZ.js";import{u as h}from"./objects.DZtojKGm.js";import{_ as U}from"./TheSearch.vue.CMnXhBnJ.js";import{_ as E}from"./TheFilter.vue.BRDkskzN.js";import{_ as x}from"./TheButton.vue.DB8b8JXi.js";import{_ as M}from"./TheModal.vue.CfyleZWN.js";import{_ as T}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{_ as f}from"./TheInput.vue.7qlRdbvh.js";import{u as F}from"./auth.BtpEym_P.js";import{u as R}from"./companies.XqAOW5Ve.js";import"./nuxt-storage.CgJyI38a.js";const A=""+globalThis.__publicAssetsURL("img/logo-company.png"),D=l("img",{class:"w-[50px] h-[50px]",src:A,alt:""},null,-1),I={class:"tracking-widest"},J=w({__name:"ObjectList",props:{object:{type:Object,default:()=>{}}},setup(n){return(d,s)=>{const a=k;return u(),p("div",null,[t(a,{to:`/base/objects/${n.object.id}`,class:"transition-all cursor-pointer dark:bg-gray-400 dark:hover:bg-gray-300 dark:shadow-none shadow-xl hover:bg-gray-100 dark:border-none border-t border-t-gray-100 p-4 rounded-xl flex items-center gap-x-4"},{default:i(()=>[D,l("h1",I,m(n.object.name),1)]),_:1},8,["to"])])}}}),P={class:"flex gap-x-10"},Z={class:"w-full flex flex-col gap-y-4"},q={class:"dark:border-t dark:border-t-gray-500 border-t border-t-gray-100 dark:shadow-gray-500 shadow-md w-4/12 rounded-lg p-2"},z=l("div",null,null,-1),G=w({__name:"ObjectContent",setup(n){const d=h();return d.loadObjectList(),(s,a)=>(u(),p("div",P,[l("div",Z,[(u(!0),p(C,null,O(r(d).get_objects.results,e=>(u(),y(J,{object:e},null,8,["object"]))),256))]),l("div",q,[t($,null,{default:i(()=>[_(m(s.$t("Информация по объектам")),1)]),_:1}),z])]))}}),H={},K={class:"flex max-lg:flex-wrap gap-y-4 justify-center gap-x-10 my-10 mx-auto w-full"};function Q(n,d){return u(),p("div",K,[L(n.$slots,"default")])}const b=T(H,[["render",Q]]),W={class:"w-6/12"},X={class:"w-6/12"},Y={class:"w-6/12"},ee={class:"w-full text-center mx-auto border p-4 border-dashed rounded-md"},te={class:"w-full"},se=w({__name:"ObjectCreate",props:{showCreate:{type:Boolean,default:!1}},setup(n){const d=h(),s=N({name:"",description:"",email:"",files:"",address:""});return(a,e)=>(u(),p("div",null,[l("button",{class:"font-bold tracking-widest text-white bg-blue-400 mx-auto py-4 rounded-xl w-full px-4 text-sm",onClick:e[0]||(e[0]=o=>n.showCreate=!0)},m(a.$t("Создать объект")),1),n.showCreate?(u(),y(M,{key:0,onShowModal:e[8]||(e[8]=o=>n.showCreate=!n.showCreate)},{default:i(()=>[t($,null,{default:i(()=>[_(m(a.$t("Создание объекта")),1)]),_:1}),l("form",{onSubmit:e[7]||(e[7]=B(o=>r(d).createObject(r(s)),["prevent"]))},[t(b,null,{default:i(()=>[l("div",W,[t(f,{type:"text",label:a.$t("Наименование"),modelValue:r(s).name,"onUpdate:modelValue":e[1]||(e[1]=o=>r(s).name=o)},null,8,["label","modelValue"])]),l("div",X,[t(f,{type:"text",label:a.$t("Email"),modelValue:r(s).email,"onUpdate:modelValue":e[2]||(e[2]=o=>r(s).email=o)},null,8,["label","modelValue"])])]),_:1}),t(b,{class:"flex-wrap"},{default:i(()=>[l("div",Y,[t(f,{type:"text",label:a.$t("Адрес"),modelValue:r(s).address,"onUpdate:modelValue":e[3]||(e[3]=o=>r(s).address=o)},null,8,["label","modelValue"])]),l("div",ee,[t(f,{type:"file",label:a.$t("Прикрепите файлы"),onInput:e[4]||(e[4]=o=>r(s).files=o.target.files[0])},null,8,["label"])])]),_:1}),t(b,null,{default:i(()=>[l("div",te,[t(f,{type:"textarea",label:a.$t("Описание"),modelValue:r(s).description,"onUpdate:modelValue":e[5]||(e[5]=o=>r(s).description=o)},null,8,["label","modelValue"])])]),_:1}),t(b,null,{default:i(()=>[t(x,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:e[6]||(e[6]=o=>n.showCreate=!1)},{default:i(()=>[_(m(a.$t("Отменить")),1)]),_:1}),t(x,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:i(()=>[_(m(a.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1})):S("",!0)]))}}),oe={class:"flex items-center gap-x-6"},ge=w({__name:"index",setup(n){const d=j(),s=F(),a=R();return g(()=>s.user,e=>{var o,c;((c=(o=s==null?void 0:s.user)==null?void 0:o.role)==null?void 0:c.name_en)==="admin"&&(window.history.length>1?d.push("/base/profile"):d.push("/"))}),g(()=>a.company,e=>{var c;((c=a.company.modules)==null?void 0:c.find(v=>v.name_en==="objects"))||(window.history.length>1?d.push("/base/profile"):d.push("/"))}),V({title:"Объекты",description:"Объекты компании"}),(e,o)=>(u(),p("div",null,[t($,{"text-type":"pageTitle"},{default:i(()=>[_(m(e.$t("Страница с объектами")),1)]),_:1}),l("div",oe,[t(U,{class:"w-8/12"}),t(E),t(se,{class:"w-2/12 ml-auto"})]),t(G)]))}});export{ge as default};
