import{p as c}from"./entry.D5Sy51vS.js";import{a,n as s,l as n}from"./nuxt-storage.hATfV0XZ.js";const r=c("sales",{state:()=>({sales:{}}),getters:{get_objects(e){return this.objects}},actions:{async loadSalesList(e){a.get(`sales/list?page=${e.page}&limit=${e.limit}${e.name?`&name=${e.name}`:""}${e.min_price?`&min_price=${e.min_price}`:""}${e.max_price?`&max_price=${e.max_price}`:""}${e.min_count?`&min_count=${e.min_count}`:""}${e.max_count?`&max_count=${e.max_count}`:""}${e.order_by?`&order_by=${e.order_by}`:""}`,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(t=>{this.sales=t.data})},async loadSalesListFile(){a.post("sales/report",{},{responseType:"blob",headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(e=>{if(console.log(e),e.status===201)n.success("Создание отчёта началось!",{autoClose:1500,theme:"auto"});else if(e.status===200){const t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.download="sales.xlsx",document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(t),document.body.removeChild(o)}})},async createItem(e){a.post("sales/create",e.form,{headers:{Authorization:`Bearer ${s.localStorage.getData("token")}`}}).then(t=>{n.success("Товар успешно создан!",{autoClose:1500,theme:"auto"})}).catch(t=>{throw n.error(t,{autoClose:1500,theme:"auto"}),t})}}});export{r as u};
