import{c as v,e as C}from"./entry.FS6nWMvz.js";import{u as k}from"./index.XCoVFbOV.js";import{j as x,N as i,O as u,Z as e,_ as a,u as l,a as j,L as d,V as p,P as g,a2 as V,$ as c,a6 as L,b as S,J as h,a3 as w}from"./swiper-vue.D8OdYOtj.js";import{_}from"./TheButton.vue.DELLnAsB.js";import{_ as D}from"./TheModal.vue.B87978z5.js";import{_ as I}from"./TheTextContent.vue.m2iseIPA.js";import{u as y}from"./companies.RkaHj0zP.js";import{T}from"./TaskContentCreateElems.xymZ3oxp.js";import{_ as B}from"./TheInput.vue.B9n9qFKm.js";import{u as b}from"./auth.Dg7LU-8P.js";import{T as N}from"./TheSceleton.DF0SPIy-.js";import{u as G}from"./chat.9dWTSmic.js";import"./nuxt-storage.jjXK-e5k.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const M={class:"items-center gap-x-4 max-lg:w-full max-md:justify-center font-medium max-sm:w-full max-sm:text-center mb-4 pb-4 border-b"},E={class:"flex flex-col gap-4"},F={class:"flex items-center justify-between"},O={class:"text-sm dark:text-gray-400"},R={class:"mt-2 text-mediumGray text-sm"},J={class:"flex items-center justify-between"},P={class:"text-sm dark:text-gray-400"},U={class:"mt-2 text-mediumGray text-sm"},Z=x({__name:"DepartmentContentLists",props:{departmentItem:{type:Object,default:()=>{}}},setup(n){const m=v();return(r,s)=>(i(),u("div",{onClick:s[0]||(s[0]=t=>l(m).push(`/base/companies/department/${n.departmentItem.id}`)),class:"transition-all px-5 py-6 rounded-3xl cursor-pointer border bg-white shadow-cards"},[e("div",M,a(n.departmentItem.name),1),e("div",E,[e("div",F,[e("p",O,a(r.$t("Руководитель")),1),e("p",R,a(n.departmentItem.department_director_name||r.$t("Отсутствует")),1)]),e("div",J,[e("p",P,a(r.$t("Заместитель")),1),e("p",U,a(n.departmentItem.vice_department_director_name||r.$t("Отсутствует")),1)])])]))}}),q={class:"w-full"},z={class:"flex justify-center gap-x-10"},A=x({__name:"DepartmentCreate",props:{showCreate:{type:Boolean,default:!1}},setup(n){const m=y(),r=j({name:"",email:"",address:""});return(s,t)=>(i(),u("div",null,[d(_,{class:"w-full mr-auto !rounded-full !bg-golden !text-black",type:"signIn",onClick:t[0]||(t[0]=o=>n.showCreate=!0)},{default:p(()=>[c(" + "+a(s.$t("Создать департамент")),1)]),_:1}),n.showCreate?(i(),g(D,{key:0,onShowModal:t[5]||(t[5]=o=>n.showCreate=!n.showCreate)},{default:p(()=>[d(I,null,{default:p(()=>[c(a(s.$t("Создать департамент")),1)]),_:1}),e("form",{onSubmit:t[4]||(t[4]=L(o=>{l(m).createDepartment({department:l(r)}),n.showCreate=!1,l(r).name=" "},["prevent"]))},[d(T,null,{default:p(()=>[e("div",q,[d(B,{type:"text",label:s.$t("Наименование"),modelValue:l(r).name,"onUpdate:modelValue":t[1]||(t[1]=o=>l(r).name=o)},null,8,["label","modelValue"])])]),_:1}),e("div",z,[d(_,{class:"px-10 rounded-full py-2",t:"button",type:"danger",onClick:t[2]||(t[2]=o=>n.showCreate=!1)},{default:p(()=>[c(a(s.$t("Отменна")),1)]),_:1}),d(_,{class:"px-10 rounded-full py-2 bg-blueSemiLight",t:"submit",onClick:t[3]||(t[3]=o=>l(m).loadDepartmentList())},{default:p(()=>[c(a(s.$t("Создать")),1)]),_:1})])],32)]),_:1})):V("",!0)]))}}),H={class:"flex items-center justify-between"},K={class:"dark:text-white text-3xl font-bold mb-6"},Q={class:"flex relative items-center justify-between w-full gap-x-10 mt-4"},W={class:"text-mediumGray w-6/12"},X={class:"mt-8"},Y={key:0,class:"flex w-full gap-y-4 gap-x-4 flex-wrap"},ee={key:1,class:"grid grid-cols-4 gap-5"},te={class:"mt-6 flex items-center justify-end gap-1"},se={class:"font-bold"},$e=x({__name:"index",props:{formTitle:String},setup(n){G(),b();const m=y();m.loadDepartmentList();const r=C(),s=b();return S(()=>s.user,t=>{var o,f;((f=(o=s==null?void 0:s.user)==null?void 0:o.role)==null?void 0:f.name_en)==="admin"&&(window.history.length>1?r.push("/base/profile"):r.push("/"))}),k({title:"Департаменты",description:"Список департаментов компании"}),(t,o)=>{var f;return i(),u("div",null,[e("div",H,[e("p",K,a(t.$t("Страница департаментов компании")),1),d(A,{class:"w-3/12 max-md:w-9/12 max-md:mb-4 text-sm"})]),e("div",Q,[e("p",W,a(t.$t("Кликните на отдел, чтобы посмотреть доступные должности.")),1)]),e("div",X,[l(m).get_all_department.results?(i(),u("div",ee,[(i(!0),u(h,null,w((f=l(m))==null?void 0:f.get_all_department.results,$=>(i(),g(Z,{"department-item":$},null,8,["department-item"]))),256))])):(i(),u("div",Y,[(i(),u(h,null,w(6,$=>d(N,{"border-radius":"10px",width:"30%",height:"100px"})),64))])),e("div",te,[e("p",null,a(t.$t("Количество департаментов"))+": ",1),e("p",se,a(l(m).get_all_department.count),1)])])])}}});export{$e as default};
