import{N as a,O as d,a5 as z,a as E,u as e,P as S,V as x,$ as C,_ as i,a4 as k,L as p,Z as t,a6 as H,aa as L,ab as J,J as U,a2 as V,ar as j,j as A,H as P,a8 as Z,a3 as v}from"./swiper-vue.C62siAhS.js";import{_ as q}from"./TheButton.vue.DPQ248BT.js";import{_ as b}from"./TheInput.vue.serkzXMq.js";import{_ as G}from"./TheModal.vue.CraCkhhf.js";import{_ as W}from"./TheTextContent.vue.DaILusXJ.js";import{_ as K}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as F}from"./users.Dw3KR7wB.js";import{u as Q}from"./companies.BVIun85e.js";import{u as N}from"./auth.B6SFGXBB.js";import{o as R}from"./vue-datepicker.Cxnu_Asr.js";import{_ as X}from"./nuxt-link.DmVhN6Uy.js";import{E as Y}from"./entry.Doav1j1v.js";import{_ as ee}from"./TheFilter.vue.DCngcKZ-.js";import{_ as te}from"./TheSearch.vue.zBwj11Oz.js";import{u as se}from"./index.Cw99in4n.js";import"./nuxt-storage.gLjAmBiV.js";const le={},ae={class:"flex max-lg:flex-wrap justify-center gap-x-10 my-10 mx-auto w-full"};function oe(m,c){return a(),d("div",ae,[z(m.$slots,"default")])}const h=K(le,[["render",oe]]),ne={class:"w-6/12 max-lg:w-full"},re={class:"w-6/12 max-lg:w-full"},ie={class:"w-6/12 max-lg:w-full"},de={class:"w-6/12 max-lg:w-full"},ue={class:"w-6/12 max-lg:w-full"},me={class:"w-6/12 max-lg:w-full flex flex-col"},ce={class:"text-md dark:text-white tracking-wider"},pe={class:"w-6/12 flex flex-col max-lg:w-full gap-y-1"},_e={class:"text-md dark:text-white tracking-wider"},fe={class:"w-6/12 flex flex-col max-lg:w-full"},xe={class:"text-md dark:text-white tracking-wider"},we={class:"cursor-pointer hover:bg-semiCyan rounded-lg border-dashed border p-4 transition-all mt-2"},ge={class:"w-6/12 max-lg:w-full"},ye={class:"text-md dark:text-white tracking-wider"},ke=["modelValue"],be=["value"],he={class:"w-full"},$e={key:0,class:"text-md dark:text-white tracking-widest mb-2"},ve={key:1,class:"text-md dark:text-white tracking-widest mb-2"},Ce=["value"],Ue={key:3},Ve={class:"text-md dark:text-white tracking-widest mb-2"},Le={key:0,class:"w-full"},Se={class:"text-md dark:text-white tracking-widest mb-2"},Ne=["value"],je={__name:"UserCreate",props:{showCreateUser:{type:Boolean,default:!1}},setup(m){const c=N(),u=Q(),o=F(),s=E({email:"",first_name:"",last_name:"",patronymic:"",password:"",phone:"",photo:"",position:"",date_of_birth:new Date().toDateString(),company_id:0,department_id:0,role_id:0,permissions:{}});function _(){o.loadPositionList(),o.loadUserList(),u.loadDepartmentList()}return(n,l)=>(a(),d("div",null,[e(c).current_user.permissions?(a(),S(q,{key:0,class:"max-md:w-full w-full px-4 text-sm",type:"signIn",onClick:l[0]||(l[0]=r=>{var f;m.showCreateUser=!0,_(),((f=e(c).user.role)==null?void 0:f.name_en)==="admin"&&e(u).loadCompanyList({page:1,limit:1e3,query:""})})},{default:x(()=>[C(i(n.$t("Создать пользователя")),1)]),_:1})):k("",!0),m.showCreateUser?(a(),S(G,{key:1,onShowModal:l[16]||(l[16]=r=>{m.showCreateUser=!m.showCreateUser,m.showCreateUser?s.value={}:s.value={}}),"show-create-user":m.showCreateUser},{default:x(()=>[p(W,null,{default:x(()=>[C(i(n.$t("Создание пользователя")),1)]),_:1}),t("form",{enctype:"multipart/form-data",onSubmit:l[15]||(l[15]=H(r=>{var f;return((f=e(c).user.role)==null?void 0:f.name_en)==="admin"?e(o).createAdmin(e(s)):e(o).createUser(e(s))},["prevent"]))},[p(h,null,{default:x(()=>[t("div",ne,[p(b,{type:"text",label:n.$t("Имя"),modelValue:e(s).first_name,"onUpdate:modelValue":l[1]||(l[1]=r=>e(s).first_name=r)},null,8,["label","modelValue"])]),t("div",re,[p(b,{type:"text",label:n.$t("Фамилия"),modelValue:e(s).last_name,"onUpdate:modelValue":l[2]||(l[2]=r=>e(s).last_name=r)},null,8,["label","modelValue"])]),t("div",ie,[p(b,{type:"text",label:n.$t("Отчество"),modelValue:e(s).patronymic,"onUpdate:modelValue":l[3]||(l[3]=r=>e(s).patronymic=r)},null,8,["label","modelValue"])])]),_:1}),p(h,null,{default:x(()=>[t("div",de,[p(b,{type:"text",label:"Email",modelValue:e(s).email,"onUpdate:modelValue":l[4]||(l[4]=r=>e(s).email=r)},null,8,["modelValue"])]),t("div",ue,[p(b,{type:"password",label:n.$t("Пароль"),modelValue:e(s).password,"onUpdate:modelValue":l[5]||(l[5]=r=>e(s).password=r)},null,8,["label","modelValue"])])]),_:1}),p(h,null,{default:x(()=>[t("div",me,[t("p",ce,i(n.$t("Дата рождения")),1),p(e(R),{modelValue:e(s).date_of_birth,"onUpdate:modelValue":l[6]||(l[6]=r=>e(s).date_of_birth=r),"select-text":n.$t("Выбрать"),"cancel-text":n.$t("Отменить"),placeholder:"Start Typing ...","text-input":"",class:"w-full max-lg:hidden rounded-lg p-2 dark:border-none mx-auto outline-semiCyan outline-1","auto-apply":"","multi-calendars-solo":""},null,8,["modelValue","select-text","cancel-text"]),L(t("input",{type:"date","onUpdate:modelValue":l[7]||(l[7]=r=>e(s).date_of_birth=r),class:"max-lg:block border outline-semiCyan dark:outline-none outline-1 dark:border-none hidden p-4 dark:bg-gray-300 dark:text-black mb-4 rounded-lg"},null,512),[[J,e(s).date_of_birth]])]),t("div",pe,[t("p",_e,i(n.$t("Номер телефона")),1),p(b,{type:"tel",class:"w-full rounded-lg p-2 outline-1",id:"phone",placeholder:"+998 (__) ___-__-__",modelValue:e(s).phone,"onUpdate:modelValue":l[8]||(l[8]=r=>e(s).phone=r)},null,8,["modelValue"])])]),_:1}),p(h,null,{default:x(()=>[t("div",fe,[t("p",xe,i(n.$t("Фото")),1),t("label",we,[t("input",{type:"file",name:"file",label:"Фото",class:"dark:text-white cursor-pointer",onInput:l[9]||(l[9]=r=>e(s).photo=r.target.files[0])},null,32)])])]),_:1}),p(h,null,{default:x(()=>{var r,f;return[t("div",ge,[t("p",ye,i(n.$t("Должность")),1),(r=e(o))!=null&&r.get_position_list?L((a(),d("select",{key:1,type:"text","onUpdate:modelValue":l[11]||(l[11]=w=>e(s).position=w),modelValue:e(s).position,class:"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black"},[(a(!0),d(U,null,V((f=e(o))==null?void 0:f.get_position_list,w=>(a(),d("option",{value:w.name},i(w.name),9,be))),256))],8,ke)),[[j,e(s).position]]):(a(),S(b,{key:0,type:"text",name:"text",label:"Должность",class:"dark:text-white cursor-pointer",modelValue:e(s).position,"onUpdate:modelValue":l[10]||(l[10]=w=>e(s).position=w)},null,8,["modelValue"]))])]}),_:1}),p(h,null,{default:x(()=>{var r,f,w,$;return[t("div",he,[e(c).user.role.name_en==="admin"?(a(),d("p",$e,i(n.$t("Компании")),1)):(a(),d("p",ve,i(n.$t("Компания")),1)),((r=e(c))==null?void 0:r.user.role.name_en)==="admin"?L((a(),d("select",{key:2,type:"text","onUpdate:modelValue":l[12]||(l[12]=g=>e(s).company_id=g),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black"},[(a(!0),d(U,null,V((w=(f=e(u))==null?void 0:f.get_all_company)==null?void 0:w.results,g=>(a(),d("option",{class:"text-black",value:g.id},i(g.name),9,Ce))),256))],512)),[[j,e(s).company_id]]):e(c).user.role.name_en==="company_admin"?(a(),d("div",Ue,[t("p",Ve,i(e(c).user.company),1)])):k("",!0)]),e(c).user.role.name_en==="company_admin"?(a(),d("div",Le,[t("p",Se,i(n.$t("Отдел")),1),L(t("select",{type:"text","onUpdate:modelValue":l[13]||(l[13]=g=>e(s).department_id=g),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black"},[(a(!0),d(U,null,V(($=e(u))==null?void 0:$.get_all_department.results,g=>(a(),d("option",{value:g.id},i(g.name),9,Ne))),256))],512),[[j,e(s).department_id]])])):k("",!0)]}),_:1}),p(h,null,{default:x(()=>[p(q,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:l[14]||(l[14]=r=>m.showCreateUser=!1)},{default:x(()=>[C(i(n.$t("Отменить")),1)]),_:1}),p(q,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:x(()=>[C(i(n.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1},8,["show-create-user"])):k("",!0)]))}},qe=je,Ie={class:"my-2 flex"},Te={class:"flex items-center max-md:w-4/12 gap-x-4 max-lg:mx-auto"},De=["src"],Be={class:"tracking-widest font-bold break-words"},Me={class:"flex flex-col items-center justify-center my-2 max-md:w-4/12 mx-auto"},Ee={key:0,class:"text-lg font-bold tracking-widest mb-2"},Ae={key:1,class:"text-lg font-bold tracking-widest mb-2"},Pe={class:"text-center flex flex-col gap-y-2 tes-sm"},We={key:0,class:"tracking-widest text-sm text-gray-600"},Fe={class:"tracking-widest text-md"},Oe={class:"flex flex-col items-center text-center"},ze={key:0,class:"tracking-widest font-bold"},He=t("p",null,"20.20.2025",-1),Je=A({__name:"UserContentList",props:{userItem:{type:Object,required:!0}},setup(m){const c=N();return(u,o)=>{const s=X;return a(),d("div",Ie,[p(s,{to:`/base/users/${m.userItem.id}`,class:"transition-all shadow-md hover:shadow-lg border dark:border-none dark:shadow-none dark:bg-gray-700 dark:hover:bg-gray-800 p-4 rounded-lg items-center max-md:flex max-md:w-full max-sm:flex-col max-sm:gap-y-4"},{default:x(()=>[t("div",Te,[t("img",{class:"w-14 h-14 rounded-full",src:m.userItem.photo,alt:""},null,8,De),t("h2",Be,i(m.userItem.first_name+" "+m.userItem.last_name),1)]),t("div",Me,[t("div",null,[e(c).user.role_en==="admin"?(a(),d("p",Ee,i(u.$t("Роль | Должность")),1)):(a(),d("p",Ae,i(u.$t("Должность")),1))]),t("div",Pe,[e(c).user.role_en==="admin"?(a(),d("h2",We,"("+i(m.userItem.role)+")",1)):k("",!0),t("h2",Fe,i(m.userItem.position),1)])]),t("div",Oe,[["company_admin","director","vice_director"].includes(e(c).user.role_en)?(a(),d("h2",ze,i(u.$t("Дата регистрации")),1)):k("",!0),He])]),_:1},8,["to"])])}}}),Ze={class:""},Ge={class:"mb-10 mt-12 text-lg flex gap-x-10"},Ke={key:0,class:"dark:text-white tracking-widest"},Qe={key:1,class:"dark:text-white tracking-widest"},Re={key:0,class:"flex gap-x-10"},Xe={class:"w-full"},Ye={class:"flex gap-x-10 max-lg:flex-wrap max-md:justify-center"},et={class:"flex w-9/12 justify-between max-lg:justify-center gap-x-10 items-center max-md:flex-wrap max-md:mt-10 max-md:justify-center"},tt={class:"flex max-md:flex-wrap justify-center max-md:mt-10"},st={class:"flex flex-wrap gap-x-6 max-md:order-2 max-lg:justify-center"},lt={class:"flex flex-wrap justify-center gap-x-4 mt-10"},at=["onClick"],ot={__name:"UserContent",props:{userChecked:{type:String,default:"user-list"},showUserInfo:{type:Boolean,default:!1}},setup(m){const c=N(),u=F();E("");const o={page:1,limit:15,query:"",user_type:"user-list"};function s(_){_==="<"?Number(o.page)>1&&(o.page-=1):_===">"?Number(o.page)<u.user.number_of_pages&&(o.page=Number(o.page)+1):Number(_)<=u.user.number_of_pages&&(o.page=Number(_)),window.innerWidth>1e3?window.scrollTo({top:600}):window.innerWidth<1e3?window.scrollTo({top:895}):window.scrollTo()}return P(()=>{Y({params:{page:o.page}})}),Z(()=>{var _,n;((_=c.user.role)==null?void 0:_.name_en)==="admin"?u.loadAdminList({page:o.page,limit:o.limit,query:o.query}):((n=c.user.role)==null?void 0:n.name_en)==="company_admin"&&u.loadUserList({page:o.page,limit:o.limit,query:o.query})}),(_,n)=>{var f,w,$,g,I,T,D,B;const l=qe,r=Je;return a(),d("div",Ze,[t("div",{class:v({"flex flex-wrap items-center justify-between":["company_admin","admin"].includes((f=e(c).user.role)==null?void 0:f.name_en)})},[t("div",Ge,[((w=e(c).user.role)==null?void 0:w.name_en)==="admin"?(a(),d("p",Ke,i(_.$t("Список администраторов компании")),1)):(a(),d("p",Qe,i(_.$t("Список всех пользователей компании")),1))]),t("div",{class:v({"flex items-center justify-evenly my-10":(($=e(c).user.role)==null?void 0:$.name_en)==="admin","w-2/12 max-lg:w-4/12 max-sm:w-full max-sm:mb-6 max-sm:mx-auto":e(c).user.role_en!=="admin"})},[((g=e(c))==null?void 0:g.user.role)==="Администратор сайта"?(a(),d("div",Re,[t("button",{class:v(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":m.userChecked==="user-list"}]),onClick:n[0]||(n[0]=y=>{m.userChecked="user-list",e(u).loadUserList({page:e(u).page,limit:o.limit,user_type:m.userChecked})})},i(_.$t("Все пользователи")),3),t("button",{class:v(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":m.userChecked==="admin-list"}]),onClick:n[1]||(n[1]=y=>{m.userChecked="admin-list",e(u).loadAdminList({page:e(u).page,limit:o.limit})})},i(_.$t("Администраторы компаний")),3)])):k("",!0),p(l)],2)],2),t("div",Xe,[t("div",Ye,[t("div",et,[p(te,{class:"w-full","model-value":o.query,"onUpdate:modelValue":n[2]||(n[2]=y=>o.query=y),onSearch:n[3]||(n[3]=y=>e(u).loadUserList(o))},null,8,["model-value"]),p(ee)])]),t("div",tt,[t("div",st,[((I=e(u))==null?void 0:I.get_user_list.count)>0?(a(!0),d(U,{key:0},V((T=e(u))==null?void 0:T.get_user_list.results,y=>(a(),S(r,{"user-item":y,class:"max-md:w-full"},null,8,["user-item"]))),256)):k("",!0)])])]),t("div",lt,[e(u).get_user_list.count>5?(a(!0),d(U,{key:0},V((B=(D=e(u))==null?void 0:D.get_user_list)==null?void 0:B.links,(y,O)=>(a(),d("div",{key:O,class:v(["px-4 py-2 rounded-full cursor-pointer",{"bg-blue-400 text-white":y.active,"bg-gray-200 text-black":!y.active}]),onClick:it=>{var M;s(y.label),(M=e(u))==null||M.loadUserList({page:o.page,limit:o.limit,user_type:e(c).user.role_en!=="admin"?"user-list/my-company":m.userChecked,query:o.query})}},i(y.label),11,at))),128)):k("",!0)])])}}},nt=ot,rt={class:"dark:text-gray-300 tracking-widest text-sm"},Ct=A({__name:"index",setup(m){const c=N();return se({title:"Пользователи",description:"Список пользователей данной платформы"}),P(()=>{c.loadCurrentUserWorker()}),(u,o)=>{const s=nt;return a(),d("div",null,[p(W,{"text-type":"pageTitle"},{default:x(()=>[C(i(u.$t("Страница с пользователями")),1)]),_:1}),t("p",rt,i(u.$t("Данная страница хранит информацию о пользователях данной платформы")),1),t("div",null,[p(s)])])}}});export{Ct as default};
