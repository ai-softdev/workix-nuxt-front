import{N as n,O as m,a5 as z,a as A,u as e,P as C,V as f,$ as V,_ as r,a4 as y,L as u,Z as s,a6 as H,aa as S,ab as J,J as N,a2 as L,ao as D,j as E,H as P,a8 as Z,a3 as U}from"./swiper-vue.yO-n0JsZ.js";import{_ as I}from"./TheButton.vue.UDYQ0Hci.js";import{_ as b}from"./TheInput.vue.7qlRdbvh.js";import{_ as G}from"./TheModal.vue.CfyleZWN.js";import{_ as W}from"./TheTextContent.vue.DJ99356g.js";import{_ as K}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as F}from"./users.P6ElcVPm.js";import{u as Q}from"./companies.MmjTvq1f.js";import{u as j}from"./auth.SbodeMQS.js";import"./vue-datepicker.BBR82a8J.js";import{_ as R}from"./nuxt-link.D7HHxwWI.js";import{E as X}from"./entry.Sth6lCst.js";import{_ as Y}from"./TheFilter.vue.DXAj-s0L.js";import{_ as ee}from"./TheSearch.vue.CMnXhBnJ.js";import{u as te}from"./index.CYbPqLHK.js";import"./nuxt-storage.CgJyI38a.js";const se={},le={class:"flex max-lg:flex-wrap justify-center gap-x-10 my-10 mx-auto w-full"};function ae(d,c){return n(),m("div",le,[z(d.$slots,"default")])}const v=K(se,[["render",ae]]),oe={class:"w-6/12 max-lg:w-full"},ne={class:"w-6/12 max-lg:w-full"},re={class:"w-6/12 max-lg:w-full"},ie={class:"w-6/12 max-lg:w-full"},de={class:"w-6/12 max-lg:w-full"},ue={class:"w-6/12 max-lg:w-full flex flex-col"},me={class:"text-md dark:text-white tracking-wider"},pe={class:"w-6/12 flex flex-col max-lg:w-full gap-y-1"},_e={class:"text-md dark:text-white tracking-wider"},ce={class:"w-6/12 flex flex-col max-lg:w-full"},fe={class:"text-md dark:text-white tracking-wider"},xe={class:"cursor-pointer hover:bg-semiCyan rounded-lg border-dashed border p-4 transition-all mt-2"},we={class:"w-6/12 max-lg:w-full"},ge={class:"text-md dark:text-white tracking-wider"},ye=["modelValue"],he=["value"],be={key:0,class:"w-6/12 max-lg:w-full"},ke={class:"text-md dark:text-white tracking-widest mb-2"},ve=["value"],$e={class:"w-6/12 max-lg:w-full"},Ce={class:"text-md dark:text-white tracking-wider"},Ue=["value"],Ve={__name:"UserCreate",props:{showCreateUser:{type:Boolean,default:!1}},setup(d){const c=j(),i=Q(),a=F(),t=A({email:"",first_name:"",last_name:"",patronymic:"",password:"",phone:"",photo:"",position:"",head_user_id:"",date_of_birth:new Date().toDateString(),company_id:0,department_id:0,department:{},role_id:0,permissions:{}});function x(){a.loadPositionList(),a.loadUserList(),i.loadDepartmentList()}function w(){var p;(p=t.value.department)!=null&&p.id&&(t.value.department_id=t.value.department.id),a.createAdmin(t.value),t.value={email:"",first_name:"",last_name:"",patronymic:"",password:"",phone:"",photo:"",position:"",head_user_id:"",date_of_birth:new Date().toDateString(),company_id:0,department_id:0,department:{},role_id:0,permissions:{}}}function q(){var p;(p=t.value.department)!=null&&p.id&&(t.value.department_id=t.value.department.id),a.createUser(t.value),t.value={email:"",first_name:"",last_name:"",patronymic:"",password:"",phone:"",photo:"",position:"",head_user_id:"",date_of_birth:new Date().toDateString(),company_id:0,department_id:0,department:{},role_id:0,permissions:{}}}return(p,l)=>(n(),m("div",null,[e(c).current_user.permissions?(n(),C(I,{key:0,class:"max-md:w-full w-full px-4 text-sm",type:"signIn",onClick:l[0]||(l[0]=$=>{var k;d.showCreateUser=!0,x(),((k=e(c).user.role)==null?void 0:k.name_en)==="admin"&&e(i).loadCompanyList({page:1,limit:1e3,query:""})})},{default:f(()=>[V(r(p.$t("Создать пользователя")),1)]),_:1})):y("",!0),d.showCreateUser?(n(),C(G,{key:1,onShowModal:l[17]||(l[17]=$=>{d.showCreateUser=!d.showCreateUser,d.showCreateUser?t.value={}:t.value={}}),"show-create-user":d.showCreateUser},{default:f(()=>{var $,k;return[u(W,null,{default:f(()=>[V(r(p.$t("Создание пользователя")),1)]),_:1}),s("form",{enctype:"multipart/form-data",onSubmit:l[16]||(l[16]=H(o=>{var _;return((_=e(c).user.role)==null?void 0:_.name_en)==="admin"?w():q()},["prevent"]))},[u(v,null,{default:f(()=>[s("div",oe,[u(b,{type:"text",label:p.$t("Имя"),modelValue:e(t).first_name,"onUpdate:modelValue":l[1]||(l[1]=o=>e(t).first_name=o)},null,8,["label","modelValue"])]),s("div",ne,[u(b,{type:"text",label:p.$t("Фамилия"),modelValue:e(t).last_name,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).last_name=o)},null,8,["label","modelValue"])]),s("div",re,[u(b,{type:"text",label:p.$t("Отчество"),modelValue:e(t).patronymic,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).patronymic=o)},null,8,["label","modelValue"])])]),_:1}),u(v,null,{default:f(()=>[s("div",ie,[u(b,{type:"text",label:"Email",modelValue:e(t).email,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).email=o)},null,8,["modelValue"])]),s("div",de,[u(b,{type:"password",label:p.$t("Пароль"),modelValue:e(t).password,"onUpdate:modelValue":l[5]||(l[5]=o=>e(t).password=o)},null,8,["label","modelValue"])])]),_:1}),u(v,null,{default:f(()=>[s("div",ue,[s("p",me,r(p.$t("Дата рождения")),1),u(b,{type:"date",class:"w-full rounded-lg p-2 outline-1",id:"date",placeholder:"Выбрать",modelValue:e(t).date_of_birth,"onUpdate:modelValue":l[6]||(l[6]=o=>e(t).date_of_birth=o)},null,8,["modelValue"]),S(s("input",{type:"date","onUpdate:modelValue":l[7]||(l[7]=o=>e(t).date_of_birth=o),class:"max-lg:block border outline-semiCyan dark:outline-none outline-1 dark:border-none hidden p-4 dark:bg-gray-300 dark:text-black mb-4 rounded-lg"},null,512),[[J,e(t).date_of_birth]])]),s("div",pe,[s("p",_e,r(p.$t("Номер телефона")),1),u(b,{type:"tel",class:"w-full rounded-lg p-2 outline-1",id:"phone",placeholder:"+998 (__) ___-__-__",modelValue:e(t).phone,"onUpdate:modelValue":l[8]||(l[8]=o=>e(t).phone=o)},null,8,["modelValue"])])]),_:1}),u(v,null,{default:f(()=>[s("div",ce,[s("p",fe,r(p.$t("Фото")),1),s("label",xe,[s("input",{type:"file",name:"file",label:"Фото",class:"dark:text-white cursor-pointer",onInput:l[9]||(l[9]=o=>e(t).photo=o.target.files[0])},null,32)])])]),_:1}),u(v,null,{default:f(()=>{var o,_;return[s("div",we,[s("p",ge,r(p.$t("Должность")),1),(o=e(a))!=null&&o.get_position_list?S((n(),m("select",{key:1,type:"text","onUpdate:modelValue":l[11]||(l[11]=h=>e(t).position=h),modelValue:e(t).position,class:"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black"},[(n(!0),m(N,null,L((_=e(a))==null?void 0:_.get_position_list,h=>(n(),m("option",{value:h.name},r(h.name),9,he))),256))],8,ye)),[[D,e(t).position]]):(n(),C(b,{key:0,type:"text",name:"text",label:"Должность",class:"dark:text-white cursor-pointer",modelValue:e(t).position,"onUpdate:modelValue":l[10]||(l[10]=h=>e(t).position=h)},null,8,["modelValue"]))])]}),_:1}),u(v,null,{default:f(()=>{var o;return[e(c).user.role.name_en==="company_admin"?(n(),m("div",be,[s("p",ke,r(p.$t("Отдел")),1),S(s("select",{type:"text","onUpdate:modelValue":l[12]||(l[12]=_=>e(t).department=_),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black"},[(n(!0),m(N,null,L((o=e(i))==null?void 0:o.get_all_department.results,_=>(n(),m("option",{value:_},r(_.name),9,ve))),256))],512),[[D,e(t).department]])])):y("",!0)]}),_:1}),(k=($=e(t).department)==null?void 0:$.participants)!=null&&k.length?(n(),C(v,{key:0},{default:f(()=>{var o;return[s("div",$e,[s("p",Ce,r(p.$t("Руководитель")),1),(o=e(a))!=null&&o.get_position_list?y("",!0):(n(),C(b,{key:0,type:"text",name:"text",label:"Руководитель",class:"dark:text-white cursor-pointer",modelValue:e(t).head_user_id,"onUpdate:modelValue":l[13]||(l[13]=_=>e(t).head_user_id=_)},null,8,["modelValue"])),S(s("select",{"onUpdate:modelValue":l[14]||(l[14]=_=>e(t).head_user_id=_),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black"},[(n(!0),m(N,null,L(e(t).department.participants,_=>(n(),m("option",{key:_.id,value:_.id},r(_.first_name)+" "+r(_.last_name),9,Ue))),128))],512),[[D,e(t).head_user_id]])])]}),_:1})):y("",!0),u(v,null,{default:f(()=>[u(I,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:l[15]||(l[15]=o=>d.showCreateUser=!1)},{default:f(()=>[V(r(p.$t("Отменить")),1)]),_:1}),u(I,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:f(()=>[V(r(p.$t("Создать")),1)]),_:1})]),_:1})],32)]}),_:1},8,["show-create-user"])):y("",!0)]))}},Ne=Ve,Le={class:"my-2 flex"},Se={class:"flex items-center max-md:w-4/12 gap-x-4 max-lg:mx-auto"},je=["src"],qe={class:"tracking-widest font-bold break-words"},De={class:"flex flex-col items-center justify-center my-2 max-md:w-4/12 mx-auto"},Ie={key:0,class:"text-lg font-bold tracking-widest mb-2"},Te={key:1,class:"text-lg font-bold tracking-widest mb-2"},Be={class:"text-center flex flex-col gap-y-2 tes-sm"},Me={key:0,class:"tracking-widest text-sm text-gray-600"},Ae={class:"tracking-widest text-md"},Ee={class:"flex flex-col items-center text-center"},Pe={key:0,class:"tracking-widest font-bold"},We=s("p",null,"20.20.2025",-1),Fe=E({__name:"UserContentList",props:{userItem:{type:Object,required:!0}},setup(d){const c=j();return(i,a)=>{const t=R;return n(),m("div",Le,[u(t,{to:`/base/users/${d.userItem.id}`,class:"transition-all shadow-md hover:shadow-lg border dark:border-none dark:shadow-none dark:bg-gray-700 dark:hover:bg-gray-800 p-4 rounded-lg items-center max-md:flex max-md:w-full max-sm:flex-col max-sm:gap-y-4"},{default:f(()=>[s("div",Se,[s("img",{class:"w-14 h-14 rounded-full",src:d.userItem.photo,alt:""},null,8,je),s("h2",qe,r(d.userItem.first_name+" "+d.userItem.last_name),1)]),s("div",De,[s("div",null,[e(c).user.role_en==="admin"?(n(),m("p",Ie,r(i.$t("Роль | Должность")),1)):(n(),m("p",Te,r(i.$t("Должность")),1))]),s("div",Be,[e(c).user.role_en==="admin"?(n(),m("h2",Me,"("+r(d.userItem.role)+")",1)):y("",!0),s("h2",Ae,r(d.userItem.position),1)])]),s("div",Ee,[["company_admin","director","vice_director"].includes(e(c).user.role_en)?(n(),m("h2",Pe,r(i.$t("Дата регистрации")),1)):y("",!0),We])]),_:1},8,["to"])])}}}),Oe={class:""},ze={class:"mb-10 mt-12 text-lg flex gap-x-10"},He={key:0,class:"dark:text-white tracking-widest"},Je={key:1,class:"dark:text-white tracking-widest"},Ze={key:0,class:"flex gap-x-10"},Ge={class:"w-full"},Ke={class:"flex gap-x-10 max-lg:flex-wrap max-md:justify-center"},Qe={class:"flex w-9/12 justify-between max-lg:justify-center gap-x-10 items-center max-md:flex-wrap max-md:mt-10 max-md:justify-center"},Re={class:"flex max-md:flex-wrap justify-center max-md:mt-10"},Xe={class:"flex flex-wrap gap-x-6 max-md:order-2 max-lg:justify-center"},Ye={class:"flex flex-wrap justify-center gap-x-4 mt-10"},et=["onClick"],tt={__name:"UserContent",props:{userChecked:{type:String,default:"user-list"},showUserInfo:{type:Boolean,default:!1}},setup(d){const c=j(),i=F();A("");const a={page:1,limit:15,query:"",user_type:"user-list"};function t(x){x==="<"?Number(a.page)>1&&(a.page-=1):x===">"?Number(a.page)<i.user.number_of_pages&&(a.page=Number(a.page)+1):Number(x)<=i.user.number_of_pages&&(a.page=Number(x)),window.innerWidth>1e3?window.scrollTo({top:600}):window.innerWidth<1e3?window.scrollTo({top:895}):window.scrollTo()}return P(()=>{X({params:{page:a.page}})}),Z(()=>{var x,w;((x=c.user.role)==null?void 0:x.name_en)==="admin"?i.loadAdminList({page:a.page,limit:a.limit,query:a.query}):((w=c.user.role)==null?void 0:w.name_en)==="company_admin"&&i.loadUserList({page:a.page,limit:a.limit,query:a.query})}),(x,w)=>{var l,$,k,o,_,h,T,B;const q=Ne,p=Fe;return n(),m("div",Oe,[s("div",{class:U({"flex flex-wrap items-center justify-between":["company_admin","admin"].includes((l=e(c).user.role)==null?void 0:l.name_en)})},[s("div",ze,[(($=e(c).user.role)==null?void 0:$.name_en)==="admin"?(n(),m("p",He,r(x.$t("Список администраторов компании")),1)):(n(),m("p",Je,r(x.$t("Список всех пользователей компании")),1))]),s("div",{class:U({"flex items-center justify-evenly my-10":((k=e(c).user.role)==null?void 0:k.name_en)==="admin","w-2/12 max-lg:w-4/12 max-sm:w-full max-sm:mb-6 max-sm:mx-auto":e(c).user.role_en!=="admin"})},[((o=e(c))==null?void 0:o.user.role)==="Администратор сайта"?(n(),m("div",Ze,[s("button",{class:U(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":d.userChecked==="user-list"}]),onClick:w[0]||(w[0]=g=>{d.userChecked="user-list",e(i).loadUserList({page:e(i).page,limit:a.limit,user_type:d.userChecked})})},r(x.$t("Все пользователи")),3),s("button",{class:U(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":d.userChecked==="admin-list"}]),onClick:w[1]||(w[1]=g=>{d.userChecked="admin-list",e(i).loadAdminList({page:e(i).page,limit:a.limit})})},r(x.$t("Администраторы компаний")),3)])):y("",!0),u(q)],2)],2),s("div",Ge,[s("div",Ke,[s("div",Qe,[u(ee,{class:"w-full","model-value":a.query,"onUpdate:modelValue":w[2]||(w[2]=g=>a.query=g),onSearch:w[3]||(w[3]=g=>e(i).loadUserList(a))},null,8,["model-value"]),u(Y)])]),s("div",Re,[s("div",Xe,[((_=e(i))==null?void 0:_.get_user_list.count)>0?(n(!0),m(N,{key:0},L((h=e(i))==null?void 0:h.get_user_list.results,g=>(n(),C(p,{"user-item":g,class:"max-md:w-full"},null,8,["user-item"]))),256)):y("",!0)])])]),s("div",Ye,[e(i).get_user_list.count>5?(n(!0),m(N,{key:0},L((B=(T=e(i))==null?void 0:T.get_user_list)==null?void 0:B.links,(g,O)=>(n(),m("div",{key:O,class:U(["px-4 py-2 rounded-full cursor-pointer",{"bg-blue-400 text-white":g.active,"bg-gray-200 text-black":!g.active}]),onClick:at=>{var M;t(g.label),(M=e(i))==null||M.loadUserList({page:a.page,limit:a.limit,user_type:e(c).user.role_en!=="admin"?"user-list/my-company":d.userChecked,query:a.query})}},r(g.label),11,et))),128)):y("",!0)])])}}},st=tt,lt={class:"dark:text-gray-300 tracking-widest text-sm"},bt=E({__name:"index",setup(d){const c=j();return te({title:"Пользователи",description:"Список пользователей данной платформы"}),P(()=>{c.loadCurrentUserWorker()}),(i,a)=>{const t=st;return n(),m("div",null,[u(W,{"text-type":"pageTitle"},{default:f(()=>[V(r(i.$t("Страница с пользователями")),1)]),_:1}),s("p",lt,r(i.$t("Данная страница хранит информацию о пользователях данной платформы")),1),s("div",null,[u(t)])])}}});export{bt as default};
