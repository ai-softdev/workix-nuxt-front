import{c as v,e as C}from"./entry.Bl3TfwwA.js";import{u as k}from"./index.DnGcLc5s.js";import{j as _,N as i,O as d,Z as e,_ as a,u as l,a as j,L as u,V as p,P as b,a2 as V,$ as f,a6 as D,b as I,J as g,a3 as $}from"./swiper-vue.CGVHF6NK.js";import{_ as x}from"./TheButton.vue.DTxIZ_aw.js";import{_ as L}from"./TheModal.vue.C2BTwYDA.js";import{u as y}from"./companies.DlNOYX_2.js";import{T as S}from"./TaskContentCreateElems.BU_JCW0J.js";import{_ as T}from"./TheInput.vue.DPjuIUBj.js";import{u as h}from"./auth.C-kg6DCt.js";import{T as B}from"./TheSceleton.BVtskP3L.js";import{u as N}from"./chat.BUll_oXM.js";import"./nuxt-storage.LTSgK-Sl.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const G={class:"items-center gap-x-4 max-lg:w-full max-md:justify-center font-medium max-sm:w-full max-sm:text-center mb-4 pb-4 border-b"},M={class:"flex flex-col gap-4"},E={class:"flex items-center justify-between"},F={class:"text-sm dark:text-gray-400"},O={class:"mt-2 text-mediumGray text-sm"},R={class:"flex items-center justify-between"},J={class:"text-sm dark:text-gray-400"},P={class:"mt-2 text-mediumGray text-sm"},U=_({__name:"DepartmentContentLists",props:{departmentItem:{type:Object,default:()=>{}}},setup(n){const m=v();return(r,s)=>(i(),d("div",{onClick:s[0]||(s[0]=t=>l(m).push(`/base/companies/department/${n.departmentItem.id}`)),class:"transition-all px-5 py-6 rounded-3xl cursor-pointer border bg-white shadow-cards"},[e("div",G,a(n.departmentItem.name),1),e("div",M,[e("div",E,[e("p",F,a(r.$t("Руководитель")),1),e("p",O,a(n.departmentItem.department_director_name||r.$t("Отсутствует")),1)]),e("div",R,[e("p",J,a(r.$t("Заместитель")),1),e("p",P,a(n.departmentItem.vice_department_director_name||r.$t("Отсутствует")),1)])])]))}}),Z={class:"text-center font-bold max-sm:w-9/12 max-sm:mx-auto"},q={class:"w-full"},z={class:"flex flex-wrap gap-y-3 items-center justify-center gap-x-10 max-sm:flex-col"},A=_({__name:"DepartmentCreate",props:{showCreate:{type:Boolean,default:!1}},setup(n){const m=y(),r=j({name:"",email:"",address:""});return(s,t)=>(i(),d("div",null,[u(x,{class:"w-full mr-auto !rounded-full !bg-golden !text-black",type:"signIn",onClick:t[0]||(t[0]=o=>n.showCreate=!0)},{default:p(()=>[f(" + "+a(s.$t("Создать департамент")),1)]),_:1}),n.showCreate?(i(),b(L,{key:0,onShowModal:t[5]||(t[5]=o=>n.showCreate=!n.showCreate)},{default:p(()=>[e("p",Z,a(s.$t("Создать департамент")),1),e("form",{onSubmit:t[4]||(t[4]=D(o=>{l(m).createDepartment({department:l(r)}),n.showCreate=!1,l(r).name=" "},["prevent"]))},[u(S,null,{default:p(()=>[e("div",q,[u(T,{type:"text",label:s.$t("Наименование"),modelValue:l(r).name,"onUpdate:modelValue":t[1]||(t[1]=o=>l(r).name=o)},null,8,["label","modelValue"])])]),_:1}),e("div",z,[u(x,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!bg-gray-200 gap-3 py-2 !bg-porcelain !border transition-all ease-in-out duration-300",t:"button",onClick:t[2]||(t[2]=o=>n.showCreate=!1)},{default:p(()=>[f(a(s.$t("Отменить")),1)]),_:1}),u(x,{class:"w-4/12 max-sm:w-full rounded-full flex items-center justify-center !text-black hover:!shadow-golden gap-3 py-2 !bg-golden !border transition-all ease-in-out duration-300",t:"submit",type:"success",onClick:t[3]||(t[3]=o=>l(m).loadDepartmentList())},{default:p(()=>[f(a(s.$t("Создать")),1)]),_:1})])],32)]),_:1})):V("",!0)]))}}),H={class:"flex items-center justify-between max-[786px]:flex-col max-[786px]:items-start"},K={class:"dark:text-white text-3xl font-bold mb-6"},Q={class:"flex relative items-center justify-between w-full gap-x-10 mt-4"},W={class:"text-mediumGray w-6/12 max-[786px]:w-full"},X={class:"mt-8"},Y={key:0,class:"flex w-full gap-y-4 gap-x-4 flex-wrap"},ee={key:1,class:"grid grid-cols-4 max-[1250px]:grid-cols-3 max-[810px]:grid-cols-2 max-[636px]:grid-cols-1 gap-5"},te={class:"mt-6 flex items-center justify-end gap-1"},se={class:"font-bold"},_e=_({__name:"index",props:{formTitle:String},setup(n){N(),h();const m=y();m.loadDepartmentList();const r=C(),s=h();return I(()=>s.user,t=>{var o,c;((c=(o=s==null?void 0:s.user)==null?void 0:o.role)==null?void 0:c.name_en)==="admin"&&(window.history.length>1?r.push("/base/profile"):r.push("/"))}),k({title:"Департаменты",description:"Список департаментов компании"}),(t,o)=>{var c;return i(),d("div",null,[e("div",H,[e("p",K,a(t.$t("Страница департаментов компании")),1),u(A,{class:"w-3/12 max-md:w-9/12 max-md:mb-4 text-sm"})]),e("div",Q,[e("p",W,a(t.$t("Кликните на отдел, чтобы посмотреть доступные должности.")),1)]),e("div",X,[l(m).get_all_department.results?(i(),d("div",ee,[(i(!0),d(g,null,$((c=l(m))==null?void 0:c.get_all_department.results,w=>(i(),b(U,{"department-item":w},null,8,["department-item"]))),256))])):(i(),d("div",Y,[(i(),d(g,null,$(6,w=>u(B,{"border-radius":"10px",width:"30%",height:"100px"})),64))])),e("div",te,[e("p",null,a(t.$t("Количество департаментов"))+": ",1),e("p",se,a(l(m).get_all_department.count),1)])])])}}});export{_e as default};
